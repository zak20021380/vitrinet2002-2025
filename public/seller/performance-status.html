<style>
  .performance-wrap { direction: rtl; font-family: 'Vazirmatn', sans-serif; }
  .score-card {
    border-radius: 1rem;
    padding: 24px;
    text-align: center;
    border: 1px solid transparent;
    box-shadow: 0 8px 24px rgba(15, 118, 110, 0.08);
    transition: box-shadow .25s ease, transform .25s ease;
    background: #f8fafc;
  }
  .score-card:hover { box-shadow: 0 12px 32px rgba(14,165,233,.15); transform: translateY(-4px); }
  .score-card .score { font-size: 2.7rem; font-weight: 900; color: #0ea5e9; }
  .score-card .score-suffix { font-size: 1rem; color: #475569; margin-right: .35rem; }
  .score-card .label { font-weight: 800; margin-top: .6rem; font-size: 1.1rem; }
  .score-card .status { margin-top: .75rem; font-weight: 600; font-size: .95rem; }
  .score-card .updated { margin-top: .6rem; font-size: .8rem; color: #64748b; }
  .score-card.status-success { background: #ecfdf5; border-color: #bbf7d0; }
  .score-card.status-success .label, .score-card.status-success .status { color: #047857; }
  .score-card.status-warning { background: #fef3c7; border-color: #fde68a; }
  .score-card.status-warning .label, .score-card.status-warning .status { color: #b45309; }
  .score-card.status-danger { background: #fee2e2; border-color: #fecaca; }
  .score-card.status-danger .label, .score-card.status-danger .status { color: #b91c1c; }
  .score-card.status-neutral { background: #f8fafc; border-color: #e2e8f0; }
  .score-card.status-neutral .label { color: #0f172a; }
  .score-card.status-neutral .status { color: #0ea5e9; }
  .greeting-line { font-size: 1rem; font-weight: 800; color: #0f172a; margin: 0; }
  .greeting-line span { color: #0ea5e9; }
  .summary-card {
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 6px 20px rgba(15,118,110,.08);
    padding: 20px 22px;
    line-height: 1.8;
    font-size: .92rem;
  }
  .summary-card h3 { font-weight: 800; color: #0ea5e9; font-size: 1.1rem; margin-bottom: .6rem; }
  .summary-card p { color: #475569; margin: 0; }
  .city-ranking { background: #ffffff; border-radius: 1.1rem; box-shadow: 0 16px 40px rgba(16, 185, 129, .14); padding: 22px 20px; border: 1px solid #bbf7d0; }
  .city-ranking__header { display: flex; flex-direction: column; gap: 6px; margin-bottom: 16px; text-align: right; }
  .city-ranking__eyebrow { display: inline-flex; align-items: center; gap: 8px; background: linear-gradient(120deg, #fef9c3, #f0fdfa); border: 1px dashed #fbbf24; padding: 6px 10px; border-radius: 999px; font-size: .85rem; color: #ca8a04; font-weight: 900; width: fit-content; box-shadow: 0 6px 16px rgba(251, 191, 36, .18); }
  .city-ranking__title { margin: 0; font-size: 1.2rem; font-weight: 900; color: #0f172a; }
  .city-ranking__desc { margin: 0; color: #475569; font-size: .93rem; line-height: 1.9; }
  .city-ranking__grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 14px; }
  .trophy-card { position: relative; overflow: hidden; background: linear-gradient(145deg, #0ea5e914 0%, #22c55e0f 55%, #fef08a22 100%); border: 1px solid #bbf7d0; border-radius: 18px; padding: 18px 16px; box-shadow: 0 22px 45px rgba(34, 197, 94, 0.18); display: flex; flex-direction: column; gap: 12px; min-height: 190px; transition: transform .25s ease, box-shadow .25s ease; }
  .trophy-card:hover { transform: translateY(-3px); box-shadow: 0 30px 60px rgba(34, 197, 94, 0.24); }
  .trophy-card::after { content: ""; position: absolute; inset: 0; pointer-events: none; background: radial-gradient(circle at 85% 10%, rgba(250, 204, 21, .24), transparent 45%); mix-blend-mode: screen; }
  .trophy-card--heat {
    background: linear-gradient(135deg, #fff9ef 0%, #fde9b8 38%, #f6c97a 68%, #efb34c 100%);
    border-color: #f2b450;
    box-shadow: 0 22px 45px rgba(239, 179, 76, 0.22), inset 0 1px 0 rgba(255, 255, 255, 0.62);
  }
  .trophy-card--heat::before {
    content: "";
    position: absolute;
    inset: 10px;
    border-radius: 14px;
    background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.32), transparent 45%),
      linear-gradient(120deg, rgba(255, 255, 255, 0.24), rgba(255, 255, 255, 0));
    mix-blend-mode: screen;
    opacity: 0.9;
    filter: blur(2px);
    pointer-events: none;
  }
  .trophy-card--loyalty { background: linear-gradient(150deg, #ecfdf3 0%, #d9f99d 50%, #fef3c7 100%); border-color: #86efac; }
  .trophy-card__top { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
  .trophy-card__eyebrow { margin: 0; font-weight: 900; color: #f59e0b; font-size: .9rem; letter-spacing: -.1px; }
  .trophy-card__title { margin: 0; font-size: 1.15rem; font-weight: 900; color: #0f172a; }
  .trophy-card__badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 14px; font-weight: 900; font-size: .9rem; color: #0f172a; background: linear-gradient(120deg, #facc15, #f97316); box-shadow: 0 12px 26px rgba(250, 204, 21, .36); }
  .trophy-card--heat .trophy-card__badge {
    background: linear-gradient(135deg, #f9df8e 0%, #f2bc55 45%, #e79d23 100%);
    color: #fff;
    text-shadow: 0 1px 6px rgba(0, 0, 0, 0.18);
    box-shadow: 0 14px 30px rgba(231, 157, 35, 0.34), inset 0 1px 0 rgba(255, 255, 255, 0.55);
  }
  .trophy-card__badge--loyal { background: linear-gradient(120deg, #22c55e, #0ea5e9); color: #f8fafc; box-shadow: 0 12px 26px rgba(14, 165, 233, .28); }
  .trophy-card__core { display: flex; align-items: center; gap: 10px; }
  .trophy-card__rank { font-size: 2.6rem; font-weight: 900; color: #0f172a; text-shadow: 0 6px 22px rgba(15, 23, 42, .12); line-height: 1; }
  .trophy-card__subtitle { font-weight: 800; color: #0f172a; font-size: 1rem; }
  .trophy-card__burst { background: rgba(16, 185, 129, .12); border: 1px dashed #16a34a; color: #15803d; padding: 8px 10px; border-radius: 12px; font-weight: 800; font-size: .93rem; box-shadow: inset 0 0 0 1px rgba(22, 163, 74, .12); }
  .trophy-card__delta { font-size: .95rem; font-weight: 800; color: #0ea5e9; display: flex; align-items: center; gap: 6px; }
  .trophy-card__meta-line { display: flex; flex-wrap: wrap; align-items: center; gap: 10px; font-size: .9rem; color: #334155; font-weight: 700; }
  .trophy-card__footer { display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 10px; color: #0f172a; font-weight: 800; font-size: .92rem; }
  .trophy-card__note { color: #0ea5e9; font-weight: 800; font-size: .9rem; }
  .xp-progress { width: 100%; background: linear-gradient(120deg, #e2e8f0, #e0f2fe); border-radius: 999px; height: 12px; overflow: hidden; box-shadow: inset 0 0 0 1px rgba(14,165,233,.18); position: relative; }
  .xp-progress__fill { height: 100%; background: linear-gradient(90deg, #22c55e, #facc15, #f97316); border-radius: 999px; width: 0; transition: width .6s ease, box-shadow .3s ease; box-shadow: 0 0 18px rgba(250, 204, 21, .48); }
  .city-ranking__footer { margin-top: 14px; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; color: #0f172a; font-weight: 700; font-size: .92rem; }
  .city-ranking__updated { color: #475569; font-weight: 600; font-size: .86rem; }
  .city-ranking__chips { display: flex; flex-wrap: wrap; gap: 8px; }
  .city-ranking__chip { background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; padding: 6px 10px; border-radius: 999px; font-weight: 800; font-size: .85rem; }
  .message-card {
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 8px 28px rgba(14,165,233,.12);
    padding: 22px 24px;
    border: 1px solid #bae6fd;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .message-card[hidden] { display: none; }
  .message-card-header { display: flex; align-items: flex-start; gap: 1rem; }
  .message-card-icon {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    background: #e0f2fe;
    color: #0284c7;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    box-shadow: inset 0 0 0 1px rgba(2,132,199,.1);
  }
  .message-card-title { margin: 0; font-weight: 800; color: #0284c7; font-size: 1.05rem; }
  .message-card-meta { margin: 0.25rem 0 0; font-size: .85rem; color: #64748b; }
  .message-card-text { margin: 0; font-size: .95rem; line-height: 1.9; color: #0f172a; }
  .error-box {
    background: #fee2e2;
    border: 1px solid #fecaca;
    color: #b91c1c;
    text-align: center;
    border-radius: 1rem;
    padding: 22px;
    font-weight: 600;
  }
  @media (max-width: 640px) {
    .performance-wrap { padding: 1rem 0.75rem; }
    .score-card { padding: 20px; }
    .message-card { padding: 18px; gap: 0.85rem; }
    .message-card-icon { width: 40px; height: 40px; font-size: 1.3rem; }
    .greeting-line { font-size: .95rem; }
    .city-ranking { padding: 18px 16px; }
    .ranking-card { min-height: unset; }
  }
</style>
<div class="performance-wrap max-w-3xl mx-auto py-6 space-y-6" id="performance-root">
  <header class="text-center space-y-2">

    <h2 class="text-2xl md:text-3xl font-extrabold text-[#10b981]">ÙˆØ¶Ø¹ÛŒØª Ø¹Ù…Ù„Ú©Ø±Ø¯ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
    <p class="greeting-line" id="performance-greeting">Ø³Ù„Ø§Ù… <span id="performance-greeting-name">ÙØ±ÙˆØ´Ù†Ø¯Ù‡</span> Ø¹Ø²ÛŒØ²!</p>
    <p class="text-gray-600 text-sm">Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù†ØªÛŒØ¬Ù‡ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ ØªÛŒÙ… Ø§Ø¯Ù…ÛŒÙ† Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØŒ Ù¾ÛŒØ§Ù… Ø§Ø®ØªØµØ§ØµÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø®ÙˆØ§Ù†ÛŒ Ùˆ Ø§Ø² ÙˆØ¶Ø¹ÛŒØª Ø§Ø¯Ø§Ù…Ù‡ Ù‡Ù…Ú©Ø§Ø±ÛŒ Ù…Ø·Ù„Ø¹ Ø¨Ø´ÛŒ.</p>
  </header>
  <div class="score-card status-neutral" id="performance-card">
    <div class="score" id="performance-score">--<span class="score-suffix">/100</span></div>
    <div class="label" id="performance-label">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ</div>
    <div class="status" id="performance-status">Ø¨Ù‡ Ù…Ø­Ø¶ Ø«Ø¨Øª Ù†Ù…Ø±Ù‡ ØªÙˆØ³Ø· ØªÛŒÙ… Ø§Ø¯Ù…ÛŒÙ†ØŒ ÙˆØ¶Ø¹ÛŒØª Ø¹Ù…Ù„Ú©Ø±Ø¯Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
    <div class="updated" id="performance-updated">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: â€”</div>
  </div>
  <section class="message-card" id="performance-message-card" hidden>
    <div class="message-card-header">
      <div class="message-card-icon" aria-hidden="true">ğŸ’¬</div>
      <div>
        <h3 class="message-card-title">Ù¾ÛŒØ§Ù… ØªÛŒÙ… Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ <span id="performance-message-name">Ø´Ù…Ø§</span></h3>
        <p class="message-card-meta" id="performance-message-updated"></p>
      </div>
    </div>
    <p class="message-card-text" id="performance-message-text"></p>
  </section>
  <section class="city-ranking" id="city-ranking" hidden>
    <div class="city-ranking__header">
      <span class="city-ranking__eyebrow">
        <i class="ri-compass-3-line" aria-hidden="true"></i>
        ÙˆÛŒØªØ±ÛŒÙ† Ø§ÙØªØ®Ø§Ø±Ø§Øª ØªÙˆ Ø¯Ø± Ø³Ù†Ù†Ø¯Ø¬
      </span>
      <h3 class="city-ranking__title">Ø¨Ø§Ø²Ø§Ø±ØŒ Ø§Ø² Ù…Ø­Ø¨ÙˆØ¨ÛŒØª Ùˆ ÙˆÙØ§Ø¯Ø§Ø±ÛŒ ØªÙˆ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯</h3>
      <p class="city-ranking__desc">Ø¯Ùˆ Ú©Ø§Ø±Øª Ø§ÙØªØ®Ø§Ø± Ú©Ù‡ Ø¨Ø§ Ø­Ø³ Ø±Ù‚Ø§Ø¨Øª Ùˆ Ø¬Ø´Ù† Ú¯Ø±ÙØªÙ† Ù…ÙˆÙÙ‚ÛŒØªâ€ŒÙ‡Ø§ØŒ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú†Ù‚Ø¯Ø± Ø¬Ù„ÙˆØªØ± Ø§Ø² Ø¨Ù‚ÛŒÙ‡ Ù‡Ø³ØªÛŒ.</p>
    </div>
    <div class="city-ranking__grid">
      <article class="trophy-card trophy-card--heat" aria-labelledby="rank-visits-title">
        <div class="trophy-card__top">
          <div>
            <p class="trophy-card__eyebrow">Ù…Ø­Ø¨ÙˆØ¨ÛŒØªØª ØªÙˆÛŒ Ø¨Ø§Ø²Ø§Ø± Ø³Ù†Ù†Ø¯Ø¬</p>
            <h4 class="trophy-card__title" id="rank-visits-title">Ø¨Ø§Ø²Ø§Ø± Ø¯Ø§Øº ØªÙˆ</h4>
          </div>
          <span class="trophy-card__badge" id="visit-percentile-badge">ğŸ”¥ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¯Ø§Øº</span>
        </div>
        <div class="trophy-card__core">
          <div class="trophy-card__rank" id="visit-rank">--</div>
          <div class="trophy-card__subtitle" id="visit-surpassed">Ù¾Ù„Ù‡ Ù…Ø­Ø¨ÙˆØ¨ÛŒØªØª Ø§ÙˆØ¬ Ú¯Ø±ÙØªÙ‡</div>
        </div>
        <div class="trophy-card__burst" id="visit-multiplier">Û±.Û°x Ù¾Ø±Ø±ÙØªâ€ŒÙˆØ¢Ù…Ø¯ØªØ± Ø§Ø² Ø¨Ø§Ø²Ø§Ø± Ø´Ù‡Ø±</div>
        <div class="trophy-card__meta-line">
          <span class="trophy-card__delta" id="visit-your">Ø¨Ø§Ø²Ø¯ÛŒØ¯ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙˆ: --</span>
          <span class="trophy-card__note" id="visit-percentile-note">Ø¯Ø± Ø¨ÛŒÙ† Û°Ùª Ø¨Ø§Ù„Ø§ÛŒÛŒ</span>
        </div>
        <div class="xp-progress" aria-hidden="true">
          <div class="xp-progress__fill" id="visit-progress"></div>
        </div>
      </article>
      <article class="trophy-card trophy-card--loyalty" aria-labelledby="rank-customers-title">
        <div class="trophy-card__top">
          <div>
            <p class="trophy-card__eyebrow">Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙˆÙØ§Ø¯Ø§Ø±ÛŒ ØªÙˆ</p>
            <h4 class="trophy-card__title" id="rank-customers-title">Ø±Ù‡Ø¨Ø±ÛŒ Ø¨Ø§Ø²Ø§Ø± Ù…Ø´ØªØ±ÛŒâ€ŒÙ‡Ø§</h4>
          </div>
          <span class="trophy-card__badge trophy-card__badge--loyal" id="customer-percentile-badge">ğŸ¤ Ø±Ù‡Ø¨Ø± Ø¬Ø§Ù…Ø¹Ù‡</span>
        </div>
        <div class="trophy-card__core">
          <div class="trophy-card__rank" id="customer-rank">--</div>
          <div class="trophy-card__subtitle" id="customer-surpassed">Ø¨Ø§Ø²Ø§Ø± Ø¯Ø± Ù…Ø´Øª ØªÙˆØ³Øª</div>
        </div>
        <div class="trophy-card__burst" id="customer-lead">+Û° Ù…Ø´ØªØ±ÛŒ Ø¬Ù„ÙˆØªØ± Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù…ÙˆÙ„ÛŒ</div>
        <div class="trophy-card__meta-line">
          <span class="trophy-card__delta" id="customer-your">Ù…Ø´ØªØ±ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ ØªÙˆ: --</span>
          <span class="trophy-card__note" id="customer-percentile-note">Ø¯Ø± Ø¨ÛŒÙ† Û°Ùª Ø¨Ø§Ù„Ø§ÛŒÛŒ</span>
        </div>
        <div class="xp-progress" aria-hidden="true">
          <div class="xp-progress__fill" id="customer-progress"></div>
        </div>
        <div class="trophy-card__footer">
          <span>Ú©Ø§ÙÛŒØ³Øª Ù‡Ù…ÛŒÙ† Ù…Ø³ÛŒØ± Ø±Ø§ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡ÛŒ.</span>
          <a href="#" class="trophy-card__note" id="customer-cta">Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡! ÛŒÚ© Ø§Ø³ØªÙˆØ±ÛŒ Ø¨Ø±Ø§ÛŒØ´Ø§Ù† Ø¨ÙØ±Ø³Øª</a>
        </div>
      </article>
    </div>
    <div class="city-ranking__footer">
      <div class="city-ranking__chips" aria-hidden="true">
        <span class="city-ranking__chip" id="city-ranking-chip-1">Ø¨Ø§Ø²Ø§Ø± Ø³Ù†Ù†Ø¯Ø¬</span>
        <span class="city-ranking__chip" id="city-ranking-chip-2">Ù†Ø±Ø® Ø±Ø´Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ</span>
        <span class="city-ranking__chip" id="city-ranking-chip-3">Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ù…Ø´ØªØ±ÛŒØ§Ù†</span>
      </div>
      <span class="city-ranking__updated" id="city-ranking-updated">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: --</span>
    </div>
  </section>
  <div class="summary-card" id="performance-summary">
    <h3>Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ ÙˆØ¶Ø¹ÛŒØª</h3>
    <p id="performance-summary-text">Ù¾Ø³ Ø§Ø² Ø«Ø¨Øª Ù†Ù…Ø±Ù‡ØŒ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ ÛŒØ§ Ø¨Ù‡Ø¨ÙˆØ¯ Ø­Ø¶ÙˆØ± Ø¯Ø± ÙˆÛŒØªØ±ÛŒÙ†Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
  </div>
</div>
<script src="performance-status.js" defer></script>
