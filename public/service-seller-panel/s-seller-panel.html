

<!DOCTYPE html>
<html lang="fa" dir="rtl" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover"
  />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#1c1c1e" />
  <meta
    name="description"
    content="پنل مدیریت فروشنده - مدیریت نوبت‌ها، مشتریان و کسب‌وکار شما"
  />
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="پنل فروشنده" />
  <title>پنل فروشنده - داشبورد مدیریت</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@200..900&display=swap"
    rel="stylesheet"
  />

  <!-- PWA / Icons -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- App Styles (both files are in the same folder) -->
  <link rel="stylesheet" href="./s-seller-panel.css" />
</head>


<body class="app-body">
  <a class="skip-link" href="#app">پرش به محتوای اصلی</a>
  <header class="app-header" role="banner">
    <div class="header-container">
      <div class="header-actions">
     <div class="notification-container">
  <button id="notification-btn" class="header-btn icon-btn" aria-label="اعلان‌ها" aria-haspopup="true" aria-expanded="false">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
    </svg>
    <span class="notification-badge" id="notification-badge"></span>
  </button>
<!-- Notification panel (replace this whole block) -->
<!-- Notification panel (replace this whole block) -->
<div id="notification-panel" class="notification-panel" role="dialog" aria-labelledby="notification-title" aria-modal="true" hidden>
  <header class="notif-header">
    <h2 id="notification-title" class="notif-title">اعلان‌ها</h2>
    <div class="notif-actions">
      <button type="button" id="notif-clear-all" class="notif-clear-all" aria-label="حذف همه اعلان‌ها">
        حذف همه
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M3 6h18v2H3V6zm2 3h14l-1.2 11.2A2 2 0 0 1 15.82 22H8.18a2 2 0 0 1-1.98-1.8L5 9zm6-6h2a2 2 0 0 1 2 2v1H9V5a2 2 0 0 1 2-2z"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- لیست اعلان‌ها -->
  <ul class="notification-list" id="notification-list" role="list" aria-live="polite"></ul>

  <!-- حالت خالی -->
  <div id="notif-empty" class="notif-empty" hidden>
    هیچ اعلانی ندارید.
  </div>

  <!-- نوار پایین: اکشن‌های سریع -->
  <footer class="notif-footer">
    <button type="button" id="notif-mark-read" class="btn-text-sm">علامت‌گذاری همه به‌عنوان خوانده‌شده</button>
  </footer>
</div>


</div>

<button id="open-reservations-btn" class="btn-secondary btn-icon-text" aria-label="نوبت‌دهی">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
       stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <rect x="3" y="4" width="18" height="18" rx="2"/>
    <path d="M16 2v4M8 2v4M3 10h18"/>
  </svg>
  <span>نوبت‌دهی</span>
</button>

        
        <button id="view-store-btn" class="btn-primary btn-icon-text" aria-label="مشاهده صفحه من">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
          <span>مشاهده صفحه من</span>
        </button>
      </div>
    </div>
  </header>
  <main id="app" class="app-main" role="main" tabindex="-1">
    <div class="app-container">
      <section id="dashboard-view" class="view-section" role="region" aria-labelledby="dashboard-title" data-page="dashboard">
        <div class="view-container">
          <header class="view-header dashboard-header">
      <div class="welcome-section">
  <h2 class="view-title" id="dashboard-title">داشبورد</h2>
  <p class="welcome-message">
    خوش آمدید، <strong id="seller-name"></strong>
    <span class="welcome-date" id="welcome-date"></span>
  </p>
  

          </header>

<!-- Preview: Hero (بالای داشبورد) -->
<section class="plan-hero card" id="plan-hero" aria-label="وضعیت پلن فروشنده" aria-hidden="true" hidden>
  <div class="plan-hero-bg" aria-hidden="true"></div>

  <div class="plan-hero-content">
    <div class="plan-hero-top">
      <span class="plan-tier-badge" id="plan-tier"></span>
    </div>

    <h3 class="plan-hero-title">پلن فعال شما</h3>
    <p class="plan-hero-message" id="plan-hero-message" role="status" aria-live="polite">
      شما اکنون مهمان ویژهٔ ویترینت هستید؛ در این بازهٔ رایگان می‌توانید بدون پرداخت هزینه، ابزارهای کلیدی فروش را تست کنید و با خیال راحت مشتریان بیشتری جذب کنید.
    </p>

    <div class="plan-hero-meta" role="list">
      <div class="meta-item" role="listitem">
        <svg class="icon-clock" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="10" />
          <path d="M12 6v6l4 2" />
        </svg>
        <span>مانده:</span><strong id="plan-days-left"></strong>
      </div>
      <div class="meta-item" role="listitem">
        <span>انقضا:</span><strong id="plan-expiry"></strong>
      </div>
      <div class="meta-item hide-on-xs" role="listitem">
        <span>وضعیت پنل:</span><strong id="plan-status-chip" class="chip"></strong>
      </div>
    </div>

    <div class="plan-hero-progress" aria-label="پیشرفت دوره">
      <div class="progress-bar" aria-hidden="true"><span id="plan-progress-bar"></span></div>
      <div class="progress-legend">
        <span>گذشته: <b id="plan-used"></b></span>
        <span>باقی‌مانده: <b id="plan-left"></b></span>
      </div>
    </div>

    <ul class="plan-hero-perks" aria-label="مزایای پلن" id="plan-hero-perks">
    </ul>

    <div class="plan-hero-actions">
      <button type="button" class="btn-renew" id="plan-renew-btn">تمدید / ارتقا</button>
    </div>
  </div>
</section>





          <div class="stats-grid" role="list">
            <article class="stat-card stat-bookings" role="listitem">
              <div class="stat-header">
                <div class="stat-icon" aria-hidden="true">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
                  </svg>
                </div>
                <div class="stat-badge">امروز</div>
              </div>
              <div class="stat-body">
                <div class="stat-value">۰</div>
                <div class="stat-label">رزرو امروز</div>
                <div class="stat-trend">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/> <polyline points="17 6 23 6 23 12"/>
                  </svg>
                  <span></span>
                </div>
              </div>
            </article>
            <article class="stat-card stat-pending" role="listitem">
              <div class="stat-header">
                <div class="stat-icon" aria-hidden="true">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
                  </svg>
                </div>
                <div class="stat-badge badge-warning">منتظر</div>
              </div>
              <div class="stat-body">
                <div class="stat-value">۰</div>
                <div class="stat-label">در انتظار تایید</div>
                <div class="stat-action">
                  <a class="btn-text-sm" href="#/bookings" aria-controls="bookings-view">مشاهده ←</a>
                </div>
              </div>
            </article>
            <article class="stat-card stat-customers" role="listitem">
              <div class="stat-header">
                <div class="stat-icon" aria-hidden="true">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/>
                  </svg>
                </div>
                <div class="stat-badge badge-success">فعال</div>
              </div>
              <div class="stat-body">
                <div class="stat-value">۰</div>
                <div class="stat-label">مشتریان فعال</div>
                <div class="stat-trend">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                     <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/> <polyline points="17 6 23 6 23 12"/>
                  </svg>
                  <span></span>
                </div>
              </div>
            </article>
            <article class="stat-card stat-rating" role="listitem">
              <div class="stat-header">
                <div class="stat-icon" aria-hidden="true">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                  </svg>
                </div>
                <div class="stat-badge badge-premium">عالی</div>
              </div>
              <div class="stat-body">
                <div class="stat-value">۰.۰</div>
                <div class="stat-label">امتیاز کلی</div>
                <div class="stat-stars"><span class="stars-filled">★★★★★</span></div>
              </div>
            </article>
            <article class="stat-card rank-card interactive" id="rank-card" role="button" tabindex="0" aria-haspopup="dialog" aria-controls="rank-modal" aria-label="مشاهده جزئیات رتبه شما">
              <div class="rank-header">
                <div class="rank-badge">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  <span id="rank-category"></span>
                </div>
                <button type="button" class="btn-icon-sm" aria-label="اطلاعات بیشتر">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                  </svg>
                </button>
              </div>
              <div class="rank-body">
                <div class="rank-position">
                  <span class="rank-label">رتبه فعلی شما</span>
                  <div class="rank-value-container">
                    <span class="rank-value" id="current-rank">۰</span>
                    <span class="rank-total">از <span id="total-sellers">۰</span></span>
                  </div>
                </div>
                <div class="rank-metrics" role="list">
                  <div class="metric-item" data-metric="customers" role="listitem">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/>
                    </svg>
                    <span class="metric-value" id="ucw30">۰</span>
                    <span class="metric-label">مشتری</span>
                  </div>
                  <div class="metric-item" data-metric="bookings" role="listitem">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
                    </svg>
                    <span class="metric-value" id="bookingsTotal">۰</span>
                    <span class="metric-label">نوبت</span>
                  </div>
                  <div class="metric-item" data-metric="rating" role="listitem">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                    </svg>
                    <span class="metric-value" id="rating30">۰</span>
                    <span class="metric-label">امتیاز</span>
                  </div>
                </div>
              </div>
            </article>
          </div>
   
        </div>
      </section>
      <section id="top-view" class="view-section" role="region" aria-labelledby="top-title" data-page="top">
        <div class="view-container">
          <header class="view-header">
            <div class="header-content">
              <h2 class="view-title" id="top-title">برترین‌ها</h2>
              <p class="view-subtitle" id="top-subtitle">رتبه‌بندی برترین فروشگاه‌های حوزه شما</p>
            </div>
            <div class="view-header-actions">
              <button type="button" class="btn-secondary btn-icon-text" id="top-refresh-btn" aria-label="بروزرسانی رتبه‌بندی">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <polyline points="23 4 23 10 17 10"/>
                  <polyline points="1 20 1 14 7 14"/>
                  <path d="M3.51 9a9 9 0 0 1 14.63-3.36L23 10"/>
                  <path d="M20.49 15a9 9 0 0 1-14.63 3.36L1 14"/>
                </svg>
                <span>بروزرسانی</span>
              </button>
            </div>
          </header>
          <div class="top-layout">
            <section class="card leaderboard-card" aria-labelledby="leaderboard-title">
              <header class="leaderboard-header">
                <div>
                  <h3 id="leaderboard-title">جدول رتبه‌بندی</h3>
                  <p class="leaderboard-caption">امتیاز ترکیبی بر اساس امتیاز مشتریان، تعداد نوبت‌ها و فعالیت</p>
                </div>
                <span class="top-updated" id="top-updated-at" aria-live="polite"></span>
              </header>
              <div class="leaderboard-body">
                <div class="leaderboard-loading" id="top-leaderboard-loading" role="status" aria-live="polite">
                  <div class="skeleton-row"></div>
                  <div class="skeleton-row"></div>
                  <div class="skeleton-row"></div>
                </div>
                <div class="leaderboard-error" id="top-error" hidden role="alert"></div>
                <div class="leaderboard-empty" id="top-leaderboard-empty" hidden>هنوز داده‌ای برای رتبه‌بندی ثبت نشده است.</div>
                <ol class="leaderboard-list" id="top-leaderboard-list" role="list" aria-live="polite"></ol>
              </div>
            </section>
            <aside class="card top-summary-card" id="top-summary-card" aria-labelledby="top-summary-title">
              <header class="top-summary-header">
                <div>
                  <h3 id="top-summary-title">عملکرد فروشگاه شما</h3>
                  <p class="top-summary-caption">مقایسه با همکاران در حوزه انتخابی</p>
                </div>
                <button type="button" class="btn-text-sm" data-route="top" id="top-view-all">مشاهده جدول کامل</button>
              </header>
              <div class="top-summary-body">
                <div class="top-rank">
                  <span class="top-rank-label">رتبه شما</span>
                  <div class="top-rank-value" aria-live="polite">
                    <span class="top-rank-current" id="top-my-rank">—</span>
                    <span class="top-rank-total">از <span id="top-total-peers">۰</span></span>
                  </div>
                </div>
                <div class="top-badges" id="top-my-badges"></div>
                <dl class="top-metrics" aria-label="شاخص‌های کلیدی">
                  <div class="metric-row">
                    <dt>امتیاز ترکیبی</dt>
                    <dd id="top-my-score">—</dd>
                  </div>
                  <div class="metric-row">
                    <dt>میانگین امتیاز</dt>
                    <dd id="top-my-rating">۰٫۰</dd>
                  </div>
                  <div class="metric-row">
                    <dt>کل نوبت‌ها</dt>
                    <dd id="top-my-bookings">۰</dd>
                  </div>
                  <div class="metric-row">
                    <dt>مشتریان فعال</dt>
                    <dd id="top-my-customers">۰</dd>
                  </div>
                </dl>
                <div class="top-summary-actions">
                  <button type="button" class="btn-secondary btn-icon-text" data-route="dashboard">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <polyline points="15 18 9 12 15 6"/>
                      <path d="M20 12H9"/>
                    </svg>
                    <span>بازگشت به داشبورد</span>
                  </button>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>
      <section id="bookings-view" class="view-section" role="region" aria-labelledby="bookings-title" data-page="bookings">
        <div class="view-container">
          <header class="view-header">
            <div class="header-content">
              <h2 class="view-title" id="bookings-title">نوبت‌ها</h2>
              <p class="view-subtitle">مدیریت رزروها و برنامه‌ریزی</p>
            </div>
          </header>
          <div class="filter-bar">
            <div class="filter-chips" role="tablist" aria-label="فیلتر نوبت‌ها">
              <button type="button" class="filter-chip active" data-filter="all" role="tab" aria-selected="true">همه <span class="chip-badge"></span></button>
              <button type="button" class="filter-chip" data-filter="pending" role="tab" aria-selected="false">در انتظار <span class="chip-badge"></span></button>
                <button type="button" class="filter-chip" data-filter="confirmed" role="tab" aria-selected="false">تایید شده <span class="chip-badge"></span></button>
                <button type="button" class="filter-chip" data-filter="completed" role="tab" aria-selected="false">انجام شده <span class="chip-badge"></span></button>
                <button type="button" class="filter-chip" data-filter="cancelled" role="tab" aria-selected="false">لغو شده <span class="chip-badge"></span></button>
            </div>
          </div>
          <div id="bookings-list" class="bookings-list" role="list">
            </div>
        </div>
      </section>
      <section id="customers-view" class="view-section" role="region" aria-labelledby="customers-title" data-page="customers">
        <div class="view-container">
          <header class="view-header">
            <div class="header-content">
              <h2 class="view-title" id="customers-title">مشتریان</h2>
              <p class="view-subtitle">مدیریت اطلاعات مشتریان</p>
            </div>
          </header>
          <div class="search-section">
            <div class="search-wrapper">
              <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
              </svg>
              <input type="search" id="customer-search" class="search-input" placeholder="جستجوی نام، شماره تماس..." aria-label="جستجو در مشتریان">
            </div>
          </div>



<!-- ✅ VIP Stats Bar (زیر سرچ / بالای لیست) -->
<section id="vip-stats" class="vip-stats-bar" role="group" aria-label="آمار مشتریان ویژه">
  <button type="button" class="vip-chip" data-target="eligible" aria-pressed="false" title="رسیده به جایزه (قابل دریافت)">
    <span class="label">واجد جایزه</span>
    <span class="count" id="vip-count-eligible">۰</span>
  </button>
  <button type="button" class="vip-chip" data-target="oneaway" aria-pressed="false" title="یک قدم تا جایزه">
    <span class="label">یک‌قدم تا جایزه</span>
    <span class="count" id="vip-count-oneaway">۰</span>
  </button>
  <button type="button" class="vip-chip" data-target="claimed" aria-pressed="false" title="جایزه گرفته‌اند">
    <span class="label">جایزه‌گرفته‌اند</span>
    <span class="count" id="vip-count-claimed">۰</span>
  </button>
</section>

<!-- ✅ پنل نام‌ها (جمع‌شونده و دسترس‌پذیر) -->
<!-- ✅ VIP: پنل نام‌ها (جمع‌شونده) -->
<section id="vip-stats-panel"
         class="vip-panel-compact"
         role="region"
         aria-labelledby="vip-panel-title"
         hidden
         tabindex="-1">

  <header class="vipc-header">
    <div class="vipc-title-wrap">
      <div class="vipc-badge" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
      <div>
        <h4 id="vip-panel-title" class="vipc-title">واجد جایزه</h4>
        <div id="vip-panel-sub" class="vipc-sub">مشتری‌هایی که به حد نصاب رسیده‌اند</div>
      </div>
    </div>

    <!-- دکمه بستن پنل -->
    <button type="button" class="vipc-close" id="vip-close-panel" aria-label="بستن">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </header>

  <div class="vipc-body">
    <div class="vipc-hint" id="vipc-hint">برای دیدن جزئیات، روی نام مشتری بزنید</div>

    <!-- لیست نام‌ها: هر آیتم یک دکمه با عرضِ متن -->
    <div id="vip-list" class="vipc-chips" role="list"><!-- با JS پر می‌شود --></div>

    <div id="vip-empty" class="vipc-empty" hidden>فعلاً اسمی اینجا نیست.</div>
  </div>
</section>

<!-- مودال جزئیات مشتری VIP -->
<div id="vip-customer-modal" class="vipc-modal" role="dialog" aria-modal="true" aria-labelledby="vipc-modal-title" hidden>
  <div class="vipc-backdrop" data-close></div>
  <div class="vipc-card" role="document">
    <button class="vipc-card-close" data-close aria-label="بستن">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>

    <div class="vipc-head">
      <div class="vipc-avatar" id="vipc-avatar">م</div>
      <div>
        <h3 id="vipc-modal-title" class="vipc-name">—</h3>
        <div class="vipc-phone" id="vipc-phone">—</div>
      </div>
    </div>

    <div class="vipc-stats">
      <div class="vipc-stat">
        <div class="vipc-stat-val" id="vipc-res-count">۰</div>
        <div class="vipc-stat-label">کل رزروها</div>
      </div>
      <div class="vipc-stat">
        <div class="vipc-stat-val" id="vipc-reward-count">۰</div>
        <div class="vipc-stat-label">تعداد جایزه</div>
      </div>
      <div class="vipc-stat">
        <div class="vipc-stat-val" id="vipc-last-date">—</div>
        <div class="vipc-stat-label">آخرین رزرو</div>
      </div>
    </div>

    <div class="vipc-actions">
      <button type="button" class="btn-primary" id="vipc-open-customer">مشاهده در مشتریان</button>
    </div>
  </div>
</div>







          <div id="customers-list" class="customers-grid" role="list"></div>
        </div>
      </section>
      <section id="reviews-view" class="view-section" role="region" aria-labelledby="reviews-title" data-page="reviews">
        <div class="view-container">
          <header class="view-header">
            <div class="header-content">
              <h2 class="view-title" id="reviews-title">نظرات و امتیازات</h2>
            </div>
          </header>
          <div class="filter-bar">
            <div class="filter-chips" role="tablist" aria-label="فیلتر امتیاز">
              <button type="button" class="filter-chip active" data-filter="all" role="tab" aria-selected="true">همه</button>
              <button type="button" class="filter-chip" data-filter="5" role="tab" aria-selected="false"><span>۵</span> <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 17.3L18.2 21l-1.6-7L22 9.2l-7.2-.6L12 2 9.2 8.6 2 9.2l5.5 4.7L5.8 21z"/></svg></button>
              <button type="button" class="filter-chip" data-filter="4" role="tab" aria-selected="false"><span>۴</span> <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 17.3L18.2 21l-1.6-7L22 9.2l-7.2-.6L12 2 9.2 8.6 2 9.2l5.5 4.7L5.8 21z"/></svg></button>
              <button type="button" class="filter-chip" data-filter="3" role="tab" aria-selected="false"><span>۳</span> <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 17.3L18.2 21l-1.6-7L22 9.2l-7.2-.6L12 2 9.2 8.6 2 9.2l5.5 4.7L5.8 21z"/></svg></button>
              <button type="button" class="filter-chip" data-filter="1" role="tab" aria-selected="false"><span>۱-۲</span> <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 17.3L18.2 21l-1.6-7L22 9.2l-7.2-.6L12 2 9.2 8.6 2 9.2l5.5 4.7L5.8 21z"/></svg></button>
            </div>
          </div>
          <div id="reviews-list" class="reviews-container" role="list"></div>
        </div>
      </section>
<section
  id="plans-view"
  class="view-section plans-disabled"
  role="region"
  aria-labelledby="plans-title"
  aria-describedby="plans-disabled-note"
  aria-disabled="true"
  data-page="plans"
>
  <div class="plan-disabled-overlay" role="status" aria-live="polite">
    <div class="plan-disabled-content">
      <div class="plan-disabled-icon" aria-hidden="true">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
          <path d="M12 9v4" />
          <path d="M12 17h.01" />
          <path
            d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </div>
      <h3 class="plan-disabled-title">پلن‌ها به‌زودی فعال می‌شوند</h3>
      <p class="plan-disabled-text" id="plans-disabled-note">
        در حال نهایی‌سازی پیشنهادهای ویژه برای فروشندگان هستیم. به‌زودی می‌توانید پلن مناسب کسب‌وکارتان را از همین بخش انتخاب کنید.
      </p>
      <p class="plan-disabled-subtext">
        برای اطلاع از زمان راه‌اندازی، اعلان‌ها و پیام‌های داخل پنل را دنبال کنید.
      </p>
    </div>
  </div>
  <div class="view-container" aria-hidden="true">
    <header class="plans-header-modern">
      <div class="plans-header-bg"></div>
      <div class="plans-header-content">
        <div class="plans-badge-top">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M9.663 17l-4.84-4.84a1.5 1.5 0 012.122-2.121l2.72 2.72 6.555-6.556a1.5 1.5 0 012.122 2.122L9.663 17z"/></svg>
          <span>بدون هزینه پنهان</span>
        </div>
        <h2 class="plans-title-modern" id="plans-title">قدرت بیشتر، فروش سریع‌تر</h2>
        <p class="plans-subtitle-modern">پلن ۳ ماهه = بیشترین رشد با کمترین هزینه</p>
      </div>
    </header>

    <!-- کارت‌ها — دیکوی: پایه، قهرمان: حرفه‌ای -->
    <div class="plans-container-modern">
      <!-- پایه (انعطاف بالا) -->
      <article class="plan-modern" data-plan="essential">
        <div class="plan-status">انعطاف بالا</div>
        <div class="plan-content-modern">
          <div class="plan-icon-modern" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
          </div>
          <h3 class="plan-title-card">پایه</h3>
          <p class="plan-desc">شروع امن برای تست بازار</p>

          <div class="plan-price-modern">
            <div class="price-main">
              <!-- data-1 = قیمت ماهانه پایه (مبنای محاسبه تخفیف‌ها) -->
              <span class="price-value" data-1="149000">۱۴۹,۰۰۰</span>
              <span class="price-currency">تومان</span>
            </div>
            <div class="price-period">برای <span class="period-value">۳ ماه</span></div>
            <div class="price-savings hidden"><span class="savings-amount"></span></div>
          </div>

          <div class="plan-features-modern">
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>۵۰ نوبت ماهانه</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>مدیریت مشتریان</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>پیامک یادآوری</span></div>
            <div class="feature-modern disabled"><svg class="feature-x" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg><span>گزارشات پیشرفته</span></div>
          </div>

          <button type="button" class="plan-cta-modern" aria-label="انتخاب پلن پایه">انتخاب پلن</button>
        </div>
      </article>

      <!-- حرفه‌ای (قهرمان/به‌صرفه‌ترین) -->
<article class="plan-modern featured" data-plan="professional">
        <div class="plan-status featured">به‌صرفه‌ترین</div>
        <div class="plan-featured-glow" aria-hidden="true"></div>
        <div class="plan-content-modern">
          <div class="plan-icon-modern" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
          </div>
          <h3 class="plan-title-card">حرفه‌ای</h3>
          <p class="plan-desc">بیشترین رشد با کمترین هزینه</p>

          <div class="plan-price-modern">
            <div class="price-main">
              <span class="price-value" data-1="299000">۲۹۹,۰۰۰</span>
              <span class="price-currency">تومان</span>
            </div>
            <div class="price-period">برای <span class="period-value">۳ ماه</span></div>
            <div class="price-savings"><span class="savings-amount"></span></div>
          </div>

          <div class="plan-features-modern">
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span><strong>نامحدود</strong> نوبت</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>یادآوری هوشمند</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>گزارشات کامل</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>رزرو آنلاین</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>پشتیبانی VIP</span></div>
          </div>

          <button type="button" class="plan-cta-modern primary" aria-label="انتخاب پلن حرفه‌ای">
            <span>انتخاب پلن</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M5 12h14m-7-7l7 7-7 7"/></svg>
          </button>
        </div>
      </article>

      <!-- سازمانی (برای تیم‌ها) -->
      <article class="plan-modern" data-plan="enterprise">
        <div class="plan-status">سازمانی</div>
        <div class="plan-content-modern">
          <div class="plan-icon-modern" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5m4 0v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
          </div>
          <h3 class="plan-title-card">سازمانی</h3>
          <p class="plan-desc">مقیاس تیمی بدون محدودیت</p>

          <div class="plan-price-modern">
            <div class="price-main">
              <span class="price-value" data-1="599000">۵۹۹,۰۰۰</span>
              <span class="price-currency">تومان</span>
            </div>
            <div class="price-period">برای <span class="period-value">۳ ماه</span></div>
            <div class="price-savings"><span class="savings-amount"></span></div>
          </div>

          <div class="plan-features-modern">
            <div class="feature-modern highlight"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span><strong>همه امکانات</strong></span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>۱۰ کاربر همزمان</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>مدیریت شعب</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>دسترسی API</span></div>
            <div class="feature-modern"><svg class="feature-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>پشتیبانی ۲۴/۷</span></div>
          </div>

          <button type="button" class="plan-cta-modern" aria-label="انتخاب پلن سازمانی">انتخاب پلن</button>
        </div>
      </article>
    </div>

    <!-- سوشال‌پروف -->
    <p class="plans-social-proof" aria-live="polite" id="plans-social-proof"></p>

    <!-- نوار پرداخت چسبان (CTA واحد) -->
    <div id="checkout-bar" class="checkout-bar" role="region" aria-label="خلاصه پرداخت" aria-hidden="true">

       <button type="button" class="cb-close" aria-label="بستن خلاصه پرداخت">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
    </svg>
  </button>





      <div class="checkout-content">
        <div class="cb-left">
          <strong class="cb-plan">حرفه‌ای</strong>
          <span class="cb-dot">•</span>
          <span class="cb-duration">۳ ماهه</span>
          <div class="cb-saving"></div>
        </div>
        <div class="cb-right">
          <div class="cb-total">—</div>
          <button type="button" class="btn-primary cb-cta" aria-label="ادامه و پرداخت">ادامه و پرداخت</button>
        </div>
      </div>
      <div class="checkout-subline">
        <button type="button" class="cb-coupon-toggle" aria-expanded="false">کد تخفیف دارید؟</button>
        <div class="cb-coupon" hidden>
          <label for="coupon-input" class="sr-only">کد تخفیف</label>
          <input id="coupon-input" class="cb-input" placeholder="کد را وارد کنید" inputmode="text">
          <button type="button" class="btn-secondary cb-apply">اعمال</button>
        </div>
        <div class="cb-trust">
          ۷ روز بازگشت وجه • لغو هر زمان • پرداخت امن • <span class="muted">هزینه پیامک جداگانه محاسبه می‌شود</span>
        </div>
      </div>
    </div>
  </div>
</section>


      <section id="settings-view" class="view-section" role="region" aria-labelledby="settings-title" data-page="settings">
        <div class="view-container">
          <header class="view-header">
            <h2 class="view-title" id="settings-title">تنظیمات</h2>
          </header>
<form id="settings-form" class="settings-list">
  <div class="settings-group">
    <h3 class="settings-group-title">اطلاعات کسب‌وکار</h3>
<div class="form-group">
  <label for="business-name" class="form-label">نام کسب‌وکار</label>
  <input type="text" id="business-name" class="form-control" value="">
</div>
    <div class="form-group">
      <label for="business-category" class="form-label">دسته بندی</label>
      <select id="business-category" class="form-select" disabled>
        <option value="barbershop" selected>آرایشگاه مردانه</option>
        <option value="salon">سالن زیبایی زنانه</option>
        <option value="clinic">کلینیک زیبایی</option>
      </select>
      <div class="help">دسته‌بندی توسط پشتیبانی تعیین می‌شود</div>
    </div>
<div class="form-group">
  <label for="business-phone" class="form-label">شماره تلفن</label>
  <input type="tel" id="business-phone" class="form-control" inputmode="tel" value="">
</div>
  <div class="form-group">
    <label for="business-address" class="form-label">آدرس</label>
    <input type="text" id="business-address" class="form-control" value="">
  </div>
  </div>

  <div class="settings-group working-hours-group">
    <h3 class="settings-group-title">ساعت کاری</h3>
    <div class="form-row">
      <div class="form-group">
        <label for="work-start" class="form-label">شروع کار</label>
        <input type="time" id="work-start" class="form-control">
      </div>
      <div class="form-group">
        <label for="work-end" class="form-label">پایان کار</label>
        <input type="time" id="work-end" class="form-control">
      </div>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn-primary">ذخیره ساعت کاری</button>
    </div>
  </div>

  <!-- === NEW: مشتریان ویژه (VIP Customers) — polished === -->
<div class="settings-group vip-settings-group">
  <div class="view-header" style="margin-bottom: var(--space-1);">
    <h3 class="settings-group-title" style="margin: 0; border-bottom: none; display:flex; align-items:center; gap:.5rem;">
      <span class="vip-star" aria-hidden="true">★</span>
      <span>مشتریان ویژه</span>
    </h3>
    <div class="header-actions">
      <button type="button" id="vip-toggle-btn" class="btn-danger">
        <span>غیرفعال کردن جایزه</span>
      </button>
      <button type="button" id="vip-settings-btn" class="btn-primary" aria-haspopup="dialog" aria-controls="vip-modal">
        <span>تنظیمات</span>
      </button>
    </div>
  </div>
</div>

  <!-- === END VIP === -->

  <!-- === NEW: خدمات من (My Services) === -->
  <div class="settings-group">
    <div class="view-header" style="margin-bottom: var(--space-3);">
      <h3 class="settings-group-title" style="margin-bottom: 0; border-bottom: none;">خدمات من</h3>
      <div class="header-actions">
        <button type="button" id="add-service-btn" class="btn-primary" aria-haspopup="dialog" aria-controls="service-drawer">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          <span>افزودن خدمت</span>
        </button>
      </div>
    </div>
    <div id="services-list" class="item-grid" role="list">
      <!-- Services will be rendered here by JS -->
    </div>
  </div>

  <!-- === NEW: نمونه‌کارها (Portfolio) === -->
  <div class="settings-group">
    <div class="view-header" style="margin-bottom: var(--space-3);">
      <h3 class="settings-group-title" style="margin-bottom: 0; border-bottom: none;">نمونه‌کارها</h3>
      <div class="header-actions">
        <button type="button" id="add-portfolio-btn" class="btn-primary" aria-haspopup="dialog" aria-controls="portfolio-drawer">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <path d="M21 15l-5-5L5 21"></path>
          </svg>
          <span>افزودن نمونه‌کار</span>
        </button>
      </div>
    </div>
    <div id="portfolio-list" class="item-grid" role="list">
      <!-- Portfolio items will be rendered here by JS -->
    </div>
  </div>

  <!-- === تصویر فوتر فروشگاه === -->
  <div class="settings-group image-settings-group">
    <h3 class="settings-group-title">تصویر فوتر</h3>

    <div class="image-field" id="field-footer">
      <div>
        <div class="field-title">تصویر فوتر (نمای دور فروشگاه)</div>
        <div class="help">پیشنهاد: افقی و عریض؛ نمای بیرونی مغازه/تابلو (نسبت 21:9 یا 16:9)</div>
      </div>
      <div class="preview"><img id="footer-preview" alt="پیش‌نمایش تصویر فوتر"></div>
      <div class="actions">
        <button type="button" class="btn-secondary" id="footer-pick-btn">انتخاب از گالری/دوربین</button>
        <button type="button" class="btn-secondary" id="footer-remove-btn">حذف تصویر</button>
      </div>
      <input type="file" accept="image/*" capture="environment" id="footer-file" hidden>
    </div>
  </div>
</form>

        </div>
      </section>
    </div>
  </main>
  <nav class="app-nav" role="navigation" aria-label="منوی اصلی">
    <a href="#/dashboard" class="nav-item active" data-page="dashboard" aria-current="page">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      <span class="nav-label">داشبورد</span>
    </a>
    <a href="#/bookings" class="nav-item" data-page="bookings">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
      <span class="nav-label">نوبت‌ها</span>
    </a>
    <a href="#/customers" class="nav-item" data-page="customers">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      <span class="nav-label">مشتریان</span>
    </a>
    <a href="#/top" class="nav-item" data-page="top">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M8 21h8l-1-4h-6l-1 4z"/>
        <path d="M7 5V3h10v2"/>
        <path d="M5 5h14v5a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4V5z"/>
      </svg>
      <span class="nav-label">برترین‌ها</span>
    </a>
    <a href="#/reviews" class="nav-item" data-page="reviews">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
      <span class="nav-label">نظرات</span>
    </a>
    <a href="#/plans" class="nav-item" data-page="plans" aria-hidden="true" hidden>
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5"/><path d="M22 17a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"/><path d="m14 17 2 2 4-4"/></svg>
        <span class="nav-label">پلن‌ها</span>
    </a>
    <a href="#/settings" class="nav-item" data-page="settings">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
      <span class="nav-label">تنظیمات</span>
    </a>



    
  </nav>
  <div id="rank-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="rank-modal-title" hidden>
    <div class="modal-backdrop" data-dismiss="modal"></div>
    <div class="modal-content card" role="document">
        <div class="modal-header">
            <h3 id="rank-modal-title" class="modal-title">جزئیات رتبه‌بندی</h3>
            <button type="button" class="btn-icon modal-close-btn" data-dismiss="modal" aria-label="بستن">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <div class="modal-body">
            <p>رتبه شما بر اساس ترکیبی از تعداد مشتریان جدید، تعداد کل نوبت‌ها، و میانگین امتیازات شما در ۳۰ روز گذشته محاسبه می‌شود. فعال بودن و دریافت نظرات مثبت به بهبود رتبه شما کمک می‌کند.</p>
            <p id="rank-modal-current"></p>
        </div>
    </div>
  </div>
<div id="vip-modal" class="modal vip-modal" role="dialog" aria-modal="true" aria-labelledby="vip-modal-title" hidden>
    <div class="modal-backdrop" data-dismiss="modal"></div>
  <div class="modal-content card" role="document">
      <div class="modal-header">
          <h3 id="vip-modal-title" class="modal-title">تنظیمات مشتریان ویژه</h3>
            <button type="button" class="btn-icon modal-close-btn" data-dismiss="modal" aria-label="بستن">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
      <form id="vip-form" class="modal-body">
            <div class="form-group">
                <label for="vip-required" class="form-label">تعداد رزرو لازم برای جایزه</label>
                <input type="number" id="vip-required" class="form-control" min="1">
            </div>
            <div class="form-group">
                <label for="vip-reward" class="form-label">نام جایزه</label>
                <input type="text" id="vip-reward" class="form-control">
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">ذخیره</button>
            </div>
        </form>
    </div>
  </div>


<div id="resv-modal" class="modal resv-modal" role="dialog" aria-modal="true" aria-labelledby="resv-title" hidden>
  <div class="modal-backdrop" data-dismiss="modal"></div>
  <div class="modal-content card resv-card" role="document">
<div class="modal-header resv-header">
  <div class="resv-title-wrap">
    <h3 id="resv-title" class="modal-title">نوبت‌دهی</h3>

    <!-- راهنما -->
    <div class="resv-help" role="note" aria-live="polite">
      <span class="resv-help-icon" aria-hidden="true">ℹ️</span>
      راهنما: برای حذف یک ساعت، دوبار روی آن کلیک/تاچ کنید. (ساعت‌های رزرو‌شده قابل حذف نیستند)
    </div>

    <div id="resv-today" class="resv-today">—</div>
  </div>

  <button type="button" class="btn-icon modal-close-btn" data-dismiss="modal" aria-label="بستن">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>
</div>


    <div class="resv-body">
      <!-- هفتهٔ فارسی -->
      <div id="resv-week" class="resv-week" role="tablist" aria-label="انتخاب روز هفته">
        <button type="button" class="resv-day-chip" data-day="6">شنبه</button>
        <button type="button" class="resv-day-chip" data-day="0">یکشنبه</button>
        <button type="button" class="resv-day-chip" data-day="1">دوشنبه</button>
        <button type="button" class="resv-day-chip" data-day="2">سه‌شنبه</button>
        <button type="button" class="resv-day-chip" data-day="3">چهارشنبه</button>
        <button type="button" class="resv-day-chip" data-day="4">پنجشنبه</button>
        <button type="button" class="resv-day-chip" data-day="5">جمعه</button>
      </div>

      <!-- تاریخ هدف آن روز به شمسی -->
      <div id="resv-date-hint" class="resv-date-hint">—</div>


      <!-- Legend: وضعیت هر ساعت -->
<div class="resv-legend" id="resv-legend">
  <span class="legend-chip st-booked">رزرو شده</span>
  <span class="legend-chip st-pending">در انتظار تایید</span>
  <span class="legend-chip st-cancelled">لغو شده</span>
</div>


      <!-- افزودن ساعت -->
      <div class="resv-add">
        <label class="sr-only" for="resv-time-input">ساعت</label>
        <input id="resv-time-input" type="time" inputmode="numeric" step="300"
               pattern="^([01]\\d|2[0-3]):([0-5]\\d)$" dir="ltr" placeholder="HH:MM" />
        <button id="resv-add-btn" type="button" class="btn-primary btn-sm">افزودن</button>
      </div>

      <!-- لیست ساعات ثبت‌شده -->
      <div id="resv-times" class="resv-times" role="list"></div>


      

      <!-- اکشن‌ها -->
      <div class="resv-actions">
 
        <button id="resv-save" type="button" class="btn-primary">ذخیره</button>
      </div>

      

      <!-- شیت کپی -->

    </div>
  </div>
</div>

<div id="vip-toggle-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="vip-toggle-title" hidden>
  <div class="modal-backdrop" data-dismiss="modal"></div>
  <div class="modal-content card" role="document">
    <div class="modal-header">
      <h3 id="vip-toggle-title" class="modal-title">تایید</h3>
      <button type="button" class="btn-icon modal-close-btn" data-dismiss="modal" aria-label="بستن">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>
    <div class="modal-body">
      <p id="vip-toggle-message">آیا از غیر فعال کردن بخش جایزه دادن مطمئن هستید؟</p>
    </div>
    <div class="modal-actions">
      <button type="button" class="btn-secondary" data-dismiss="modal">انصراف</button>
      <button type="button" id="vip-toggle-confirm" class="btn-danger">بله، غیر فعال کن</button>
    </div>
  </div>
</div>


  <div id="customer-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="customer-drawer-title" hidden>
    <div class="drawer-backdrop" data-dismiss="drawer"></div>
    <div class="drawer-content" role="document">
        <div class="drawer-header">
            <h3 id="customer-drawer-title" class="drawer-title">افزودن مشتری جدید</h3>
            <button type="button" class="btn-icon drawer-close-btn" data-dismiss="drawer" aria-label="بستن">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <form id="add-customer-form" class="drawer-body">
            <div class="form-group">
                <label for="customer-name" class="form-label">نام و نام خانوادگی</label>
                <input type="text" id="customer-name" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="customer-phone" class="form-label">شماره تماس</label>
                <input type="tel" id="customer-phone" class="form-control" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">افزودن</button>
            </div>
        </form>
    </div>
  </div>


<!-- Customer Details Modal - Add this after #customer-drawer -->
<div id="customer-details-modal" class="modal customer-modal" role="dialog" aria-modal="true" aria-labelledby="customer-modal-title" hidden>
  <div class="modal-backdrop" data-dismiss="modal"></div>
  <div class="modal-content customer-modal-content" role="document">
    <button type="button" class="modal-close-floating" data-dismiss="modal" aria-label="بستن">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>

    <div class="customer-modal-header">
      <div class="customer-avatar-large"><span id="customer-modal-avatar">م</span></div>
      <div class="customer-header-info">
        <h2 id="customer-modal-name" class="customer-modal-name">نام مشتری</h2>
        <div class="customer-modal-phone" id="customer-modal-phone">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72"/>
          </svg>
          <span>۰۹۱۲۳۴۵۶۷۸۹</span>
        </div>
      </div>
    </div>

    <!-- آمار مشتری (سه کارت داخل گرید) -->
    <div class="customer-modal-stats" role="list">
      <div class="stat-item-modal" role="listitem">
        <div class="stat-icon-modal reservations" aria-hidden="true">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
          </svg>
        </div>
        <div class="stat-info-modal">
          <div class="stat-value-modal" id="customer-total-reservations">۰</div>
          <div class="stat-label-modal">کل رزروها</div>
        </div>
      </div>

      <div class="stat-item-modal" role="listitem">
        <div class="stat-icon-modal completed">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
          </svg>
        </div>
        <div class="stat-info-modal">
          <div class="stat-value-modal" id="customer-completed-reservations">۰</div>
          <div class="stat-label-modal">انجام شده</div>
        </div>
      </div>

      <div class="stat-item-modal" role="listitem">
        <div class="stat-icon-modal cancel">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M15 9l-6 6M9 9l6 6"/>
          </svg>
        </div>
        <div class="stat-info-modal">
          <div class="stat-value-modal" id="customer-cancel-count">۰</div>
          <div class="stat-label-modal">دفعات لغو</div>
        </div>
      </div>
    </div>

    <div class="customer-modal-section">
      <h3 class="section-title-modal">آخرین رزرو</h3>
      <div class="last-reservation-card" id="last-reservation">
        <div class="reservation-date">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
          </svg>
          <span id="last-reservation-date">—</span>
        </div>
        <div class="reservation-service">
          <span class="service-name" id="last-reservation-service">—</span>
          <span class="service-time" id="last-reservation-time">—</span>
        </div>
        <div class="reservation-status">
          <span class="status-badge status-completed" id="last-reservation-status">—</span>
          <div class="pending-actions" id="last-reservation-actions" hidden>
            <button type="button" class="btn-danger btn-icon-text" id="cancel-reservation-btn">لغو رزرو</button>
            <button type="button" class="btn-success btn-icon-text" id="confirm-reservation-btn">تایید رزرو</button>
          </div>
        </div>
      </div>
    </div>

    <!-- تنظیمات این مشتری (سوئیچ‌ها) -->
    <div class="customer-modal-section" id="customer-prefs">
      <h3 class="section-title-modal">تنظیمات این مشتری</h3>

      <div class="item-card">
        <div class="item-card-header">
          <h4 class="item-title">تایید خودکار نوبت‌ها</h4>
          <label class="toggle-switch">
            <input type="checkbox" id="toggle-auto-accept" class="toggle-switch-input">
            <span class="toggle-switch-slider"></span>
          </label>
        </div>
        <p class="item-details">با روشن‌کردن، همه نوبت‌های این مشتری بدون تایید دستی، خودکار تایید می‌شوند.</p>
      </div>

      <div class="item-card" style="border-color: var(--c-danger);">
        <div class="item-card-header">
          <h4 class="item-title">مسدودسازی</h4>
          <label class="toggle-switch" style="--c-success: var(--c-danger);">
            <input type="checkbox" id="toggle-blocked" class="toggle-switch-input">
            <span class="toggle-switch-slider"></span>
          </label>
        </div>
        <p class="item-details">با روشن‌کردن، این مشتری دیگر نمی‌تواند نوبت رزرو کند.</p>
      </div>
    </div>

    <div class="modal-actions">
      <button type="button" class="btn-primary modal-close-btn-bottom" data-dismiss="modal">بستن</button>
    </div>

  </div>
</div>

    

  <!-- === NEW: Service Management Drawer === -->
  <div id="service-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="service-drawer-title" hidden>
    <div class="drawer-backdrop" data-dismiss="drawer"></div>
    <div class="drawer-content" role="document">
        <div class="drawer-header">
            <h3 id="service-drawer-title" class="drawer-title">افزودن خدمت جدید</h3>
            <button type="button" class="btn-icon drawer-close-btn" data-dismiss="drawer" aria-label="بستن">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <form id="service-form" class="drawer-body">
            <input type="hidden" id="service-id">
            <div class="form-group">
                <label for="service-title" class="form-label">عنوان خدمت</label>
                <input type="text" id="service-title" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="service-price" class="form-label">قیمت (تومان)</label>
                <input type="number" id="service-price" class="form-control" min="0" required>
            </div>
            <div class="form-group">
                <label class="form-label">تصویر خدمت</label>
                <div class="image-field" id="service-image-field">
                    <div class="actions">
                        <button type="button" class="btn-secondary" id="service-image-btn">انتخاب از گالری/دوربین</button>
                    </div>
                    <input type="file" accept="image/*" capture="environment" id="service-image" hidden>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">ذخیره</button>
            </div>
        </form>
    </div>
  </div>
  <!-- === NEW: Portfolio Management Drawer === -->
  <div id="portfolio-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="portfolio-drawer-title" hidden>
    <div class="drawer-backdrop" data-dismiss="drawer"></div>
    <div class="drawer-content" role="document">
        <div class="drawer-header">
            <h3 id="portfolio-drawer-title" class="drawer-title">افزودن نمونه‌کار جدید</h3>
            <button type="button" class="btn-icon drawer-close-btn" data-dismiss="drawer" aria-label="بستن">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <form id="portfolio-form" class="drawer-body">
            <input type="hidden" id="portfolio-id">
            <div class="form-group">
                <label for="portfolio-title" class="form-label">عنوان</label>
                <input type="text" id="portfolio-title" class="form-control" required>
            </div>
            <div class="form-group">
                <label class="form-label">تصویر نمونه‌کار</label>
                <div class="image-field" id="portfolio-image-field">
                    <div class="actions">
                        <button type="button" class="btn-secondary" id="portfolio-image-btn">انتخاب از گالری/دوربین</button>
                    </div>
                    <input type="file" accept="image/*" id="portfolio-image" hidden>
                </div>
            </div>
            <div class="form-group">
                <label for="portfolio-description" class="form-label">توضیح کوتاه</label>
                <textarea id="portfolio-description" class="form-control" rows="3"></textarea>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">ذخیره</button>
            </div>
        </form>
    </div>
  </div>

  <div
    id="new-booking-modal"
    class="modal booking-alert-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="new-booking-title"
    hidden
  >
    <div class="modal-backdrop" data-dismiss="modal" aria-hidden="true"></div>
    <div class="modal-content card" role="document">
      <div class="modal-header booking-alert-header">
        <div class="booking-alert-icon" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2"></path>
            <path d="M7 10V6a5 5 0 0 1 10 0v4"></path>
            <path d="M5 15h14l1 5H4l1-5Z"></path>
            <path d="M10 21a2 2 0 0 0 4 0"></path>
          </svg>
        </div>
        <h3 id="new-booking-title" class="modal-title">نوبت جدید ثبت شد</h3>
      </div>
      <div class="modal-body booking-alert-body">
        <p class="booking-alert-lead">
          یک مشتری جدید درخواست نوبت داده است. جزئیات زیر را بررسی کنید و در صورت نیاز به سرعت پاسخ دهید.
        </p>
        <div class="booking-alert-details" role="group" aria-labelledby="new-booking-title">
          <div class="detail-row">
            <span class="detail-label">مشتری</span>
            <span class="detail-value" data-customer-name>—</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">خدمت</span>
            <span class="detail-value" data-service-name>—</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">تاریخ</span>
            <span class="detail-value" data-booking-date>—</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">ساعت</span>
            <span class="detail-value" data-booking-time>—</span>
          </div>
        </div>
        <div class="booking-alert-extra" data-extra-count hidden></div>
      </div>
      <div class="modal-actions booking-alert-actions">
        <button type="button" class="btn-secondary" data-dismiss="modal">بعداً بررسی می‌کنم</button>
        <button type="button" class="btn-primary" data-view-bookings>مشاهده نوبت‌ها</button>
      </div>
    </div>
  </div>

  <div id="toast-root" aria-live="assertive" aria-atomic="true"></div>


  <!-- Removed explicit API base configuration to prevent CORS issues -->
  <!-- <script>window.__API_BASE__ = 'http://localhost:5000';</script> -->
  <script src="./s-seller-panel.js" defer></script>
</body>
</html>

