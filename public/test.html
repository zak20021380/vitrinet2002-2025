<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>آرایشگاه مردانه سلطنتی - Vitreenet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            font-family: 'Vazirmatn', sans-serif;
        }
        .glassmorphism {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .service-card {
            scroll-snap-align: start;
        }
        .review-card {
            scroll-snap-align: start;
        }
        .scroll-container {
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        .bounce-animation {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        .progress-animation {
            animation: progress 2s ease-out;
        }
        @keyframes progress {
            0% {
                width: 0%;
            }
        }
        .premium-icon {
            transition: all 0.3s ease;
        }
        .premium-icon:hover {
            filter: drop-shadow(0 0 6px #3B82F6);
            transform: scale(1.1);
        }
        .badge-minimal {
            font-size: 0.65rem;
            padding: 0.15rem 0.5rem;
            border-radius: 9999px;
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;
        }
        .scrollbar-hide {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        /* Header Animations */
        .logo-animation {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .logo-animation:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.6));
        }
        .header-item {
            transition: all 0.2s ease;
        }
        .header-item:hover {
            transform: translateY(-2px);
        }
        .status-chip {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }
            70% {
                box-shadow: 0 0 0 6px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .mobile-menu.active {
            max-height: 500px;
        }
        /* Service Card Styles */
        .service-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .service-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: #1e40af;
        }
        .service-currency {
            font-size: 0.9rem;
            font-weight: 500;
            color: #64748b;
        }
        .service-button {
            background: linear-gradient(135deg, #06b6d4, #3b82f6, #10b981);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .service-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            transition: left 0.5s ease;
        }
        .service-button:hover::before {
            left: 100%;
        }
        .service-button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(6, 182, 212, 0.3);
        }
        .service-button:active {
            transform: translateY(0) scale(0.98);
        }
        .cta-button {
            background: linear-gradient(135deg, #06b6d4, #3b82f6, #10b981);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            transition: left 0.5s ease;
        }
        .cta-button:hover::before {
            left: 100%;
        }
        .cta-button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(6, 182, 212, 0.3);
        }
        .cta-button:active {
            transform: translateY(0) scale(0.98);
        }
        
        /* Portfolio Section Styles */
        .portfolio-section {
            padding: 3rem 1rem;
            background: linear-gradient(to bottom, #f9fafb, #ffffff);
        }
        .portfolio-title {
            text-align: center;
            font-size: 1.875rem;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 0.5rem;
            position: relative;
            display: inline-block;
            width: 100%;
        }
        .portfolio-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            border-radius: 4px;
            margin: 0.75rem auto 0;
        }
        .portfolio-subtitle {
            text-align: center;
            color: #64748b;
            font-size: 1.125rem;
            margin-bottom: 2.5rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        .portfolio-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .portfolio-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }
        .portfolio-img-container {
            position: relative;
            overflow: hidden;
            border-radius: 1rem 1rem 0 0;
            height: 220px;
        }
        .portfolio-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .portfolio-card:hover .portfolio-img {
            transform: scale(1.05);
        }
        .portfolio-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .portfolio-name {
            font-weight: 700;
            font-size: 1.25rem;
            color: #1e293b;
            margin-bottom: 0.75rem;
        }
        .portfolio-description {
            color: #64748b;
            font-size: 0.9375rem;
            line-height: 1.6;
            flex-grow: 1;
            margin-bottom: 1.5rem;
        }
        .portfolio-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        .portfolio-stat {
            display: flex;
            align-items: center;
            color: #64748b;
            font-size: 0.875rem;
        }
        .portfolio-stat i {
            margin-left: 0.25rem;
        }
        .portfolio-btn {
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            width: fit-content;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
            margin-top: auto;
        }
        .portfolio-btn:hover {
            background: linear-gradient(135deg, #2563eb, #0891b2);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
        }
        .portfolio-btn:active {
            transform: translateY(0);
        }
        
        /* Modal Styles */
        #imageModal {
            transition: all 0.3s ease;
        }
        #imageModal .relative {
            transition: all 0.3s ease;
            transform: scale(0.95);
            opacity: 0;
        }
        #imageModal .scale-100 {
            transform: scale(1);
        }
        #imageModal .opacity-100 {
            opacity: 1;
        }
        #imageModal .scale-95 {
            transform: scale(0.95);
        }
        #imageModal .opacity-0 {
            opacity: 0;
        }
        
        /* Line clamp for description text */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* mobile nav */
        @media (max-width: 768px) {
            .hide-on-mobile { display: none !important; }
        }
        ::-webkit-scrollbar {width: 7px;}
        ::-webkit-scrollbar-thumb {background: #c8f7e6;}
        @media (max-width: 640px) {
            body { padding-bottom: 72px; }
            footer:not(.mobile-nav) { display: none; }
            .mobile-nav {
                display: flex !important;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                height: 72px;
                background: rgba(255,255,255,0.96);
                backdrop-filter: blur(12px);
                border-top: 1px solid rgba(224,242,254,0.8);
                border-radius: 24px 24px 0 0;
                box-shadow: 0 -5px 25px rgba(0,0,0,0.08);
                z-index: 100;
                padding: 8px 0;
            }
            .nav-item {
                flex: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: #94a3b8;
                transition: all 0.2s;
                border-radius: 12px;
                padding: 6px 0;
            }
            .nav-item.active {
                color: #10b981;
                transform: translateY(-4px);
            }
            .nav-item:active { transform: scale(0.92); }
            .nav-icon {
                width: 24px;
                height: 24px;
                margin-bottom: 4px;
            }
            .nav-label {
                font-size: 11px;
                font-weight: 800;
            }
        }
        
/* --- Chips & Dialog (new) --- */
.chip {
  height: 36px;
  padding: 0 12px;
  border-radius: 9999px;
  font-weight: 800;
  font-size: 12px;
  background: rgba(255,255,255,0.82);
  color: #374151; /* gray-700 */
  border: 1px solid rgba(255,255,255,0.6);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 4px 14px rgba(59,130,246,0.08);
  transition: all .2s ease;
  display: inline-flex; align-items: center; gap: 6px;
}
.chip:hover { background: #fff; box-shadow: 0 8px 22px rgba(59,130,246,0.14); }
.chip:active { transform: scale(0.98); }

.chip--primary {
  color: #fff;
  background: linear-gradient(135deg,#3B82F6,#06B6D4);
  border: none;
  box-shadow: 0 6px 20px rgba(59,130,246,0.28);
}
.chip--primary:hover { filter: brightness(0.98); }

.dialog-card-enter { transform: scale(0.96); opacity: 0; }
.dialog-card-show  { transform: scale(1);    opacity: 1; transition: all .18s ease; }

        
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Sticky Header -->
    <!-- header desktop redesign start -->
<header id="main-header" class="sticky top-0 z-[90] isolate bg-white md:bg-white/50 md:backdrop-blur-md shadow-sm transition-all duration-300">
  <!-- ========== Mobile Header ========== -->
  <div id="mobile-header" class="md:hidden px-3">
    <div id="mobile-top" class="flex items-center justify-between h-14 py-3">
      <!-- Brand (right on RTL) -->
      <a href="/index.html" class="text-blue-600 font-extrabold text-lg tracking-tight">
        ویترینت
      </a>

      <!-- Title (center) -->
      <h1
        class="flex-1 mx-2 text-center text-[15px] font-extrabold text-gray-900 truncate"
        title="آرایشگاه مردانه سلطنتی"
      >
        آرایشگاه مردانه سلطنتی
      </h1>

      <!-- Actions (left): Report + Address -->
      <div class="flex items-center gap-2">
        <button
          id="mobile-report-trigger"
          data-open="reportModal"
          aria-label="گزارش مشکل"
          class="h-9 px-3 rounded-full text-blue-700 bg-white/80 backdrop-blur-md border border-white/60 shadow-sm hover:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs font-bold transition-all"
        >
          گزارش
        </button>
        <button
          id="mobile-address-chip"
          data-open="addressModal"
          role="button"
          aria-label="نمایش آدرس"
          class="h-9 px-3 rounded-full text-gray-800 bg-white/90 backdrop-blur-md border border-white/60 shadow-sm hover:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs font-bold flex items-center gap-1 transition-all"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          آدرس
        </button>
      </div>
    </div>

    <!-- keep stub for compatibility -->
    <div id="mobile-chips" class="hidden h-0 overflow-hidden"></div>
  </div>

  <!-- ========== Desktop Header Bar ========== -->
  <div class="hidden md:block">
    <div class="max-w-screen-xl mx-auto px-3 py-3">
      <div class="flex items-center justify-between gap-3 flex-nowrap">
        <!-- Brand -->
        <div class="flex items-center gap-2 flex-shrink-0 md:w-40">
          <a href="/index.html" class="flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-10 h-10 text-blue-600 md:hidden">
              <path fill="currentColor" d="M12 2L2 7l10 5l10-5l-10-5m0 2.53L19.22 7L12 10.47L4.78 7L12 4.53M2 17v3.5a1.5 1.5 0 0 0 1.5 1.5h17a1.5 1.5 0 0 0 1.5-1.5V17l-10-5l-10 5m0 2h14v2H5v-2z"/>
            </svg>
            <span class="hidden md:inline-block text-xl font-extrabold tracking-wide text-blue-600 transition-transform hover:scale-105 hover:drop-shadow-[0_0_6px_rgba(37,99,235,0.6)]">ویترینت</span>
          </a>
        </div>

        <!-- Identity Cluster (md only, centered text + chips) -->
        <div class="flex-1 flex flex-col items-center lg:hidden">
          <h1 class="text-lg font-black text-gray-900 text-center truncate md:hidden">آرایشگاه مردانه سلطنتی</h1>
          <div class="hidden md:flex lg:hidden items-center text-sm">
            <h1 class="font-extrabold text-gray-900 truncate max-w-[200px]">آرایشگاه مردانه سلطنتی</h1>
            <span class="mx-2 text-gray-400">•</span>
            <!-- unified trigger attribute -->
            <button
              id="desktop-address-chip"
              data-open="addressModal"
              class="flex items-center gap-1 bg-white/80 backdrop-blur-md border border-white/60 px-3 py-1 rounded-full text-gray-800 transition hover:bg-white hover:shadow focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              آدرس
            </button>
            <span class="mx-2 text-gray-400">•</span>
            <span class="flex items-center gap-1 bg-white/80 backdrop-blur-md border border-white/60 px-3 py-1 rounded-full text-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2L9.19 8.63L2 9.24l5.46 4.73L5.82 21z"/>
              </svg>
              <span class="font-bold">4.8</span>
              <span class="text-gray-500">(128)</span>
            </span>
          </div>
        </div>

        <!-- Mobile Address & Rating (xs) -->
        <div class="flex items-center gap-3 flex-shrink-0 text-[10px] sm:text-xs md:hidden">
          <div class="flex items-center gap-1 text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span class="truncate max-w-[80px] sm:max-w-[120px]">تهران، ولیعصر</span>
          </div>
          <div class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2L9.19 8.63L2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
            <span class="font-bold">4.8</span>
            <span class="text-gray-500">(128)</span>
          </div>
        </div>

        <div class="hidden md:block lg:hidden md:w-40"></div>

        <!-- Desktop Center Cluster (lg) -->
        <div class="hidden lg:flex flex-1 items-center justify-center text-sm whitespace-nowrap">
          <h1 class="font-extrabold text-gray-900 truncate max-w-[220px]" title="آرایشگاه مردانه سلطنتی">آرایشگاه مردانه سلطنتی</h1>
          <span class="mx-2 text-gray-400">·</span>
          <button
            id="address-trigger"
            data-open="addressModal"
            class="flex items-center gap-1 bg-white/80 backdrop-blur-md border border-white/60 px-3 py-1 rounded-full text-gray-800 hover:bg-white hover:shadow transition focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            آدرس
          </button>
          <span class="mx-2 text-gray-400">·</span>
          <span class="flex items-center gap-1 bg-white/80 backdrop-blur-md border border-white/60 px-3 py-1 rounded-full text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2L9.19 8.63L2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
            <span class="font-bold">4.8</span>
            <span class="text-gray-500">(128)</span>
          </span>
          <span class="mx-2 text-gray-400">·</span>
          <button
            id="report-trigger"
            data-open="reportModal"
            class="flex items-center gap-1 bg-white/80 backdrop-blur-md border border-white/60 px-3 py-1 rounded-full text-blue-700 hover:bg-white hover:shadow transition focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold"
          >
            گزارش
          </button>
        </div>

        <div class="hidden lg:block lg:w-40"></div>
      </div>
    </div>
  </div>
</header>




<!-- Address Modal (simple & clean) -->
<div id="addressModal" role="dialog" aria-modal="true" aria-labelledby="address-title"
     class="hidden fixed inset-0 z-[80] items-center justify-center">
  <!-- backdrop -->
  <div class="absolute inset-0 bg-black/50 backdrop-blur-[2px]" data-close></div>

  <!-- card -->
  <div class="modal-card relative w-[92%] max-w-sm bg-white rounded-2xl shadow-xl p-5
              transform transition duration-150 scale-95 opacity-0">
    <!-- close -->
    <button type="button" data-close
            class="absolute top-2 left-2 text-gray-500 hover:text-gray-700 text-xl leading-none">
      &times;
    </button>

    <!-- title -->
    <div class="flex items-center gap-2 mb-3">
      <span class="inline-flex w-9 h-9 items-center justify-center rounded-xl
                   bg-gradient-to-tr from-blue-600 to-teal-500 text-white">
        <!-- pin icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
      </span>
      <h2 id="address-title" class="text-base font-extrabold text-gray-900">آدرس</h2>
    </div>

    <!-- content -->
    <div class="space-y-3 text-[13px] sm:text-sm leading-7 text-gray-700">
      <div class="flex items-start gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mt-1 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        <p id="full-address">تهران، خیابان ولیعصر، کوچه فرهنگ، پلاک ۱۲</p>
      </div>

      <div class="flex items-center gap-2 text-gray-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-emerald-600" viewBox="0 0 24 24" fill="currentColor">
          <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.11.37 2.3.57 3.58.57a1 1 0 011 1V20a1 1 0 01-1 1C10.07 21 3 13.93 3 5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.28.2 2.47.57 3.58a1 1 0 01-.24 1.01l-2.21 2.2z"/>
        </svg>
        <a href="tel:02188776655" class="font-bold tracking-wide">۰۲۱-۸۸۷۷۶۶۵۵</a>
      </div>
    </div>

    <!-- actions -->
    <div class="mt-5 text-left">
      <button type="button" data-close
              class="px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold">
        بستن
      </button>
    </div>
  </div>
</div>


<div id="reportModal" role="dialog" aria-modal="true" aria-labelledby="report-title"
     class="hidden fixed inset-0 z-[80] items-center justify-center">
  <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" data-close></div>
  <div class="modal-card relative bg-white/80 backdrop-blur-xl border border-white/60 rounded-2xl shadow-lg p-6 w-11/12 max-w-md transform transition duration-150 scale-95 opacity-0">
    <h2 id="report-title" class="mb-4 text-lg font-bold bg-gradient-to-r from-blue-500/20 to-teal-400/20 p-2 rounded-xl text-center">گزارش مشکل</h2>
    <form id="report-form" class="space-y-4">
      <div>
        <textarea id="report-text" maxlength="500" class="w-full min-h-[6rem] p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm resize-none" placeholder="مشکل یا سوءاستفاده را توضیح دهید…"></textarea>
        <div id="report-counter" class="text-xs text-gray-500 text-left mt-1">۰/۵۰۰</div>
      </div>
      <input id="report-contact" type="text" class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm" placeholder="اطلاعات تماس (اختیاری)">
      <div class="flex justify-end gap-3">
        <button type="button" data-close class="px-4 py-2 rounded-full bg-white/80 hover:bg-white hover:shadow transition focus:outline-none focus:ring-2 focus:ring-blue-500">انصراف</button>
        <button type="submit" class="px-4 py-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition focus:outline-none focus:ring-2 focus:ring-blue-500">ارسال گزارش</button>
      </div>
    </form>
  </div>
</div>

<!-- Toast should be above modals -->
<div id="headerToast" class="fixed top-4 left-1/2 -translate-x-1/2 z-[100] bg-blue-600 text-white text-sm px-4 py-2 rounded-full shadow-lg opacity-0 transition-opacity pointer-events-none"></div>


<script>
function showToastDark(message, {type='success', durationMs=2600} = {}) {
  const icons = {
    success: 'fas fa-check',
    info: 'fas fa-info-circle',
    error: 'fas fa-exclamation-circle'
  };
  const existing = document.getElementById('dark-toast');
  if (existing) existing.remove();
  const toast = document.createElement('div');
  toast.id = 'dark-toast';
  toast.setAttribute('role', 'status');
  toast.setAttribute('aria-live', 'polite');
  toast.setAttribute('aria-atomic', 'true');
  toast.dir = 'ltr';
  toast.className = 'fixed left-1/2 -translate-x-1/2 bottom-[max(16px,env(safe-area-inset-bottom))] z-[160] bg-black text-white rounded-xl px-4 py-3 shadow-lg ring-1 ring-white/20 flex items-center gap-3 opacity-0 translate-y-2 transition-all duration-200 max-w-[92vw] sm:max-w-md';
  const icon = document.createElement('i');
  icon.className = icons[type] || icons.info;
  const msg = document.createElement('span');
  msg.textContent = message;
  msg.className = 'flex-1';
  msg.dir = 'rtl';
  const closeBtn = document.createElement('button');
  closeBtn.type = 'button';
  closeBtn.textContent = '×';
  closeBtn.className = 'text-xl leading-none';
  toast.append(icon, msg, closeBtn);
  document.body.appendChild(toast);
  requestAnimationFrame(() => {
    toast.classList.remove('opacity-0', 'translate-y-2');
  });
  function removeToast() {
    toast.classList.add('opacity-0', 'translate-y-2');
    setTimeout(() => toast.remove(), 200);
    document.removeEventListener('keydown', onKey);
  }
  function onKey(e) {
    if (e.key === 'Escape') removeToast();
  }
  document.addEventListener('keydown', onKey);
  toast.addEventListener('click', removeToast);
  closeBtn.addEventListener('click', (e) => { e.stopPropagation(); removeToast(); });
  setTimeout(removeToast, durationMs);
}
</script>


<script>
(() => {
  // ====== Sticky header + toast ======
  const header = document.getElementById('main-header');
  const toast  = document.getElementById('headerToast');

  function showToast(msg) {
    if (!toast) return;
    toast.textContent = msg;
    toast.classList.remove('opacity-0');
    toast.classList.add('opacity-100');
    setTimeout(() => {
      toast.classList.add('opacity-0');
      toast.classList.remove('opacity-100');
    }, 2500);
  }

  // Header shadow on scroll
  window.addEventListener('scroll', () => {
    if (!header) return;
    if (window.scrollY > 10) {
      header.classList.add('shadow-lg');
    } else {
      header.classList.remove('shadow-lg');
    }
  });

  // Mobile top compact/expand
  const mobileTop   = document.getElementById('mobile-top');
  const mobileChips = document.getElementById('mobile-chips');
  let lastY = window.scrollY;
  window.addEventListener('scroll', () => {
    if (!mobileTop || !mobileChips) return;
    if (window.innerWidth > 768) return;
    if (window.scrollY > lastY && window.scrollY > 20) {
      mobileTop.classList.remove('py-3');
      mobileTop.classList.add('py-2');
      mobileChips.classList.add('hidden');
    } else {
      mobileTop.classList.add('py-3');
      mobileTop.classList.remove('py-2');
      mobileChips.classList.remove('hidden');
    }
    lastY = window.scrollY;
  });

  // ====== Unified modal system (for both mobile & desktop) ======
  const modalCache = new Map();

  function setupModal(modal) {
    const card = modal.querySelector('.modal-card');
    const closeEls = modal.querySelectorAll('[data-close]');
    let lastFocused = null;
    let prevOverflow = '';

    const focusableSelector = 'button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])';

    function open() {
      lastFocused = document.activeElement;
      prevOverflow = document.body.style.overflow || '';
      document.body.style.overflow = 'hidden';

      modal.classList.remove('hidden');
      modal.classList.add('flex'); // اگه کلاس flex تو HTML نباشه، اینجا تضمین می‌کنیم
      requestAnimationFrame(() => {
        card.classList.remove('scale-95','opacity-0');
        card.classList.add('scale-100','opacity-100');
        const firstFocusable = card.querySelector(focusableSelector);
        if (firstFocusable) firstFocusable.focus();
      });

      document.addEventListener('keydown', trap);
    }

    function close() {
      card.classList.add('scale-95','opacity-0');
      card.classList.remove('scale-100','opacity-100');

      setTimeout(() => {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.removeEventListener('keydown', trap);
        document.body.style.overflow = prevOverflow;
        if (lastFocused) lastFocused.focus();
      }, 180);
    }

    function trap(e) {
      if (e.key === 'Escape') return close();
      if (e.key !== 'Tab') return;
      const f = card.querySelectorAll(focusableSelector);
      if (!f.length) return;
      const first = f[0], last = f[f.length - 1];
      if (e.shiftKey && document.activeElement === first) {
        e.preventDefault(); last.focus();
      } else if (!e.shiftKey && document.activeElement === last) {
        e.preventDefault(); first.focus();
      }
    }

    // Close via elements with data-close
    closeEls.forEach(el => el.addEventListener('click', close));
    // Close when clicking outside the card
    modal.addEventListener('click', (e) => {
      if (!card.contains(e.target)) close();
    });

    return { open, close };
  }

  function bindTriggers() {
    document.querySelectorAll('[data-open]').forEach(btn => {
      const id = btn.getAttribute('data-open');
      const modal = document.getElementById(id);
      if (!modal) return;
      if (!modalCache.has(id)) modalCache.set(id, setupModal(modal));
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        modalCache.get(id).open();
      });
    });
  }
  bindTriggers();

  // ====== Address copy ======
  const addressCopyBtn = document.getElementById('address-copy-btn');
  const fullAddressEl  = document.getElementById('full-address');
  if (addressCopyBtn && fullAddressEl) {
    addressCopyBtn.addEventListener('click', () => {
      const txt = (fullAddressEl.textContent || '').trim();
      if (!txt) return;
      navigator.clipboard.writeText(txt).then(() => showToastDark('آدرس کپی شد', {type:'success'}));
    });
  }

  // ====== Report form + counter ======
  const reportModal   = document.getElementById('reportModal');
  const reportForm    = document.getElementById('report-form');
  const reportText    = document.getElementById('report-text');
  const reportCounter = document.getElementById('report-counter');

  if (reportText && reportCounter) {
    const updateCounter = () => {
      const len = reportText.value.length;
      reportCounter.textContent = `${len.toLocaleString('fa-IR')}/۵۰۰`;
    };
    reportText.addEventListener('input', updateCounter);
    updateCounter();
  }

  if (reportForm && reportModal) {
    const inst = modalCache.get('reportModal') || setupModal(reportModal);
    modalCache.set('reportModal', inst);
    reportForm.addEventListener('submit', (e) => {
      e.preventDefault();
      inst.close();
      showToastDark('گزارش شما ثبت شد', {type:'success'});
      reportForm.reset();
      if (reportCounter) reportCounter.textContent = '۰/۵۰۰';
    });
  }
})();
</script>


    <!-- Hero Section -->
    <section class="relative h-80 overflow-hidden">
<div class="absolute inset-0 z-0 bg-cover bg-center"
     style="background-image: url('https://picsum.photos/seed/barbershop/1200/800.jpg');">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
        </div>
        <div class="absolute inset-0 flex flex-col justify-end pb-8 px-6 text-white md:flex md:items-center md:justify-center md:pb-0">
            <div class="md:text-center md:max-w-md">
                <div class="flex items-center mb-2 md:justify-center">
                    <span class="bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded-full ml-2">ویژه</span>
                    <div class="flex items-center">
                        <i class="fas fa-star text-yellow-400 ml-1"></i>
                        <span>4.8</span>
                        <span class="text-sm text-gray-300 mr-1">(128)</span>
                    </div>
                </div>

<!-- VIP Customers badge (hero) -->
<div class="mt-2 flex items-center md:justify-center">
  <!-- گرادیان دور قاب -->
  <span class="inline-flex rounded-full p-[1.5px]
               bg-gradient-to-r from-amber-400/80 via-pink-500/40 to-emerald-400/80
               shadow-[0_8px_22px_rgba(0,0,0,.12)]">
    <!-- هسته‌ی شیشه‌ای -->
    <span id="vip-badge" data-count="32"
          class="relative inline-flex items-center gap-2 px-3 py-1.5 rounded-full
                 bg-white/10 backdrop-blur-md ring-1 ring-white/25 text-white
                 text-[11px] sm:text-xs md:text-sm font-extrabold select-none">
      <!-- آیکن مینیمال -->
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
           viewBox="0 0 24 24" class="w-[14px] h-[14px] opacity-95">
        <path fill="currentColor"
              d="M3.6 7.8l4.2 3.2 3.5-4.7 3.6 4.7 4.2-3.2.5 8.2a2 2 0 0 1-2 2H5.1a2 2 0 0 1-2-2l.5-8.2Z"/>
        <path fill="currentColor" d="M5 18h14v2H5z" opacity=".35"/>
      </svg>

      <span class="leading-none">مشتریان ویژه</span>

      <!-- جداکننده‌ی باریک -->
      <span aria-hidden="true" class="mx-1.5 h-3 w-px bg-white/35"></span>

      <!-- تعداد (روی موبایل هم نمایش داده می‌شود) -->
      <span id="vip-count"
            class="leading-none inline-flex items-center px-1.5 py-0.5 rounded-md
                   bg-white/10 ring-1 ring-white/20">
        ۳۲ نفر
      </span>

      <!-- هایلایت لطیف روی قاب -->
      <span class="pointer-events-none absolute inset-0 rounded-full opacity-25
                   [background:radial-gradient(120%_120%_at_85%_0%,rgba(255,255,255,.45),transparent_60%)]"></span>
    </span>
  </span>
</div>





                <h2 class="text-2xl font-bold mb-1 md:text-3xl">آرایشگاه مردانه سلطنتی</h2>
                <p class="text-sm mb-4 md:mb-6">تجربه‌ای لوکس از آرایش و اصلاح مردانه</p>
<button id="hero-cta" class="cta-button text-white font-bold py-3 px-6 rounded-full transition-all transform md:bounce-animation md:py-3 md:px-8 md:text-lg">
                    رزرو نوبت
                </button>
            </div>
        </div>
    </section>
    <!-- Services Section -->
    <section class="py-8 px-4">
        <h3 class="text-xl font-bold mb-4">خدمات ما</h3>
        <div class="scroll-container flex overflow-x-auto pb-4 space-x-4 space-x-reverse">
            <!-- Service Card 1 -->
            <div class="service-card flex-shrink-0 w-72 bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                <img src="https://picsum.photos/seed/barber-cutting-hair/400/300.jpg" alt="اصلاح سر و صورت" class="service-image">
                <div class="p-5 flex flex-col flex-grow">
                    <h4 class="font-bold text-lg mb-2">اصلاح سر و صورت</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">اصلاح حرفه‌ای سر و صورت با جدیدترین متدهای روز</p>
                    <div class="flex justify-between items-center mt-auto">
                        <div>
                            <span class="service-price">۱۵۰,۰۰۰</span>
                            <span class="service-currency mr-1">تومان</span>
                        </div>
                        <button class="service-button text-white font-bold py-2 px-5 rounded-full text-sm transition-all" data-service="اصلاح سر و صورت" data-price="150000">
                            رزرو
                        </button>
                    </div>
                </div>
            </div>
            <!-- Service Card 2 -->
            <div class="service-card flex-shrink-0 w-72 bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                <img src="https://picsum.photos/seed/facial-massage/400/300.jpg" alt="ماساژ صورت" class="service-image">
                <div class="p-5 flex flex-col flex-grow">
                    <h4 class="font-bold text-lg mb-2">ماساژ صورت</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">ماساژ صورت با روغن‌های گیاهی و مراقبت از پوست</p>
                    <div class="flex justify-between items-center mt-auto">
                        <div>
                            <span class="service-price">۱۲۰,۰۰۰</span>
                            <span class="service-currency mr-1">تومان</span>
                        </div>
                        <button class="service-button text-white font-bold py-2 px-5 rounded-full text-sm transition-all" data-service="ماساژ صورت" data-price="120000">
                            رزرو
                        </button>
                    </div>
                </div>
            </div>
            <!-- Service Card 3 -->
            <div class="service-card flex-shrink-0 w-72 bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                <img src="https://picsum.photos/seed/hair-coloring/400/300.jpg" alt="رنگ مو" class="service-image">
                <div class="p-5 flex flex-col flex-grow">
                    <h4 class="font-bold text-lg mb-2">رنگ مو</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">رنگ موی حرفه‌ای با بهترین برندهای روز دنیا</p>
                    <div class="flex justify-between items-center mt-auto">
                        <div>
                            <span class="service-price">۲۰۰,۰۰۰</span>
                            <span class="service-currency mr-1">تومان</span>
                        </div>
                        <button class="service-button text-white font-bold py-2 px-5 rounded-full text-sm transition-all" data-service="رنگ مو" data-price="200000">
                            رزرو
                        </button>
                    </div>
                </div>
            </div>
            <!-- Service Card 4 -->
            <div class="service-card flex-shrink-0 w-72 bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                <img src="https://picsum.photos/seed/professional-hair-wash/400/300.jpg" alt="شستشوی حرفه‌ای" class="service-image">
                <div class="p-5 flex flex-col flex-grow">
                    <h4 class="font-bold text-lg mb-2">شستشوی حرفه‌ای</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">شستشوی حرفه‌ای مو با شامپوهای مخصوص</p>
                    <div class="flex justify-between items-center mt-auto">
                        <div>
                            <span class="service-price">۸۰,۰۰۰</span>
                            <span class="service-currency mr-1">تومان</span>
                        </div>
                        <button class="service-button text-white font-bold py-2 px-5 rounded-full text-sm transition-all" data-service="شستشوی حرفه‌ای" data-price="80000">
                            رزرو
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Portfolio Section - Updated -->
    <section class="portfolio-section">
        <div class="container mx-auto px-4">
            <div class="text-center mb-10">
                <h2 class="portfolio-title text-3xl font-bold mb-3">نمونه کارها</h2>
            </div>
            
            <!-- Mobile Horizontal Scroll Container -->
            <div class="md:hidden overflow-x-auto pb-6 -mx-4 px-4 scroll-container">
                <div class="flex space-x-4 space-x-reverse w-max">
                    <!-- Portfolio Cards for Mobile -->
                    <!-- Card 1 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/haircut1/600/400" alt="مدل موی کلاسیک" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل موی کلاسیک</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">اصلاح مو به سبک کلاسیک با جزئیات دقیق و خطوط تمیز</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">1.2k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">48</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/haircut1/1200/800', 'مدل موی کلاسیک')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 2 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/beard1/600/400" alt="اصلاح ریش مدرن" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">اصلاح ریش مدرن</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">طراحی و اصلاح ریش با جدیدترین متدهای روز دنیا</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">980</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">64</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/beard1/1200/800', 'اصلاح ریش مدرن')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 3 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/color1/600/400" alt="رنگ موی طبیعی" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">رنگ موی طبیعی</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">رنگ موی طبیعی و درخشان با مواد اولیه مرغوب</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">1.5k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">92</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/color1/1200/800', 'رنگ موی طبیعی')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 4 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/modern1/600/400" alt="مدل موی مدرن" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل موی مدرن</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک مدرن با تکنیک‌های روز دنیا</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">2.1k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">124</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/modern1/1200/800', 'مدل موی مدرن')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 5 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/fade1/600/400" alt="مدل فید" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل فید</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">اصلاح مو به سبک فید با گریدینگ حرفه‌ای</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">1.8k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">105</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/fade1/1200/800', 'مدل فید')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 6 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/undercut1/600/400" alt="مدل آندرکات" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل آندرکات</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک آندرکات با کنتراست بالا</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">1.4k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">87</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/undercut1/1200/800', 'مدل آندرکات')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 7 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/pompadour1/600/400" alt="مدل پومپادور" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل پومپادور</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک کلاسیک پومپادور با حجم بالا</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">960</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">72</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/pompadour1/1200/800', 'مدل پومپادور')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Card 8 -->
                    <div class="portfolio-card w-72 bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/slick1/600/400" alt="مدل اسلایک بک" class="w-full h-56 object-cover">
                        </div>
                        <div class="p-5 flex flex-col h-full">
                            <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل اسلایک بک</h3>
                            <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک اسلایک بک با ظاهری مرتب</p>
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-eye ml-1"></i>
                                        <span class="text-sm">1.3k</span>
                                    </div>
                                    <div class="flex items-center text-gray-500">
                                        <i class="far fa-heart ml-1"></i>
                                        <span class="text-sm">95</span>
                                    </div>
                                </div>
                            </div>
                            <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/slick1/1200/800', 'مدل اسلایک بک')">
                                مشاهده دقیق‌تر
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Desktop Grid Layout -->
            <div class="hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Portfolio Card 1 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/haircut1/600/400" alt="مدل موی کلاسیک" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل موی کلاسیک</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">اصلاح مو به سبک کلاسیک با جزئیات دقیق و خطوط تمیز</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">1.2k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">48</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/haircut1/1200/800', 'مدل موی کلاسیک')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 2 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/beard1/600/400" alt="اصلاح ریش مدرن" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">اصلاح ریش مدرن</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">طراحی و اصلاح ریش با جدیدترین متدهای روز دنیا</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">980</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">64</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/beard1/1200/800', 'اصلاح ریش مدرن')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 3 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/color1/600/400" alt="رنگ موی طبیعی" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">رنگ موی طبیعی</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">رنگ موی طبیعی و درخشان با مواد اولیه مرغوب</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">1.5k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">92</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/color1/1200/800', 'رنگ موی طبیعی')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 4 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/modern1/600/400" alt="مدل موی مدرن" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل موی مدرن</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک مدرن با تکنیک‌های روز دنیا</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">2.1k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">124</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/modern1/1200/800', 'مدل موی مدرن')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 5 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/fade1/600/400" alt="مدل فید" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل فید</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">اصلاح مو به سبک فید با گریدینگ حرفه‌ای</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">1.8k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">105</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/fade1/1200/800', 'مدل فید')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 6 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/undercut1/600/400" alt="مدل آندرکات" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل آندرکات</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک آندرکات با کنتراست بالا</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">1.4k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">87</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/undercut1/1200/800', 'مدل آندرکات')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 7 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/pompadour1/600/400" alt="مدل پومپادور" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل پومپادور</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک کلاسیک پومپادور با حجم بالا</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">960</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">72</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/pompadour1/1200/800', 'مدل پومپادور')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Card 8 -->
                <div class="portfolio-card bg-white rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/slick1/600/400" alt="مدل اسلایک بک" class="w-full h-56 object-cover">
                    </div>
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="portfolio-name font-bold text-lg mb-2 truncate">مدل اسلایک بک</h3>
                        <p class="portfolio-description text-gray-600 text-sm mb-4 line-clamp-2">آرایش مو به سبک اسلایک بک با ظاهری مرتب</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-eye ml-1"></i>
                                    <span class="text-sm">1.3k</span>
                                </div>
                                <div class="flex items-center text-gray-500">
                                    <i class="far fa-heart ml-1"></i>
                                    <span class="text-sm">95</span>
                                </div>
                            </div>
                        </div>
                        <button class="portfolio-btn w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-md" onclick="openModal('https://picsum.photos/seed/slick1/1200/800', 'مدل اسلایک بک')">
                            مشاهده دقیق‌تر
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Modal for Fullscreen Image View -->
    <div id="imageModal" class="fixed inset-0 bg-black/90 z-50 hidden flex items-center justify-center p-4">
        <div class="relative max-w-5xl w-full max-h-[90vh] flex flex-col">
            <button onclick="closeModal()" class="absolute -top-12 right-0 text-white text-2xl z-10 hover:text-gray-300 transition-colors">
                <i class="fas fa-times"></i>
            </button>
            <div class="bg-white rounded-2xl overflow-hidden shadow-2xl flex-grow flex flex-col">
                <div class="p-4 border-b">
                    <h3 id="modalTitle" class="text-xl font-bold text-gray-800"></h3>
                </div>
                <div class="flex-grow flex items-center justify-center p-2 bg-gray-100">
                    <img id="modalImage" src="" alt="" class="max-w-full max-h-[60vh] object-contain rounded-lg">
                </div>
                <div class="p-4 border-t flex justify-between items-center">
                    <div class="flex items-center space-x-4 space-x-reverse">
                        <div class="flex items-center text-gray-600">
                            <i class="far fa-eye ml-1"></i>
                            <span id="modalViews" class="text-sm">1.2k</span>
                        </div>
                        <div class="flex items-center text-gray-600">
                            <i class="far fa-heart ml-1"></i>
                            <span id="modalLikes" class="text-sm">48</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Booking Wizard -->
    <section id="booking-wizard" class="hidden py-8 px-4">
        <div class="bg-white rounded-xl shadow-md p-6">
            <h3 class="text-xl font-bold mb-6">نوبت‌گیری</h3>
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm text-gray-600">مرحله <span id="current-step">1</span> از 4</span>
                    <div class="flex space-x-1 space-x-reverse">
                        <div class="w-3 h-3 rounded-full bg-blue-600"></div>
                        <div id="step-2-indicator" class="w-3 h-3 rounded-full bg-gray-300"></div>
                        <div id="step-3-indicator" class="w-3 h-3 rounded-full bg-gray-300"></div>
                        <div id="step-4-indicator" class="w-3 h-3 rounded-full bg-gray-300"></div>
                    </div>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-blue-600 h-2 rounded-full progress-animation" style="width: 25%"></div>
                </div>
            </div>
            <!-- Step 1: Select Service -->
            <div id="step-1" class="step">
                <h4 class="font-bold mb-4">انتخاب خدمت</h4>
                <div class="space-y-3">
                    <div class="service-option border border-gray-300 rounded-lg p-3 hover:border-blue-500 cursor-pointer" data-service="اصلاح سر و صورت" data-price="150000">
                        <div class="flex justify-between items-center">
                            <div>
                                <h5 class="font-bold">اصلاح سر و صورت</h5>
                                <p class="text-sm text-gray-600">اصلاح حرفه‌ای سر و صورت</p>
                            </div>
                            <span class="font-bold">۱۵۰٬۰۰۰ تومان</span>
                        </div>
                    </div>
                    <div class="service-option border border-gray-300 rounded-lg p-3 hover:border-blue-500 cursor-pointer" data-service="ماساژ صورت" data-price="120000">
                        <div class="flex justify-between items-center">
                            <div>
                                <h5 class="font-bold">ماساژ صورت</h5>
                                <p class="text-sm text-gray-600">ماساژ صورت با روغن‌های گیاهی</p>
                            </div>
                            <span class="font-bold">۱۲۰,۰۰۰ تومان</span>
                        </div>
                    </div>
                    <div class="service-option border border-gray-300 rounded-lg p-3 hover:border-blue-500 cursor-pointer" data-service="رنگ مو" data-price="200000">
                        <div class="flex justify-between items-center">
                            <div>
                                <h5 class="font-bold">رنگ مو</h5>
                                <p class="text-sm text-gray-600">رنگ موی حرفه‌ای</p>
                            </div>
                            <span class="font-bold">۲۰۰٬۰۰۰ تومان</span>
                        </div>
                    </div>
                    <div class="service-option border border-gray-300 rounded-lg p-3 hover:border-blue-500 cursor-pointer" data-service="شستشوی حرفه‌ای" data-price="80000">
                        <div class="flex justify-between items-center">
                            <div>
                                <h5 class="font-bold">شستشوی حرفه‌ای</h5>
                                <p class="text-sm text-gray-600">شستشوی حرفه‌ای مو</p>
                            </div>
                            <span class="font-bold">۸۰٬۰۰۰ تومان</span>
                        </div>
                    </div>
                </div>
                <button id="next-to-step-2" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full w-full transition-all disabled:bg-gray-400" disabled>
                    ادامه
                </button>
            </div>
            <!-- Step 2: Select Date and Time -->
            <div id="step-2" class="step hidden">
                <h4 class="font-bold mb-4">انتخاب روز و ساعت</h4>
                <div class="mb-6">
                    <h5 class="font-medium mb-2">روز</h5>
                    <div class="grid grid-cols-3 gap-2">
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">شنبه</div>
                            <div class="font-bold">۱۴ تیر</div>
                        </div>
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">یکشنبه</div>
                            <div class="font-bold">۱۵ تیر</div>
                        </div>
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">دوشنبه</div>
                            <div class="font-bold">۱۶ تیر</div>
                        </div>
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">سه‌شنبه</div>
                            <div class="font-bold">۱۷ تیر</div>
                        </div>
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">چهارشنبه</div>
                            <div class="font-bold">۱۸ تیر</div>
                        </div>
                        <div class="date-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            <div class="text-sm">پنج‌شنبه</div>
                            <div class="font-bold">۱۹ تیر</div>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <h5 class="font-medium mb-2">ساعت</h5>
                    <div class="grid grid-cols-3 gap-2">
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۰:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۱:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۲:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۴:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۵:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۶:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۷:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۸:۰۰
                        </div>
                        <div class="time-option border border-gray-300 rounded-lg p-2 text-center cursor-pointer hover:border-blue-500">
                            ۱۹:۰۰
                        </div>
                    </div>
                </div>
                <div class="flex space-x-3 space-x-reverse">
                    <button id="back-to-step-1" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-full transition-all">
                        بازگشت
                    </button>
                    <button id="next-to-step-3" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-all disabled:bg-gray-400" disabled>
                        ادامه
                    </button>
                </div>
            </div>
            <!-- Step 3: Enter Phone Number -->
            <div id="step-3" class="step hidden">
                <h4 class="font-bold mb-4">اطلاعات تماس</h4>
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2" for="phone-number">شماره موبایل</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                            <span class="text-gray-500">+۹۸</span>
                        </div>
                        <input type="tel" id="phone-number" class="w-full border border-gray-300 rounded-lg py-3 pr-12 pl-3 text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="۰۹۱۲۳۴۵۶۷۸۹" maxlength="11" pattern="0[0-9]{10}" inputmode="numeric">
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2" for="customer-name">نام و نام خانوادگی</label>
                    <input type="text" id="customer-name" class="w-full border border-gray-300 rounded-lg py-3 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="نام و نام خانوادگی">
                </div>
                <div class="flex space-x-3 space-x-reverse">
                    <button id="back-to-step-2" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-full transition-all">
                        بازگشت
                    </button>
                    <button id="next-to-step-4" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-all disabled:bg-gray-400" disabled>
                        ادامه
                    </button>
                </div>
            </div>
            <!-- Step 4: Confirmation -->
            <div id="step-4" class="step hidden">
                <h4 class="font-bold mb-4">تایید نوبت</h4>
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <div class="grid grid-cols-2 gap-y-2 text-right">
                        <div class="text-gray-600">خدمت:</div>
                        <div id="confirm-service" class="font-bold text-right"></div>
                        <div class="text-gray-600">تاریخ:</div>
                        <div id="confirm-date" class="font-bold text-right"></div>
                        <div class="text-gray-600">ساعت:</div>
                        <div id="confirm-time" class="font-bold text-right"></div>
                        <div class="text-gray-600">نام:</div>
                        <div id="confirm-name" class="font-bold text-right"></div>
                        <div class="text-gray-600">شماره تماس:</div>
                        <div id="confirm-phone" class="font-bold text-right"></div>
                        <div class="text-gray-600 mt-4 pt-4 border-t border-gray-200">مبلغ کل:</div>
                        <div id="confirm-price" class="font-bold text-lg text-right mt-4 pt-4 border-t border-gray-200"></div>
                    </div>
                </div>
                <div class="flex space-x-3 space-x-reverse">
                    <button id="back-to-step-3" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-full transition-all">
                        بازگشت
                    </button>
                    <button id="confirm-booking" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-all">
                        تایید نهایی
                    </button>
                </div>
            </div>
            <!-- Success Message -->
            <div id="booking-success" class="hidden text-center py-8">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-green-600 text-2xl"></i>
                </div>
                <h4 class="text-xl font-bold mb-2">نوبت شما با موفقیت ثبت شد</h4>
                <p class="text-gray-600 mb-6">کد پیگیری شما: <span class="font-bold">#12345</span></p>
                <p class="text-gray-600 mb-6">جزئیات نوبت به شماره موبایل شما ارسال خواهد شد.</p>
                <button id="close-booking" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition-all">
                    بستن
                </button>
            </div>
        </div>
    </section>
    <!-- Customer Reviews -->


<!-- Loyalty Rewards Card Component -->

<!-- ============ Loyalty Rewards (Vitreenet) ============ -->
<section id="loyalty-card" class="w-full py-8 px-4 sm:px-5" dir="rtl">
  <!-- پیکربندی -->
  <div id="lr-data"
       data-current="3"
       data-target="10"
       data-reward="یک اصلاح رایگان"
       data-booking-url=""
       data-login-url="/login"
       data-rules="هر نوبت باید کامل انجام شود.
حداکثر ۲ جایزه در ماه قابل دریافت است.
جایزه قابل‌انتقال نیست."></div>

  <div class="mx-auto relative max-w-[680px] md:max-w-[720px]">
    <!-- پس‌زمینه گرادیان ساده -->
    <div class="absolute inset-0 -z-10 rounded-3xl bg-gradient-to-r from-purple-500/10 via-pink-500/10 to-blue-500/10 blur-2xl"></div>

    <!-- قاب با گرادیان -->
    <div class="group relative rounded-3xl p-[2px] bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 transition-shadow duration-300 hover:shadow-xl">
      
      <!-- MEMBER CLUB badge -->
      <div class="absolute -top-3 right-4 z-20 select-none">
        <span class="inline-flex rounded-full p-[1.5px] bg-gradient-to-r from-purple-500 to-pink-500 shadow-md">
          <span dir="ltr"
                class="relative inline-flex items-center rounded-full
                       px-4 py-1.5 text-[10px] sm:text-[11px]
                       font-extrabold uppercase tracking-[0.18em]
                       text-white bg-gradient-to-r from-purple-600 to-pink-600">
            <span class="relative z-10">VIP MEMBER</span>
          </span>
        </span>
      </div>

      <!-- کارت اصلی -->
      <div class="rounded-3xl bg-white/95 backdrop-blur-sm p-6 sm:p-7 pt-14 shadow-lg relative overflow-hidden">

        <!-- عنوان و چیپ قانون -->
        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2.5 sm:gap-3 mb-5">
          <h2 class="text-[20px] sm:text-[22px] md:text-2xl font-black bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">باشگاه مشتریان ویژه</h2>
          <div class="min-w-0 text-[12px] sm:text-[13px] font-semibold px-3.5 py-2 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border border-purple-200 shadow-sm max-w-[78vw] sm:max-w-none truncate">
            هر <span id="reward-target" class="font-bold">۱۰</span> نوبت، <span id="reward-text" class="font-bold">یک اصلاح رایگان</span>
          </div>
        </div>

        <!-- متن مرحله‌ای -->
        <div class="text-center max-w-[48ch] mx-auto mb-4">
          <h3 id="lr-headline" class="text-[16px] sm:text-[18px] font-extrabold text-gray-800 tracking-[0.01em]"></h3>
          <p id="lr-sub" class="text-[12px] text-gray-600 mt-1"></p>
        </div>

        <!-- متریک‌ها -->
        <div class="grid grid-cols-2 gap-3 sm:gap-4 mb-6">
          <div class="relative group">
            <div class="absolute inset-0 bg-gradient-to-br from-green-400/20 to-emerald-500/20 rounded-xl blur-sm"></div>
            <div class="relative rounded-xl bg-white border border-green-200 px-4 py-3 text-center shadow-sm">
              <div class="text-[10px] sm:text-[11px] text-gray-600 font-medium mb-1">انجام شده</div>
              <div id="lr-m-current" class="text-[18px] sm:text-[20px] font-bold text-green-600">۰</div>
            </div>
          </div>
          <div class="relative group">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 to-cyan-500/20 rounded-xl blur-sm"></div>
            <div class="relative rounded-xl bg-white border border-blue-200 px-4 py-3 text-center shadow-sm">
              <div class="text-[10px] sm:text-[11px] text-gray-600 font-medium mb-1">تا جایزه</div>
              <div id="lr-m-left" class="text-[18px] sm:text-[20px] font-bold text-blue-600">۰</div>
            </div>
          </div>
        </div>

        <!-- نوار پیشرفت -->
        <div class="mb-4">
          <div class="relative h-[12px] sm:h-[14px] rounded-full bg-gray-100 shadow-inner overflow-hidden">
            <div class="absolute inset-0 opacity-30 bg-[repeating-linear-gradient(to_right,transparent,transparent_9.5%,rgba(0,0,0,0.1)_9.5%,rgba(0,0,0,0.1)_10.5%)]"></div>
            <div id="lr-bar" class="relative h-full w-0 rounded-full transition-all duration-500 ease-out"
                 style="background: linear-gradient(90deg, #8B5CF6, #EC4899, #3B82F6);">
              <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow border-2 border-purple-500"></div>
            </div>
          </div>
          <div class="mt-2 text-[12px] sm:text-sm font-medium text-gray-700 flex justify-between items-center">
            <span id="lr-counts" class="font-bold">۰ از ۰</span>
            <span class="text-[11px] text-gray-500">در حال پیشرفت</span>
          </div>
        </div>

        <!-- راهنما -->
        <p id="lr-helper" class="text-center text-[12px] sm:text-[13px] text-gray-600 mb-6 font-medium"></p>

        <!-- دکمه‌ها -->
        <div class="flex flex-col sm:flex-row justify-center gap-2.5 sm:gap-3">
          <button id="lr-cta" class="relative group w-full sm:w-auto rounded-full px-6 py-3.5 text-[14px] font-bold
                  text-white shadow-lg overflow-hidden transform transition-all duration-200 hover:shadow-xl active:scale-[0.98]">
            <div class="absolute inset-0 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600"></div>
            <span class="relative z-10 flex items-center justify-center gap-2">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
              </svg>
              <span id="lr-cta-label">رزرو بعدی</span>
            </span>
          </button>

          <button id="lr-rules" class="relative group w-full sm:w-auto rounded-full px-6 py-3.5 text-[14px] font-bold
                  bg-white text-purple-700 shadow overflow-hidden border-2 border-purple-300 hover:border-purple-400 transform transition-all duration-200 hover:shadow-md active:scale-[0.98]">
            <div class="absolute inset-0 bg-gradient-to-r from-purple-50 to-pink-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            <span class="relative z-10 flex items-center justify-center gap-2">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
              </svg>
              قوانین
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- استیکی موبایل -->
  <div id="lr-sticky" class="fixed inset-x-0 bottom-0 z-40 sm:hidden pointer-events-none transition-all duration-200 transform translate-y-0">
    <div class="pointer-events-auto mx-auto max-w-2xl px-3">
      <div class="rounded-t-2xl bg-white/95 backdrop-blur shadow-xl p-4 pb-[max(16px,env(safe-area-inset-bottom))] border-t border-x border-gray-200">
        <div class="absolute top-2 left-1/2 -translate-x-1/2 w-10 h-1 bg-gray-300 rounded-full"></div>
        <div class="flex items-center justify-between gap-3 mt-1">
          <div class="min-w-0 flex-1">
            <div id="lr-sticky-label" class="text-[11px] text-gray-500 font-medium mb-1">باشگاه ویژه</div>
            <div class="flex items-center gap-3">
              <div id="lr-sticky-progress" class="text-[14px] font-bold text-purple-700" aria-live="polite">۰ از ۰</div>
              <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                <div id="lr-sticky-bar" class="h-full w-0 transition-all duration-500 ease-out bg-gradient-to-r from-purple-600 to-pink-600"></div>
              </div>
            </div>
          </div>
          <button id="lr-cta-mobile" class="rounded-full px-5 py-3 text-[13px] font-bold text-white shadow-lg transform transition-all duration-200 active:scale-[0.98] bg-gradient-to-r from-purple-600 to-pink-600">
            <span class="flex items-center gap-1.5">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 1.414L10.586 9.5H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"/>
              </svg>
              <span id="lr-cta-mobile-label">رزرو</span>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Rules Modal -->
<div id="lrRulesModal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" data-close></div>
  <div class="flex min-h-full items-center justify-center p-4">
    <div class="modal-card relative w-full max-w-md transform transition-all duration-200 scale-95 opacity-0">
      <div class="bg-white rounded-2xl shadow-2xl p-6 border border-gray-100">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-bold text-gray-800">قوانین باشگاه مشتریان</h3>
          <button class="p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200" data-close aria-label="بستن">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="bg-gray-50 rounded-xl p-4 mb-5">
          <div id="lr-rules-content" class="text-gray-700 text-sm whitespace-pre-line leading-7 max-h-64 overflow-y-auto"></div>
        </div>
        <button class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 rounded-full shadow-lg transition-all duration-200 active:scale-[0.98]" data-close>متوجه شدم</button>
      </div>
    </div>
  </div>
</div>

<!-- Redeem Modal -->
<div id="lrRedeemModal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" data-close></div>
  <div class="flex min-h-full items-center justify-center p-4">
    <div class="modal-card relative w-full max-w-md transform transition-all duration-200 scale-95 opacity-0">
      <div class="bg-white rounded-2xl shadow-2xl p-6 border border-gray-100">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-bold text-gray-800">دریافت جایزه</h3>
        <button class="p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200" data-close aria-label="بستن">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>

        <div id="lr-redeem-body">
          <div class="text-center mb-5">
            <div class="inline-flex p-4 rounded-full bg-gradient-to-br from-purple-100 to-pink-100 mb-3">
              <svg class="w-10 h-10 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </div>
            <p class="text-gray-700 mb-2">به <span id="lr-reward-inline" class="font-bold text-purple-700">یک اصلاح رایگان</span> رسیدی</p>
            <p class="text-sm text-gray-500">آماده دریافت جایزه‌ای؟</p>
          </div>
          
          <div class="rounded-xl bg-gray-50 border border-gray-200 p-4 mb-5">
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600">وضعیت فعلی</span>
              <span id="lr-redeem-counts" class="font-bold text-purple-700">۰ از ۰</span>
            </div>
          </div>
          
          <div class="flex gap-3">
            <button class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 rounded-full transition-colors duration-200 active:scale-[0.98]" data-close>فعلاً نه</button>
            <button id="lr-redeem-confirm" class="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-bold py-3 rounded-full shadow-lg transition-all duration-200 active:scale-[0.98]">
              <span class="flex items-center justify-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                دریافت جایزه
              </span>
            </button>
          </div>
        </div>

        <div id="lr-redeem-done" class="hidden text-center py-8">
          <div class="inline-flex p-4 rounded-full bg-gradient-to-br from-green-100 to-emerald-100 mb-4">
            <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <p class="text-xl font-bold text-green-600 mb-2">جایزه ثبت شد</p>
          <p class="text-gray-600">در رزرو بعدی استفاده می‌شه</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  'use strict';

  // ------- KEYS & HELPERS -------
  const KEY_PROGRESS = 'vitreenet_loyalty_current';   // پیشرفت فعلی تا جایزه (برای مهمان هم نگه نمی‌داریم)
  const KEY_TOTAL    = 'vitreenet_booking_total';     // تعداد کل رزروها (تشخیص «اولین نوبت»)
  const AUTH_LS_KEY  = 'auth_user';                   // فقط حالت تست/دِمو

  const toFa = n => String(n).replace(/\d/g, d => '۰۱۲۳۴۵۶۷۸۹'[d]);
  const reduce = () => window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  function toast(msg, type = 'info') {
    showToastDark(msg, {type});
  }

  // ------- ADAPTERS (قابل تعویض با بک‌اند) -------
  const adapters = {
    async getAuth() {
      if (window.__APP_USER__ && window.__APP_USER__.id) return { loggedIn: true, user: window.__APP_USER__ };
      try { const raw = localStorage.getItem(AUTH_LS_KEY); if (raw) return { loggedIn: true, user: JSON.parse(raw) }; } catch(e) {}
      return { loggedIn: false, user: null };
    },
    async getBookingSummary(userId) {
      if (window.__BOOKING_SUMMARY__ && typeof window.__BOOKING_SUMMARY__.total === 'number') {
        return { total: window.__BOOKING_SUMMARY__.total };
      }
      const total = parseInt(localStorage.getItem(KEY_TOTAL) || '0', 10) || 0;
      return { total };
    }
  };

  // ------- MODAL -------
  function openModal(root) {
    root.classList.remove('hidden');
    const card = root.querySelector('.modal-card');
    requestAnimationFrame(() => { card.classList.remove('scale-95','opacity-0'); card.classList.add('scale-100','opacity-100'); });
  }
  function closeModal(root) {
    const card = root.querySelector('.modal-card');
    card.classList.add('scale-95','opacity-0'); card.classList.remove('scale-100','opacity-100');
    setTimeout(() => root.classList.add('hidden'), reduce()?0:200);
  }

  // ------- COPY (صمیمی/متعادل) -------
  function copyFor(progress, current, target, reward) {
    const left = Math.max(0, target - current);
    const isHalf = current * 2 === target;

    if (current >= target) return { h:'جایزه‌ت آماده‌ست', sub:'بزن بگیریمش.', help:'با رزرو بعدی اعمال می‌شه.', cta:'دریافت جایزه' };
    if (isHalf)           return { h:'نصف راه اومدی',  sub:'همینو ادامه بده.', help:`${toFa(left)} نوبت مونده.`, cta:'رزرو بعدی' };
    if (progress >= 90)   return { h:'سرِ مرز جایزه',   sub:'یکی‌دو تا دیگه.',  help: left<=1 ? 'با بعدی می‌رسی.' : `${toFa(left)} نوبت مونده.`, cta:'تمامش کن' };
    if (progress >= 60)   return { h:'روغنه',          sub:'داری می‌ری جلو.',   help:`${toFa(left)} نوبت تا جایزه.`, cta:'رزرو بعدی' };
    if (current > 0)      return { h:'شروع خوبی داری', sub:'حواست باشه ادامه بدی.', help:`${toFa(left)} نوبت مونده.`, cta:'رزرو بعدی' };
    return { h:'خوش اومدی به باشگاه', sub:'اولین نوبت رو ست کن.', help:`با ${toFa(target)} نوبت، ${reward}.`, cta:'رزرو اولین نوبت' };
  }

  // ------- AUTH / HISTORY -------
  let AUTH = { loggedIn: false, user: null };
  let HAS_BOOKED_BEFORE = false;

  function chooseCtaText(current, target) {
    if (current >= target) return 'دریافت جایزه';
    return HAS_BOOKED_BEFORE ? 'رزرو بعدی' : 'رزرو اولین نوبت';
  }

  function applyCtaText(text) {
    const l1 = document.getElementById('lr-cta-label');
    if (l1) l1.textContent = text;
    const l2 = document.getElementById('lr-cta-mobile-label');
    if (l2) l2.textContent = (text === 'دریافت جایزه') ? 'دریافت' : (text === 'رزرو اولین نوبت' ? 'شروع' : 'رزرو');
  }

  function updateSticky(current, target) {
    const pct = Math.min(100, Math.max(0, (current/target)*100));
    const stickyTxt = document.getElementById('lr-sticky-progress');
    const bar = document.getElementById('lr-sticky-bar');
    if (stickyTxt) stickyTxt.textContent = `${toFa(current)} از ${toFa(target)}`;
    if (bar) bar.style.width = pct + '%';
  }

  function redirectToLogin() {
    const data = document.getElementById('lr-data');
    const loginUrl = data.dataset.loginUrl || '/login';
    const redirect = encodeURIComponent(window.location.href);
    window.location.href = `${loginUrl}?redirect=${redirect}`;
  }

  function requireLogin() {
    toast('اول یه ورود کوچیک لازم داریم؛ سریع برمی‌گردیم همین‌جا 🙂');
    setTimeout(redirectToLogin, 900);
  }

  // ------- INIT CARD -------
  function initCard() {
    const data = document.getElementById('lr-data');
    const target = parseInt(data.dataset.target || '10', 10);
    const reward = data.dataset.reward || '';

    // مقدار خام (ممکنه از سرور یا لوکال بیاد)
    const raw = parseInt(localStorage.getItem(KEY_PROGRESS) ?? data.dataset.current ?? '0', 10) || 0;

    // ✳️ منطق جدید: اگر لاگین نیست یا هرگز رزرو نکرده ⇒ صفرِ واقعی نمایش داده می‌شود
    const current = (!AUTH.loggedIn || !HAS_BOOKED_BEFORE) ? 0 : raw;

    document.getElementById('reward-target').textContent = toFa(target);
    document.getElementById('reward-text').textContent   = reward;

    const pct = Math.min(100, Math.max(0, Math.round((current/target)*100)));
    const {h, sub, help} = copyFor(pct, current, target, reward);

    document.getElementById('lr-headline').textContent = h;
    document.getElementById('lr-sub').textContent      = sub;
    document.getElementById('lr-helper').textContent   = help;

    document.getElementById('lr-counts').textContent   = `${toFa(current)} از ${toFa(target)}`;
    document.getElementById('lr-bar').style.width      = pct + '%';

    const left = Math.max(0, target - current);
    const mCur = document.getElementById('lr-m-current');
    const mLeft = document.getElementById('lr-m-left');
    if (mCur)  mCur.textContent  = toFa(current);
    if (mLeft) mLeft.textContent = toFa(left);

    const ri = document.getElementById('lr-reward-inline');
    if (ri) ri.textContent = reward;
    const rc = document.getElementById('lr-redeem-counts');
    if (rc) rc.textContent = `${toFa(current)} از ${toFa(target)}`;

    applyCtaText(chooseCtaText(current, target));
    updateSticky(current, target);

    // این مقدار برای هندلرها استفاده می‌شود
    data.dataset.current = String(current);
  }

  // ------- EVENTS -------
  function bindEvents() {
    const data = document.getElementById('lr-data');

    document.getElementById('lr-rules')?.addEventListener('click', () => {
      document.getElementById('lr-rules-content').textContent = data.dataset.rules || '';
      openModal(document.getElementById('lrRulesModal'));
    });

    document.querySelectorAll('#lrRulesModal [data-close], #lrRedeemModal [data-close]').forEach(b=>{
      b.addEventListener('click', e => closeModal(e.target.closest('[role="dialog"]')));
    });
    ['lrRulesModal','lrRedeemModal'].forEach(id=>{
      const m = document.getElementById(id);
      if (m) m.addEventListener('click', e => { if (e.target.hasAttribute('data-close')) closeModal(m); });
    });
    document.addEventListener('keydown', e => {
      if (e.key==='Escape') ['lrRulesModal','lrRedeemModal'].forEach(id=>{
        const m=document.getElementById(id); if(m && !m.classList.contains('hidden')) closeModal(m);
      });
    });

    async function goCTA() {
      const target = parseInt(data.dataset.target  || '10', 10);
      const current = parseInt(data.dataset.current || '0', 10);

      // اگر لاگین نیست: پیام بده و هدایت کن
      if (!AUTH.loggedIn) { requireLogin(); return; }

      if (current >= target) { openModal(document.getElementById('lrRedeemModal')); return; }

      // رفتن به رزرو
      const ids = ['booking-wizard','booking','reserve','reservation'];
      let el = null; for (const id of ids) { const t = document.getElementById(id); if (t){ el=t; break; } }
      if (el) {
        if (el.classList.contains('hidden')) el.classList.remove('hidden');
        const top = el.getBoundingClientRect().top + window.scrollY - 80;
        reduce() ? window.scrollTo(0, top) : window.scrollTo({ top, behavior: 'smooth' });
      } else {
        const url = data.dataset.bookingUrl;
        if (url) window.location.href = url; else toast('بخش رزرو هنوز بالا نیومده');
      }
    }
    document.getElementById('lr-cta')?.addEventListener('click', goCTA);
    document.getElementById('lr-cta-mobile')?.addEventListener('click', goCTA);

    // تأیید دریافت جایزه -> ریست پیشرفت (نیازمند ورود)
    document.getElementById('lr-redeem-confirm')?.addEventListener('click', () => {
      if (!AUTH.loggedIn) { requireLogin(); return; }
      document.getElementById('lr-redeem-body').classList.add('hidden');
      document.getElementById('lr-redeem-done').classList.remove('hidden');
      setTimeout(() => {
        localStorage.setItem(KEY_PROGRESS, '0');
        data.dataset.current = '0';
        closeModal(document.getElementById('lrRedeemModal'));
        document.getElementById('lr-redeem-done').classList.add('hidden');
        document.getElementById('lr-redeem-body').classList.remove('hidden');
        toast('جایزه ثبت شد؛ مبارک‌ته!', 'success');
        initCard();
      }, 250);
    });

    // دکمه تایید نهایی رزرو (بیرون سکشن)
    document.getElementById('confirm-booking')?.addEventListener('click', () => {
      if (!AUTH.loggedIn) { requireLogin(); return; }

      const cur = parseInt(localStorage.getItem(KEY_PROGRESS) ?? data.dataset.current ?? '0', 10) || 0;
      const next = cur + 1;
      const target = parseInt(data.dataset.target || '10', 10);

      // بروزرسانی پیشرفت فعلی
      localStorage.setItem(KEY_PROGRESS, String(next));

      // ثبت تاریخچه کلی برای تشخیص «رزرو داشته/نداشته»
      const total = parseInt(localStorage.getItem(KEY_TOTAL) || '0', 10) || 0;
      localStorage.setItem(KEY_TOTAL, String(total + 1));
      HAS_BOOKED_BEFORE = true;

      if (next >= target) toast('تبریک! جایزه‌ت رسید', 'success'); else toast(`نوبت ${toFa(next)} ثبت شد`, 'success');
      setTimeout(initCard, 300);
    });

    // مخفی‌کردن استیکی وقتی CTA داخل ویو
    const stickyWrap = document.getElementById('lr-sticky');
    const cta = document.getElementById('lr-cta');
    if (stickyWrap && cta && 'IntersectionObserver' in window) {
      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          stickyWrap.style.transform = entry.isIntersecting ? 'translateY(100%)' : 'translateY(0)';
        });
      }, { threshold: 0.5 });
      io.observe(cta);
    }
  }

  // ------- BOOTSTRAP -------
  async function initAuthAndHistory() {
    AUTH = await adapters.getAuth();
    const sum = await adapters.getBookingSummary(AUTH.user?.id);
    HAS_BOOKED_BEFORE = (sum?.total || 0) > 0;

    // بعد از تعیین وضعیت، کل UI بر اساس قوانین جدید رفرش می‌شود
    initCard();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => { bindEvents(); initAuthAndHistory(); });
  } else { bindEvents(); initAuthAndHistory(); }
})();
</script>
<!-- ========== /Loyalty Rewards ========== -->










    
   <!-- Customer Reviews Section - Complete with Review Form -->
<section class="py-8 px-4">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6">
        <div>
            <h3 class="text-xl font-bold mb-1">نظرات کاربران</h3>
            <div class="flex items-center gap-2">
                <div class="flex items-center">
                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                    <i class="fas fa-star-half-alt text-yellow-400 text-sm"></i>
                </div>
                <span class="text-sm font-bold text-gray-700">4.8</span>
                <span class="text-sm text-gray-500">(128 نظر)</span>


                <button id="rate-now-chip" type="button"
  class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full
         bg-gradient-to-r from-blue-600 to-teal-500 text-white
         text-[11px] sm:text-xs md:text-sm font-bold shadow-sm
         hover:shadow-md active:scale-95 focus:outline-none
         focus-visible:ring-2 focus-visible:ring-blue-500">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
       class="w-4 h-4" fill="currentColor" aria-hidden="true">
    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
  </svg>
  <span class="hidden xs:inline sm:inline">ثبت امتیاز</span>
  <span class="sm:hidden"> ثبت امتیاز</span>
</button>

            </div>
        </div>
        
        <!-- Buttons Container -->
        <div class="flex items-center gap-2 w-full sm:w-auto">
            <!-- Write Review Button -->
            <button id="write-review-btn" class="flex-1 sm:flex-initial flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-teal-500 text-white rounded-full text-sm font-bold hover:shadow-lg transform hover:scale-105 transition-all">
                <i class="fas fa-pen text-xs"></i>
                <span>ثبت نظر</span>
            </button>
            
            <!-- Show All Reviews Button -->
            <button id="show-all-reviews" class="flex-1 sm:flex-initial flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-full text-sm font-bold text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm">
                <span>مشاهده همه</span>
                <i class="fas fa-arrow-left text-xs"></i>
            </button>
        </div>
    </div>
    
    <!-- Reviews Carousel -->
    <div class="scroll-container flex overflow-x-auto pb-4 space-x-4 space-x-reverse scrollbar-hide">
        <!-- Review Card 1 -->
        <div class="review-card flex-shrink-0 w-80 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 p-5">
            <div class="flex items-start justify-between mb-3">
                <div>
                    <h4 class="font-bold text-gray-900 mb-1">علی رضایی</h4>
                    <div class="flex items-center gap-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                    </div>
                </div>
                <span class="text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded-full">۲ روز پیش</span>
            </div>
            <p class="text-sm text-gray-700 leading-6">تجربه‌ای عالی از آرایشگاه مردانه سلطنتی داشتم. پرسنل بسیار حرفه‌ای و محیط تمیز و شیک بود.</p>
        </div>
        
        <!-- Review Card 2 -->
        <div class="review-card flex-shrink-0 w-80 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 p-5">
            <div class="flex items-start justify-between mb-3">
                <div>
                    <h4 class="font-bold text-gray-900 mb-1">محمد حسینی</h4>
                    <div class="flex items-center gap-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="far fa-star text-gray-300 text-xs"></i>
                    </div>
                </div>
                <span class="text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded-full">۱ هفته پیش</span>
            </div>
            <p class="text-sm text-gray-700 leading-6">کیفیت خدمات عالی بود و قیمت‌ها هم منصفانه. فقط کمی شلوغ بود و مجبور شدم منتظر بمانم.</p>
        </div>
        
        <!-- Review Card 3 -->
        <div class="review-card flex-shrink-0 w-80 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 p-5">
            <div class="flex items-start justify-between mb-3">
                <div>
                    <h4 class="font-bold text-gray-900 mb-1">رضا اکبری</h4>
                    <div class="flex items-center gap-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                    </div>
                </div>
                <span class="text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded-full">۲ هفته پیش</span>
            </div>
            <p class="text-sm text-gray-700 leading-6">بهترین آرایشگاهی که تا حالا رفتم! آقای احمدی واقعاً حرفه‌ای هستند و دقیقاً می‌دونن چه مدلی به صورتم میاد.</p>
        </div>
    </div>
</section>

<!-- Reviews Modal -->
<div id="reviewsModal" class="fixed inset-0 z-[120] hidden">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300" id="reviews-backdrop"></div>
    
    <!-- Modal Container -->
    <div class="flex items-end sm:items-center justify-center min-h-full p-0 sm:p-4">
        <div id="reviews-modal-content" class="relative bg-white w-full sm:max-w-2xl md:max-w-3xl lg:max-w-4xl 
                                                  rounded-t-3xl sm:rounded-2xl shadow-2xl transform transition-all duration-300 
                                                  translate-y-full sm:translate-y-0 sm:scale-95 sm:opacity-0
                                                  max-h-[90vh] sm:max-h-[85vh] flex flex-col">
            
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white rounded-t-3xl sm:rounded-t-2xl border-b border-gray-100 px-6 py-5 z-10">
                <!-- Drag Handle for Mobile -->
                <div class="sm:hidden w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"></div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">نظرات کاربران</h3>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-star text-yellow-400"></i>
                                <span class="font-bold text-gray-800">4.8</span>
                            </div>
                            <span class="text-sm text-gray-500">بر اساس 128 نظر</span>
                            
                            <!-- Filter Chips -->
                            <div class="hidden sm:flex items-center gap-2 mr-4">
                                <button class="review-filter-chip active" data-filter="all">همه</button>
                                <button class="review-filter-chip" data-filter="5">5 ستاره</button>
                                <button class="review-filter-chip" data-filter="4">4 ستاره</button>
                                <button class="review-filter-chip" data-filter="3">3 ستاره</button>
                            </div>
                        </div>
                    </div>
                    
                    <button id="close-reviews-modal" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 
                                                            flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-gray-600"></i>
                    </button>
                </div>
                
                <!-- Mobile Filter Chips -->
                <div class="sm:hidden flex items-center gap-2 mt-3 overflow-x-auto scrollbar-hide">
                    <button class="review-filter-chip active" data-filter="all">همه</button>
                    <button class="review-filter-chip" data-filter="5">5 ستاره</button>
                    <button class="review-filter-chip" data-filter="4">4 ستاره</button>
                    <button class="review-filter-chip" data-filter="3">3 ستاره</button>
                </div>
            </div>
            
            <!-- Modal Body -->
            <div class="flex-1 overflow-y-auto px-6 py-4">
                <!-- Rating Summary -->
                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-5 mb-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="text-center sm:text-right">
                            <div class="text-4xl font-bold text-gray-900 mb-1">4.8</div>
                            <div class="flex items-center justify-center sm:justify-start gap-1 mb-2">
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star-half-alt text-yellow-400"></i>
                            </div>
                            <div class="text-sm text-gray-600">128 نظر ثبت شده</div>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-600 w-12">5 ستاره</span>
                                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-yellow-400 rounded-full" style="width: 75%"></div>
                                </div>
                                <span class="text-xs text-gray-600 w-8">96</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-600 w-12">4 ستاره</span>
                                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-yellow-400 rounded-full" style="width: 15%"></div>
                                </div>
                                <span class="text-xs text-gray-600 w-8">19</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-600 w-12">3 ستاره</span>
                                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-yellow-400 rounded-full" style="width: 7%"></div>
                                </div>
                                <span class="text-xs text-gray-600 w-8">9</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-600 w-12">2 ستاره</span>
                                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-yellow-400 rounded-full" style="width: 2%"></div>
                                </div>
                                <span class="text-xs text-gray-600 w-8">3</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-600 w-12">1 ستاره</span>
                                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-yellow-400 rounded-full" style="width: 1%"></div>
                                </div>
                                <span class="text-xs text-gray-600 w-8">1</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Write Review CTA in Modal -->
                <div class="mb-6">
                    <button id="write-review-modal-btn" class="w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-500 text-white rounded-xl font-bold hover:shadow-lg transform hover:scale-105 transition-all">
                        <i class="fas fa-pen ml-2"></i>
                        نظر خود را ثبت کنید
                    </button>
                </div>
                
                <!-- Reviews List -->
                <div class="space-y-4" id="reviews-list">
                    <!-- Review Item 1 -->
                    <div class="review-item bg-white border border-gray-100 rounded-2xl p-5 hover:shadow-md transition-shadow" data-rating="5">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h4 class="font-bold text-gray-900 mb-1">علی رضایی</h4>
                                <div class="flex items-center gap-2">
                                    <div class="flex items-center gap-1">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">•</span>
                                    <span class="text-xs text-gray-500">۲ روز پیش</span>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-green-50 text-green-700 text-xs font-bold rounded-full">
                                <i class="fas fa-check-circle ml-1"></i>
                                خرید تایید شده
                            </span>
                        </div>
                        <div class="review-text-container">
                            <p class="text-sm text-gray-700 leading-7 review-text">
                                تجربه‌ای عالی از آرایشگاه مردانه سلطنتی داشتم. پرسنل بسیار حرفه‌ای و محیط تمیز و شیک بود. حتماً دوباره مراجعه خواهم کرد.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Review Item 2 (Long Review) -->
                    <div class="review-item bg-white border border-gray-100 rounded-2xl p-5 hover:shadow-md transition-shadow" data-rating="4">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h4 class="font-bold text-gray-900 mb-1">محمد حسینی</h4>
                                <div class="flex items-center gap-2">
                                    <div class="flex items-center gap-1">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="far fa-star text-gray-300 text-xs"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">•</span>
                                    <span class="text-xs text-gray-500">۱ هفته پیش</span>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-green-50 text-green-700 text-xs font-bold rounded-full">
                                <i class="fas fa-check-circle ml-1"></i>
                                خرید تایید شده
                            </span>
                        </div>
                        <div class="review-text-container">
                            <p class="text-sm text-gray-700 leading-7 review-text line-clamp-3" data-full-text="کیفیت خدمات عالی بود و قیمت‌ها هم منصفانه. فقط کمی شلوغ بود و مجبور شدم منتظر بمانم. بهتر است از قبل نوبت بگیرید. محیط آرایشگاه بسیار تمیز و مرتب بود و از لوازم با کیفیتی استفاده می‌کردند. پرسنل بسیار مودب و حرفه‌ای برخورد کردند و به خواسته‌های من توجه کاملی داشتند. در کل تجربه خوبی بود و پیشنهاد می‌کنم حتماً امتحان کنید.">
                                کیفیت خدمات عالی بود و قیمت‌ها هم منصفانه. فقط کمی شلوغ بود و مجبور شدم منتظر بمانم. بهتر است از قبل نوبت بگیرید. محیط آرایشگاه بسیار تمیز و مرتب بود و از لوازم با کیفیتی استفاده می‌کردند...
                            </p>
                            <button class="text-blue-600 text-sm font-bold mt-2 hover:text-blue-700 read-more-btn">
                                مشاهده بیشتر
                                <i class="fas fa-chevron-down mr-1 text-xs"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- More review items... -->
                    <div class="review-item bg-white border border-gray-100 rounded-2xl p-5 hover:shadow-md transition-shadow" data-rating="5">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h4 class="font-bold text-gray-900 mb-1">رضا اکبری</h4>
                                <div class="flex items-center gap-2">
                                    <div class="flex items-center gap-1">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">•</span>
                                    <span class="text-xs text-gray-500">۲ هفته پیش</span>
                                </div>
                            </div>
                        </div>
                        <div class="review-text-container">
                            <p class="text-sm text-gray-700 leading-7 review-text">
                                بهترین آرایشگاهی که تا حالا رفتم! آقای احمدی واقعاً حرفه‌ای هستند و دقیقاً می‌دونن چه مدلی به صورتم میاد. پیشنهاد میکنم.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Load More Button -->
                <div class="text-center mt-6">
                    <button class="px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-full transition-colors">
                        نمایش نظرات بیشتر
                        <i class="fas fa-chevron-down mr-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Review Form Modal -->
<div id="reviewFormModal" class="fixed inset-0 z-[120] hidden">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300" id="review-form-backdrop"></div>
    
    <div class="flex items-end sm:items-center justify-center min-h-full p-0 sm:p-4">
        <div id="review-form-content" class="relative bg-white w-full sm:max-w-lg rounded-t-3xl sm:rounded-2xl shadow-2xl transform transition-all duration-300 translate-y-full sm:translate-y-0 sm:scale-95 sm:opacity-0 max-h-[90vh] overflow-y-auto">
            
            <!-- Mobile Drag Handle -->
            <div class="sm:hidden sticky top-0 bg-white rounded-t-3xl py-3 z-10">
                <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            
            <div class="p-6">
                <!-- Header -->
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-gray-900">ثبت نظر جدید</h3>
                    <button id="close-review-form" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-gray-600"></i>
                    </button>
                </div>
                
                <!-- Form -->
                <form id="review-form">
                    <!-- Rating Stars -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold text-gray-700 mb-3">امتیاز شما</label>
                        <div class="flex items-center gap-3">
                            <div class="rating-stars flex gap-2">
                                <i class="far fa-star text-3xl text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors rating-star" data-rating="1"></i>
                                <i class="far fa-star text-3xl text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors rating-star" data-rating="2"></i>
                                <i class="far fa-star text-3xl text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors rating-star" data-rating="3"></i>
                                <i class="far fa-star text-3xl text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors rating-star" data-rating="4"></i>
                                <i class="far fa-star text-3xl text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors rating-star" data-rating="5"></i>
                            </div>
                            <span id="rating-text" class="text-sm font-bold text-gray-600"></span>
                        </div>
                    </div>
                    
                    <!-- Name -->
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-gray-700 mb-2" for="reviewer-name">نام شما</label>
                        <input type="text" id="reviewer-name" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all" placeholder="نام و نام خانوادگی" required>
                    </div>
                    
                    <!-- Service Used -->
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-gray-700 mb-2" for="service-used">خدمت دریافت شده</label>
                        <select id="service-used" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            <option value="">انتخاب کنید...</option>
                            <option>اصلاح سر و صورت</option>
                            <option>رنگ مو</option>
                            <option>ماساژ صورت</option>
                            <option>شستشوی حرفه‌ای</option>
                            <option>سایر خدمات</option>
                        </select>
                    </div>
                    
                    <!-- Review Text -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold text-gray-700 mb-2" for="review-text">نظر شما</label>
                        <textarea id="review-text" rows="4" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-all" placeholder="تجربه خود را با دیگران به اشتراک بگذارید..." required></textarea>
                        <div class="flex justify-between items-center mt-1">
                            <span class="text-xs text-gray-500">حداقل 20 کاراکتر</span>
                            <span id="char-counter" class="text-xs text-gray-500">0/500</span>
                        </div>
                    </div>
                    
                    <!-- Recommend Checkbox -->
                    <div class="mb-6">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="recommend-checkbox" class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 mt-0.5">
                            <span class="text-sm text-gray-700">این آرایشگاه را به دوستانم پیشنهاد می‌کنم</span>
                        </label>
                    </div>
                    
                    <!-- Buttons -->
                    <div class="flex gap-3">
                        <button type="button" id="cancel-review" class="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition-colors">
                            انصراف
                        </button>
                        <button type="submit" class="flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-teal-500 text-white font-bold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed" id="submit-review">
                            ارسال نظر
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Styles for Reviews -->
<style>
/* Review Cards */
.review-card {
    transition: all 0.3s ease;
}

.review-card:hover {
    transform: translateY(-2px);
}

/* Modal Animations */
#reviewsModal.show #reviews-backdrop,
#reviewFormModal.show #review-form-backdrop {
    opacity: 1;
}

#reviewsModal.show #reviews-modal-content,
#reviewFormModal.show #review-form-content {
    transform: translateY(0) !important;
    opacity: 1 !important;
}

@media (min-width: 640px) {
    #reviewsModal.show #reviews-modal-content,
    #reviewFormModal.show #review-form-content {
        transform: scale(1) !important;
    }
}

/* Filter Chips */
.review-filter-chip {
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    background: white;
    color: #4b5563;
    border: 1px solid #e5e7eb;
    transition: all 0.2s;
    white-space: nowrap;
}

.review-filter-chip:hover {
    background: #f9fafb;
    border-color: #d1d5db;
}

.review-filter-chip.active {
    background: linear-gradient(135deg, #3b82f6, #06b6d4);
    color: white;
    border-color: transparent;
}

/* Line Clamp for Long Reviews */
.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Read More Button Animation */
.read-more-btn {
    display: inline-flex;
    align-items: center;
    transition: all 0.2s;
}

.read-more-btn:hover {
    gap: 4px;
}

.read-more-btn i {
    transition: transform 0.2s;
}

.read-more-btn.expanded i {
    transform: rotate(180deg);
}

/* Rating Stars Animation */
.rating-star {
    transition: all 0.2s;
}

.rating-star:hover {
    transform: scale(1.1);
}

.rating-star.filled {
    color: #facc15 !important;
}


/* Mobile Specific Styles */
@media (max-width: 640px) {
    #reviews-modal-content,
    #review-form-content {
        min-height: 70vh;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
    }
}

/* Smooth Scrollbar */
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}


@media (max-width: 640px){
  #review-form-content{ 
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
}









</style>

<!-- JavaScript for Reviews -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Reviews Modal
    const reviewsModal = document.getElementById('reviewsModal');
    const reviewsModalContent = document.getElementById('reviews-modal-content');
    const showAllBtn = document.getElementById('show-all-reviews');
    const closeReviewsBtn = document.getElementById('close-reviews-modal');
    const reviewsBackdrop = document.getElementById('reviews-backdrop');
    
    // Review Form Modal
    const reviewFormModal = document.getElementById('reviewFormModal');
    const reviewFormContent = document.getElementById('review-form-content');
    const writeReviewBtn = document.getElementById('write-review-btn');

    // چیپ «ثبت امتیاز» کنار 4.8
const rateNowChip = document.getElementById('rate-now-chip');
if (rateNowChip) rateNowChip.addEventListener('click', () => writeReviewBtn.click());

    const writeReviewModalBtn = document.getElementById('write-review-modal-btn');
    const closeReviewFormBtn = document.getElementById('close-review-form');
    const reviewFormBackdrop = document.getElementById('review-form-backdrop');
    const cancelReviewBtn = document.getElementById('cancel-review');
    
    // Form Elements
    const reviewForm = document.getElementById('review-form');
    const ratingStars = document.querySelectorAll('.rating-star');
    const ratingText = document.getElementById('rating-text');
    const reviewTextarea = document.getElementById('review-text');
    const charCounter = document.getElementById('char-counter');
    const submitBtn = document.getElementById('submit-review');
    const storeId = document.body.dataset.storeId || 'default';
    const userId = window.__APP_USER__?.id;
    const isAdmin = window.__APP_USER__?.isAdmin || window.__APP_USER__?.role === 'admin';
    const reviewKey = userId ? `review:last:${storeId}:${userId}` : `review:last:${storeId}`;
    function canSubmitReview() {
        if (isAdmin) return true;
        const last = localStorage.getItem(reviewKey);
        return !last || (Date.now() - parseInt(last, 10)) > 86400000;
    }
    function markReviewSubmitted() {
        localStorage.setItem(reviewKey, Date.now().toString());
    }
    function updateSubmitState() {
        if (canSubmitReview()) {
            submitBtn.disabled = false;
            submitBtn.removeAttribute('title');
        } else {
            submitBtn.disabled = true;
            submitBtn.title = 'You can submit one review per day.';
            showToastDark('You can submit one review per day.', {type: 'info'});
        }
    }
    
    let selectedRating = 0;
    
    // Open Reviews Modal
    showAllBtn.addEventListener('click', function() {
        reviewsModal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        setTimeout(() => {
            reviewsModal.classList.add('show');
        }, 10);
    });
    
    // Open Review Form Modal
    function openReviewForm() {
        reviewFormModal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        setTimeout(() => {
            reviewFormModal.classList.add('show');
        }, 10);
        updateSubmitState();
    }
    
    writeReviewBtn.addEventListener('click', openReviewForm);
    if (writeReviewModalBtn) {
        writeReviewModalBtn.addEventListener('click', openReviewForm);
    }
    
    // Close Modals
    function closeReviewsModal() {
        reviewsModal.classList.remove('show');
        setTimeout(() => {
            reviewsModal.classList.add('hidden');
            document.body.style.overflow = '';
        }, 300);
    }
    
    function closeReviewFormModal() {
        reviewFormModal.classList.remove('show');
        setTimeout(() => {
            reviewFormModal.classList.add('hidden');
            document.body.style.overflow = '';
            // Reset form
            reviewForm.reset();
            selectedRating = 0;
            ratingStars.forEach(star => {
                star.classList.remove('fas', 'filled');
                star.classList.add('far');
            });
            ratingText.textContent = '';
            charCounter.textContent = '0/500';
        }, 300);
    }
    
    closeReviewsBtn.addEventListener('click', closeReviewsModal);
    reviewsBackdrop.addEventListener('click', closeReviewsModal);
    
    closeReviewFormBtn.addEventListener('click', closeReviewFormModal);
    reviewFormBackdrop.addEventListener('click', closeReviewFormModal);
    cancelReviewBtn.addEventListener('click', closeReviewFormModal);
    
    // ESC key to close
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            if (!reviewsModal.classList.contains('hidden')) {
                closeReviewsModal();
            }
            if (!reviewFormModal.classList.contains('hidden')) {
                closeReviewFormModal();
            }
        }
    });
    
    // Mobile Swipe to Close
    function setupSwipeToClose(modalContent, closeFunction) {
        let startY = 0;
        let currentY = 0;
        let isDragging = false;
        
        modalContent.addEventListener('touchstart', function(e) {
            if (window.innerWidth <= 640) {
                startY = e.touches[0].clientY;
                isDragging = true;
            }
        });
        
        modalContent.addEventListener('touchmove', function(e) {
            if (!isDragging || window.innerWidth > 640) return;
            
            currentY = e.touches[0].clientY;
            const translateY = Math.max(0, currentY - startY);
            
            if (translateY > 0) {
                modalContent.style.transform = `translateY(${translateY}px)`;
            }
        });
        
        modalContent.addEventListener('touchend', function() {
            if (!isDragging || window.innerWidth > 640) return;
            
            const translateY = currentY - startY;
            
            if (translateY > 100) {
                closeFunction();
            } else {
                modalContent.style.transform = '';
            }
            
            isDragging = false;
        });
    }
    
    setupSwipeToClose(reviewsModalContent, closeReviewsModal);
    setupSwipeToClose(reviewFormContent, closeReviewFormModal);
    
    // Filter Reviews
    const filterChips = document.querySelectorAll('.review-filter-chip');
    const reviewItems = document.querySelectorAll('.review-item');
    
    filterChips.forEach(chip => {
        chip.addEventListener('click', function() {
            filterChips.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            
            const filter = this.dataset.filter;
            
            reviewItems.forEach(review => {
                if (filter === 'all') {
                    review.style.display = '';
                } else {
                    const rating = review.dataset.rating;
                    review.style.display = rating === filter ? '' : 'none';
                }
            });
        });
    });
    
    // Read More/Less functionality
    document.querySelectorAll('.read-more-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const textElement = this.previousElementSibling;
            const fullText = textElement.dataset.fullText;
            
            if (this.classList.contains('expanded')) {
                textElement.classList.add('line-clamp-3');
                textElement.textContent = fullText.substring(0, 150) + '...';
                this.innerHTML = 'مشاهده بیشتر <i class="fas fa-chevron-down mr-1 text-xs"></i>';
                this.classList.remove('expanded');
            } else {
                textElement.classList.remove('line-clamp-3');
                textElement.textContent = fullText;
                this.innerHTML = 'مشاهده کمتر <i class="fas fa-chevron-up mr-1 text-xs"></i>';
                this.classList.add('expanded');
            }
        });
    });
    
    // Rating Stars Interaction
    const ratingMessages = ['', 'ضعیف', 'متوسط', 'خوب', 'عالی', 'فوق‌العاده'];
    
    ratingStars.forEach(star => {
        star.addEventListener('click', function() {
            selectedRating = parseInt(this.dataset.rating);
            updateStars(selectedRating);
            ratingText.textContent = ratingMessages[selectedRating];
        });
        
        star.addEventListener('mouseenter', function() {
            const hoverRating = parseInt(this.dataset.rating);
            updateStars(hoverRating);
            ratingText.textContent = ratingMessages[hoverRating];
        });
    });
    
    document.querySelector('.rating-stars').addEventListener('mouseleave', function() {
        updateStars(selectedRating);
        ratingText.textContent = selectedRating ? ratingMessages[selectedRating] : '';
    });
    
    function updateStars(rating) {
        ratingStars.forEach((star, index) => {
            if (index < rating) {
                star.classList.remove('far');
                star.classList.add('fas', 'filled');
            } else {
                star.classList.remove('fas', 'filled');
                star.classList.add('far');
            }
        });
    }
    
    // Character Counter
    reviewTextarea.addEventListener('input', function() {
        const length = this.value.length;
        charCounter.textContent = `${length}/500`;
        
        if (length > 500) {
            this.value = this.value.substring(0, 500);
            charCounter.textContent = '500/500';
        }
    });
    
    // Form Submission
    reviewForm.addEventListener('submit', function(e) {
        e.preventDefault();

        if (!canSubmitReview()) {
            showToastDark('You can submit one review per day.', {type: 'info'});
            return;
        }

        // Validation
        if (selectedRating === 0) {
            alert('لطفاً امتیاز خود را انتخاب کنید');
            return;
        }

        if (reviewTextarea.value.length < 20) {
            alert('نظر شما باید حداقل 20 کاراکتر باشد');
            return;
        }

        // Close form modal
        closeReviewFormModal();

        setTimeout(() => {
            showToastDark('نظر شما با موفقیت ثبت شد', {type: 'success'});
        }, 300);
        markReviewSubmitted();
    });
});
</script>
    <!-- Store Info & Contact -->
    <section class="py-8 px-4">
        <h3 class="text-xl font-bold mb-4">اطلاعات و تماس</h3>
        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="mb-6">
                <div class="flex items-start mb-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center ml-3 flex-shrink-0">
                        <i class="fas fa-map-marker-alt text-blue-600"></i>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">آدرس</h4>
                        <p class="text-sm text-gray-700">تهران، خیابان ولیعصر، کوچه فرهنگ، پلاک ۱۲</p>
                    </div>
                </div>
                <div class="mb-4 h-48 rounded-lg overflow-hidden">
                    <img src="https://picsum.photos/seed/map/600/300.jpg" alt="Map" class="w-full h-full object-cover">
                </div>
            </div>
            <div class="mb-6">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center ml-3 flex-shrink-0">
                        <i class="fas fa-phone text-blue-600"></i>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">شماره تماس</h4>
                        <p class="text-sm text-gray-700">۰۲۱-۸۸۷۷۶۶۵۵</p>
                    </div>
                </div>
            </div>
            <div class="mb-6">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center ml-3 flex-shrink-0">
                        <i class="fas fa-clock text-blue-600"></i>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">ساعت کاری</h4>
                        <p class="text-sm text-gray-700">شنبه تا چهارشنبه: ۱۰:۰۰ تا ۲۰:۰۰</p>
                        <p class="text-sm text-gray-700">پنج‌شنبه: ۱۰:۰۰ تا ۱۸:۰۰</p>
                    </div>
                </div>
            </div>
 

<div class="grid grid-cols-2 gap-3">
  <!-- صفحه اصلی ویترینت -->
  <a href="local***index.html"
     class="group inline-flex items-center justify-center gap-1.5 sm:gap-2 w-full
            rounded-2xl px-3.5 py-3 sm:px-4 sm:py-3.5 min-h-[52px] sm:min-h-[56px]
            font-extrabold text-white text-[13px] sm:text-[15px] shadow-lg
            bg-gradient-to-tr from-blue-600 to-teal-500 ring-1 ring-white/60
            transition-all hover:from-blue-700 hover:to-teal-600
            hover:shadow-[0_10px_25px_rgba(16,185,129,0.25)]
            active:scale-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"
     aria-label="رفتن به صفحه اصلی ویترینت">
    <i class="fas fa-house ml-1.5 sm:ml-2 text-[14px] sm:text-base opacity-95 transition-transform group-active:scale-95"></i>
    <span class="truncate">صفحه اصلی ویترینت</span>
  </a>

  <!-- مغازه‌های مشابه -->
  <a href="local***discover.html"
     class="group inline-flex items-center justify-center gap-1.5 sm:gap-2 w-full
            rounded-2xl px-3.5 py-3 sm:px-4 sm:py-3.5 min-h-[52px] sm:min-h-[56px]
            font-extrabold text-blue-800 text-[13px] sm:text-[15px]
            bg-gradient-to-tr from-sky-50/90 via-cyan-50/90 to-emerald-50/90
            backdrop-blur-md border border-white/60 shadow
            hover:from-sky-100/90 hover:via-cyan-100/90 hover:to-emerald-100/90 hover:shadow-lg
            active:scale-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500
            transition-all"
     aria-label="مشاهده مغازه‌های مشابه">
    <i class="fas fa-store ml-1.5 sm:ml-2 text-[14px] sm:text-base opacity-95 transition-transform group-active:scale-95"></i>
    <span class="truncate">مغازه‌های مشابه</span>
  </a>
</div>




        </div>
    </section>
    <!-- Mobile Navigation Bar -->

<footer id="site-footer" class="w-full mt-16 hide-on-mobile" aria-labelledby="vitreenet-footer-title">
  <h2 id="vitreenet-footer-title" class="sr-only">ویترینت — ویترین آنلاین کسب‌وکارهای محلی</h2>

  <div class="bg-gradient-to-tr from-[#f8fafc] via-[#e0fdfa] to-[#d4fbe8]
              rounded-t-[1.7rem] border-t border-white/70
              shadow-[0_-12px_30px_rgba(0,0,0,0.06)]">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 py-10">

      <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
        <!-- 1) اشاره خیلی مختصر به مغازه -->
        <div>
          <div class="flex items-center gap-2 mb-2">
            <span class="inline-flex w-9 h-9 items-center justify-center rounded-xl
                         bg-gradient-to-tr from-blue-600 to-teal-500 text-white">
              <i class="fa-solid fa-store"></i>
            </span>
            <p class="font-extrabold text-gray-800">آرایشگاه مردانه سلطنتی</p>
          </div>
          <p class="text-xs text-gray-600 leading-6">
            این صفحه بر بستر <strong class="text-gray-800">ویترینت</strong> میزبانی می‌شود.
          </p>
          <!-- بنا به خواست شما دکمه «رزرو سریع» حذف شد -->
        </div>

        <!-- 2) ویترینت در یک نگاه (برای کاربران) -->
        <div>
          <div class="flex items-center gap-2 mb-3">
            <span class="inline-flex w-9 h-9 items-center justify-center rounded-xl
                         bg-gradient-to-tr from-blue-600 to-teal-500 text-white">
              <i class="fa-solid fa-compass"></i>
            </span>
            <p class="font-extrabold text-gray-800">ویترینت در یک نگاه</p>
          </div>

          <p class="text-sm text-gray-700 leading-7">
            با ویترینت، ویترین آنلاینِ مغازه‌ات را بساز و مدیریت کن؛
            رزرو نوبت، پرداخت امن، باشگاه مشتریان و گزارش‌های هوشمند — همه یک‌جا و بدون کدنویسی.
          </p>

          <div class="mt-4 space-y-2">
            <a href="/" rel="home"
               class="block w-full text-center px-5 py-3 rounded-xl font-extrabold text-white
                      bg-gradient-to-tr from-blue-600 to-teal-500 hover:from-blue-700 hover:to-teal-600
                      shadow-lg transition" aria-label="رفتن به صفحه اصلی ویترینت">
              صفحهٔ اصلی ویترینت
            </a>

            <a href="/discover"
               class="block w-full text-center px-5 py-3 rounded-xl font-extrabold text-blue-700
                      bg-white/80 backdrop-blur border border-white/70 hover:bg-white hover:shadow transition"
               aria-label="مشاهده مغازه‌های مشابه در ویترینت">
              مغازه‌های مشابه
            </a>
          </div>
        </div>

        <!-- 3) مزیت‌ها (خلاصه و کاربردی) -->
        <div>
          <p class="font-extrabold text-gray-800 mb-3">چرا ویترینت؟</p>
          <ul class="space-y-2 text-sm text-gray-700">
            <li class="flex items-center gap-2"><i class="fa-solid fa-check text-emerald-600"></i> رزرو آنلاین با یادآوری خودکار</li>
            <li class="flex items-center gap-2"><i class="fa-solid fa-check text-emerald-600"></i> پرداخت امن و فاکتور دیجیتال</li>
            <li class="flex items-center gap-2"><i class="fa-solid fa-check text-emerald-600"></i> باشگاه مشتریان و کوپن‌های تخفیف</li>
            <li class="flex items-center gap-2"><i class="fa-solid fa-check text-emerald-600"></i> ظاهر سبک، واکنش‌گرا و سریع</li>
            <li class="flex items-center gap-2"><i class="fa-solid fa-check text-emerald-600"></i> داشبورد آمار و گزارش‌های کاربردی</li>
          </ul>
        </div>

        <!-- 4) CTA برای صاحبان کسب‌وکار -->
        <div>
          <p class="font-extrabold text-gray-800 mb-3">برای صاحبان کسب‌وکار</p>
          <div class="space-y-3">
            <a href="/merchant/register"
               class="block w-full text-center px-5 py-3 rounded-xl font-extrabold text-white
                      bg-gradient-to-tr from-blue-600 to-teal-500 hover:from-blue-700 hover:to-teal-600
                      shadow-lg transition" aria-label="ثبت فروشگاه در ویترینت">
              ثبت فروشگاه در ویترینت
            </a>
            <a href="/merchant/login"
               class="block w-full text-center px-5 py-3 rounded-xl font-extrabold text-blue-700
                      bg-white/80 backdrop-blur border border-white/70 hover:bg-white hover:shadow transition"
               aria-label="ورود فروشندگان">
              ورود فروشندگان
            </a>
            <div class="text-xs text-gray-500 leading-6">
              کمتر از ۳ دقیقه تا راه‌اندازی — بدون نیاز به برنامه‌نویسی
            </div>
          </div>
        </div>
      </div>

      <!-- نوار پایینی -->
      <div class="mt-10 pt-4 border-t border-white/70
                  flex flex-col sm:flex-row items-center justify-between gap-3
                  text-gray-500 text-sm">
        <div class="flex items-center gap-2">
          <span class="inline-flex w-6 h-6 items-center justify-center rounded-lg
                       bg-gradient-to-tr from-blue-600 to-teal-500 text-white">
            <i class="fa-solid fa-gem"></i>
          </span>
          <span>ساخته شده با <strong class="text-gray-700">ویترینت</strong> — ویترین آنلاین کسب‌وکارهای محلی</span>
        </div>

        <p>© <span id="footer-year"></span> ویترینت — همه حقوق محفوظ است.</p>

        <div class="flex items-center gap-2">
          <a href="/terms" class="hover:text-blue-700 transition">قوانین</a>
          <span class="text-gray-300">•</span>
          <a href="/privacy" class="hover:text-blue-700 transition">حریم خصوصی</a>
          <span class="text-gray-300">•</span>
          <button id="back-to-top" class="chip chip--primary" aria-label="بازگشت به بالای صفحه">بازگشت به بالا</button>
        </div>
      </div>

    </div>
  </div>
</footer>




<script>
  (function () {
    // سال شمسی با ارقام فارسی
    const yearEl = document.getElementById('footer-year');
    if (yearEl) {
      yearEl.textContent = new Intl.DateTimeFormat('fa-IR', { year: 'numeric' }).format(new Date());
    }

    // بازگشت به بالا با اسکرول نرم (رعایت Reduce Motion)
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const up = document.getElementById('back-to-top');
    if (up) {
      up.addEventListener('click', () => {
        if (prefersReduced) {
          window.scrollTo(0, 0);
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    }

    // اسکرول نرم برای لینک‌های داخلی داخل فوتر (#anchor)
    document.querySelectorAll('#site-footer a[href^="#"]').forEach(a => {
      a.addEventListener('click', (e) => {
        const id = a.getAttribute('href');
        const target = document.querySelector(id);
        if (!target) return;
        e.preventDefault();

        if (prefersReduced) {
          target.scrollIntoView();
        } else {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // بهبود دسترس‌پذیری: فوکوس پس از اسکرول
        target.setAttribute('tabindex', '-1');
        target.focus({ preventScroll: true });
      });
    });
  })();
</script>


    <script src="nav-active.js"></script>

    <script>
        // Modal functionality for portfolio images
        function openModal(imageSrc, title) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            
            modalImage.src = imageSrc;
            modalTitle.textContent = title;
            
            // Disable body scroll
            document.body.style.overflow = 'hidden';
            
            // Show modal with animation
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.querySelector('.relative').classList.add('scale-100', 'opacity-100');
                modal.querySelector('.relative').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }
        function closeModal() {
            const modal = document.getElementById('imageModal');
            
            // Hide modal with animation
            modal.querySelector('.relative').classList.add('scale-95', 'opacity-0');
            modal.querySelector('.relative').classList.remove('scale-100', 'opacity-100');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                // Enable body scroll
                document.body.style.overflow = '';
            }, 300);
        }
        // Close modal when clicking outside the image
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
        // Booking Wizard Logic
      document.addEventListener('DOMContentLoaded', function () {
  // --- عناصر اصلی
  const heroCta = document.getElementById('hero-cta');
  const bookingWizard = document.getElementById('booking-wizard');

  // دکمه‌ها/لیست‌ها
  const serviceSelectButtons = document.querySelectorAll('.service-select');
  const serviceOptions = document.querySelectorAll('.service-option');

  const dateOptions = document.querySelectorAll('.date-option');
  const timeOptions = document.querySelectorAll('.time-option');

  const nextToStep2 = document.getElementById('next-to-step-2');
  const nextToStep3 = document.getElementById('next-to-step-3');
  const nextToStep4 = document.getElementById('next-to-step-4');

  const backToStep1 = document.getElementById('back-to-step-1');
  const backToStep2 = document.getElementById('back-to-step-2');
  const backToStep3 = document.getElementById('back-to-step-3');

  const phoneNumber = document.getElementById('phone-number');
  const customerName = document.getElementById('customer-name');

  const bookingSuccess = document.getElementById('booking-success');
  const confirmBooking = document.getElementById('confirm-booking');
  const closeBooking = document.getElementById('close-booking');

  // وضعیت انتخاب‌ها
  let selectedService = '';
  let selectedPrice = '';
  let selectedDate = '';
  let selectedTime = '';

  // کمک‌تابع‌ها
  function openWizardAndScroll() {
    if (!bookingWizard) return;
    bookingWizard.classList.remove('hidden');
    window.scrollTo({ top: bookingWizard.offsetTop - 80, behavior: 'smooth' });
  }
  function setProgress(step) {
    const progress = document.getElementById('progress-bar');
    const currentStep = document.getElementById('current-step');
    const ind2 = document.getElementById('step-2-indicator');
    const ind3 = document.getElementById('step-3-indicator');
    const ind4 = document.getElementById('step-4-indicator');

    if (currentStep) currentStep.textContent = String(step);
    if (progress) {
      const width = step === 1 ? '25%' : step === 2 ? '50%' : step === 3 ? '75%' : '100%';
      progress.style.width = width;
    }
    if (ind2) { ind2.classList.toggle('bg-blue-600', step >= 2); ind2.classList.toggle('bg-gray-300', step < 2); }
    if (ind3) { ind3.classList.toggle('bg-blue-600', step >= 3); ind3.classList.toggle('bg-gray-300', step < 3); }
    if (ind4) { ind4.classList.toggle('bg-blue-600', step >= 4); ind4.classList.toggle('bg-gray-300', step < 4); }
  }
  function showStep(showId, hideIds) {
    const showEl = document.getElementById(showId);
    if (showEl) showEl.classList.remove('hidden');
    hideIds.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.classList.add('hidden');
    });
  }

  // باز کردن ویزارد از هدر
  if (heroCta) {
    heroCta.addEventListener('click', openWizardAndScroll);
  }

  // انتخاب سرویس از روی کارت‌ها + باز کردن ویزارد
  if (serviceSelectButtons.length) {
    serviceSelectButtons.forEach(button => {
      button.addEventListener('click', function () {
        const service = this.getAttribute('data-service') || '';
        const price = this.getAttribute('data-price') || '';
        openWizardAndScroll();

        // هایلایت گزینه‌ی متناظر داخل ویزارد
        setTimeout(() => {
          serviceOptions.forEach(option => {
            const match = option.getAttribute('data-service') === service;
            option.classList.toggle('border-blue-500', match);
            option.classList.toggle('bg-blue-50', match);
          });
          // ست کردن وضعیت و فعال‌کردن دکمه مرحله بعد
          selectedService = service;
          selectedPrice = price;
          if (nextToStep2) nextToStep2.disabled = !selectedService;
        }, 300);
      });
    });
  }

  // مرحله ۱: انتخاب سرویس
  if (serviceOptions.length) {
    serviceOptions.forEach(option => {
      option.addEventListener('click', function () {
        serviceOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));
        this.classList.add('border-blue-500', 'bg-blue-50');

        selectedService = this.getAttribute('data-service') || '';
        selectedPrice = this.getAttribute('data-price') || '';
        if (nextToStep2) nextToStep2.disabled = !selectedService;
      });
    });
  }
  if (nextToStep2) {
    nextToStep2.addEventListener('click', function () {
      showStep('step-2', ['step-1', 'step-3', 'step-4']);
      setProgress(2);
    });
  }

  // مرحله ۲: تاریخ و ساعت
  if (dateOptions.length) {
    dateOptions.forEach(option => {
      option.addEventListener('click', function () {
        dateOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));
        this.classList.add('border-blue-500', 'bg-blue-50');

        // اصلاح سلکتورها (قبلاً .div:nth-child(...) بود)
        const day =
          (this.querySelector('[data-day]') && this.querySelector('[data-day]').textContent.trim()) ||
          (this.querySelector('div:nth-child(1)') && this.querySelector('div:nth-child(1)').textContent.trim()) ||
          '';
        const date =
          (this.querySelector('[data-date]') && this.querySelector('[data-date]').textContent.trim()) ||
          (this.querySelector('div:nth-child(2)') && this.querySelector('div:nth-child(2)').textContent.trim()) ||
          '';

        selectedDate = (date && day) ? (date + ' ' + day) : (this.getAttribute('data-full') || this.textContent.trim());

        if (nextToStep3) nextToStep3.disabled = !(selectedDate && selectedTime);
      });
    });
  }
  if (timeOptions.length) {
    timeOptions.forEach(option => {
      option.addEventListener('click', function () {
        timeOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));
        this.classList.add('border-blue-500', 'bg-blue-50');

        selectedTime = this.textContent.trim();
        if (nextToStep3) nextToStep3.disabled = !(selectedDate && selectedTime);
      });
    });
  }

  if (backToStep1) {
    backToStep1.addEventListener('click', function () {
      showStep('step-1', ['step-2', 'step-3', 'step-4']);
      setProgress(1);
    });
  }
  if (nextToStep3) {
    nextToStep3.addEventListener('click', function () {
      showStep('step-3', ['step-1', 'step-2', 'step-4']);
      setProgress(3);
    });
  }

  // مرحله ۳: اطلاعات تماس
  function toEnglishDigits(str) {
    return str.replace(/[۰-۹]/g, d => '۰۱۲۳۴۵۶۷۸۹'.indexOf(d));
  }
  function toPersianDigits(str) {
    return str.replace(/\d/g, d => '۰۱۲۳۴۵۶۷۸۹'[d]);
  }
  function validateStep3() {
    let raw = phoneNumber && phoneNumber.value ? phoneNumber.value : '';
    raw = toEnglishDigits(raw).replace(/[^0-9]/g, '');
    if (raw.length && raw[0] !== '0') raw = '0' + raw;
    raw = raw.slice(0, 11);
    if (phoneNumber) phoneNumber.value = toPersianDigits(raw);
    const valid = /^0\d{10}$/.test(raw);
    const nameOk = customerName && customerName.value.trim() !== '';
    if (nextToStep4) nextToStep4.disabled = !(valid && nameOk);
    return raw;
  }
  if (phoneNumber) phoneNumber.addEventListener('input', validateStep3);
  if (customerName) customerName.addEventListener('input', validateStep3);

  if (backToStep2) {
    backToStep2.addEventListener('click', function () {
      showStep('step-2', ['step-1', 'step-3', 'step-4']);
      setProgress(2);
    });
  }

  if (nextToStep4) {
    nextToStep4.addEventListener('click', function () {
      const elService = document.getElementById('confirm-service');
      const elDate = document.getElementById('confirm-date');
      const elTime = document.getElementById('confirm-time');
      const elName = document.getElementById('confirm-name');
      const elPhone = document.getElementById('confirm-phone');
      const elPrice = document.getElementById('confirm-price');

      if (elService) elService.textContent = selectedService;
      if (elDate) elDate.textContent = selectedDate;
      if (elTime) elTime.textContent = selectedTime;
      if (elName) elName.textContent = customerName ? customerName.value : '';
      const rawPhone = validateStep3();
      if (elPhone) elPhone.textContent = toPersianDigits(rawPhone);
      if (elPrice) {
        const priceNum = parseInt(selectedPrice || '0', 10) || 0;
        elPrice.textContent = priceNum > 0 ? priceNum.toLocaleString('fa-IR') + ' تومان' : 'رایگان';
      }

      showStep('step-4', ['step-1', 'step-2', 'step-3']);
      setProgress(4);
    });
  }

  // مرحله ۴: تأیید نهایی
  if (backToStep3) {
    backToStep3.addEventListener('click', function () {
      showStep('step-3', ['step-1', 'step-2', 'step-4']);
      setProgress(3);
    });
  }

  if (confirmBooking) {
    confirmBooking.addEventListener('click', function () {
      const step4 = document.getElementById('step-4');
      if (step4) step4.classList.add('hidden');
      if (bookingSuccess) bookingSuccess.classList.remove('hidden');

      // ذخیره ساده در localStorage
      const bookings = JSON.parse(localStorage.getItem('vitreenet-bookings') || '[]');
      bookings.push({
        service: selectedService,
        price: selectedPrice,
        date: selectedDate,
        time: selectedTime,
        name: customerName ? customerName.value : '',
        phone: phoneNumber ? phoneNumber.value : '',
        timestamp: new Date().toISOString()
      });
      localStorage.setItem('vitreenet-bookings', JSON.stringify(bookings));
    });
  }

  if (closeBooking) {
    closeBooking.addEventListener('click', function () {
      if (bookingWizard) bookingWizard.classList.add('hidden');
      resetBookingWizard();
    });
  }

  function resetBookingWizard() {
    const s1 = document.getElementById('step-1');
    const s2 = document.getElementById('step-2');
    const s3 = document.getElementById('step-3');
    const s4 = document.getElementById('step-4');

    if (s1) s1.classList.remove('hidden');
    if (s2) s2.classList.add('hidden');
    if (s3) s3.classList.add('hidden');
    if (s4) s4.classList.add('hidden');
    if (bookingSuccess) bookingSuccess.classList.add('hidden');

    const currentStep = document.getElementById('current-step');
    if (currentStep) currentStep.textContent = '1';

    const ind2 = document.getElementById('step-2-indicator');
    const ind3 = document.getElementById('step-3-indicator');
    const ind4 = document.getElementById('step-4-indicator');
    if (ind2) { ind2.classList.remove('bg-blue-600'); ind2.classList.add('bg-gray-300'); }
    if (ind3) { ind3.classList.remove('bg-blue-600'); ind3.classList.add('bg-gray-300'); }
    if (ind4) { ind4.classList.remove('bg-blue-600'); ind4.classList.add('bg-gray-300'); }

    const progress = document.getElementById('progress-bar');
    if (progress) progress.style.width = '25%';

    serviceOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));
    dateOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));
    timeOptions.forEach(opt => opt.classList.remove('border-blue-500', 'bg-blue-50'));

    if (phoneNumber) phoneNumber.value = '';
    if (customerName) customerName.value = '';

    if (nextToStep2) nextToStep2.disabled = true;
    if (nextToStep3) nextToStep3.disabled = true;
    if (nextToStep4) nextToStep4.disabled = true;

    selectedService = '';
    selectedPrice = '';
    selectedDate = '';
    selectedTime = '';
  }
});
    </script>






<!-- Mobile Bottom Footer / Nav (5 items, same style) -->
<footer id="mobile-bottom-nav" class="mobile-nav lg:hidden" role="navigation" aria-label="ناوبری موبایل">
  <!-- خانه -->
  <button type="button" class="nav-item" data-nav="home" aria-label="خانه" aria-current="page">
    <i class="fa-solid fa-house nav-icon"></i>
    <span class="nav-label">خانه</span>
  </button>

  <!-- خدمات -->
  <button type="button" class="nav-item" data-nav="services" aria-label="خدمات">
    <i class="fa-solid fa-scissors nav-icon"></i>
    <span class="nav-label">خدمات</span>
  </button>

  <!-- رزرو (CTA وسط، برجسته) -->
  <button type="button" class="nav-item active -mt-6 !text-white" data-nav="booking" aria-label="رزرو" style="padding:0">
    <span class="inline-flex items-center justify-center w-14 h-14 rounded-2xl shadow-lg ring-4 ring-white/60 bg-gradient-to-tr from-blue-600 to-teal-500">
      <i class="fa-solid fa-calendar-check text-lg"></i>
    </span>
    <span class="nav-label mt-1">رزرو</span>
  </button>

  <!-- نمونه‌کار -->
  <button type="button" class="nav-item" data-nav="portfolio" aria-label="نمونه‌کار">
    <i class="fa-solid fa-images nav-icon"></i>
    <span class="nav-label">نمونه‌کار</span>
  </button>

  <!-- تماس -->
  <button type="button" class="nav-item" data-nav="contact" aria-label="اطلاعات و تماس">
    <i class="fa-solid fa-phone nav-icon"></i>
    <span class="nav-label">تماس</span>
  </button>
</footer>

<script>
(() => {
  const nav = document.getElementById('mobile-bottom-nav');
  if (!nav) return;

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const items = nav.querySelectorAll('.nav-item');

  const setActive = (key) => {
    items.forEach(btn => {
      const isActive = btn.dataset.nav === key;
      btn.classList.toggle('active', isActive);
      btn.setAttribute('aria-current', isActive ? 'page' : 'false');
    });
  };

  const smoothGo = (target) => {
    if (!target) return;
    if (prefersReduced) target.scrollIntoView();
    else target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  };

  const byId = (id) => document.getElementById(id);
  const bySel = (sel) => document.querySelector(sel);

  const findByHeading = (keyword) => {
    const hs = [...document.querySelectorAll('h1,h2,h3,h4')];
    const hit = hs.find(h => (h.textContent || '').includes(keyword));
    return hit ? (hit.closest('section') || hit) : null;
  };

  // Targets (with robust fallbacks)
  const targets = {
    home: () => document.documentElement,
    services: () => byId('services') || findByHeading('خدمات'),
    booking: () => byId('booking-wizard'),
    portfolio: () => byId('portfolio') || bySel('.portfolio-section') || findByHeading('نمونه کار'),
    contact: () => byId('contact') || findByHeading('اطلاعات و تماس'),
  };

  // Click handlers
  items.forEach(btn => {
    btn.addEventListener('click', () => {
      const key = btn.dataset.nav;

      if (key === 'home') {
        // لینک مستقیم به صفحه اصلی ویترینت
        window.location.href = 'local***index.html';
        return;
      }

      if (key === 'booking') {
        const wizard = byId('booking-wizard');
        const heroCta = byId('hero-cta');
        if (wizard && wizard.classList.contains('hidden')) {
          if (heroCta) heroCta.click();
          else wizard.classList.remove('hidden');
        }
        const t = targets.booking();
        if (t) {
          const top = t.getBoundingClientRect().top + window.scrollY - 80;
          if (prefersReduced) window.scrollTo(0, top);
          else window.scrollTo({ top, behavior: 'smooth' });
          setActive('booking');
        }
        return;
      }

      const t = targets[key] && targets[key]();
      if (t) smoothGo(t);
      setActive(key);
    });
  });

  // Scroll spy (if supported)
  const spySections = [
    { key: 'services', el: targets.services() },
    { key: 'portfolio', el: targets.portfolio() },
    { key: 'contact',  el: targets.contact() },
  ].filter(s => s.el);

  if ('IntersectionObserver' in window && spySections.length) {
    const io = new IntersectionObserver((entries) => {
      const vis = entries.filter(e => e.isIntersecting)
                         .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
      if (!vis) return;
      const hit = spySections.find(s => s.el === vis.target);
      if (hit) setActive(hit.key);
    }, { threshold: [0.35, 0.6], rootMargin: '-20% 0px -50% 0px' });
    spySections.forEach(s => io.observe(s.el));

    // Top of page = خانه
    window.addEventListener('scroll', () => {
      if (window.scrollY < 80) setActive('home');
    }, { passive: true });
  }

  // Initial state
  setActive('home');
})();
</script>



<script>
  (function () {
    var badge = document.getElementById('vip-badge');
    var out   = document.getElementById('vip-count');
    if (!badge || !out) return;
    var n = Number(badge.getAttribute('data-count') || 0);
    out.textContent = new Intl.NumberFormat('fa-IR').format(n) + ' نفر';
  })();
</script>






<script>
/* پاپ‌اپ شیشه‌ای وسط صفحه + ترجمه پیام‌ها (Drop-in Replacement) */
(() => {
  const translate = (txt) => {
    if (!txt) return "";
    if (/You can submit one review per day/i.test(txt)) {
      return "روزانه فقط یک نظر می‌توانید ثبت کنید.";
    }
    return txt;
  };

  // همان امضای قبلی: showToastDark(message, {type, durationMs})
  window.showToastDark = function (message, { type = "info", durationMs = 2600 } = {}) {
    const palette = {
      success: { ring: "ring-emerald-200", icon: "text-emerald-600", ico: "fas fa-check" },
      info:    { ring: "ring-blue-200",    icon: "text-blue-600",    ico: "fas fa-info-circle" },
      error:   { ring: "ring-rose-200",    icon: "text-rose-600",    ico: "fas fa-exclamation-circle" }
    };
    const p = palette[type] || palette.info;

    // اگر قبلاً بازه، حذف کن
    const existing = document.getElementById("dark-toast");
    if (existing) existing.remove();

    // لایه‌ی پس‌زمینه (برای کلیک برای بستن)
    const overlay = document.createElement("div");
    overlay.id = "dark-toast";
    overlay.setAttribute("role", "dialog");
    overlay.setAttribute("aria-modal", "true");
    overlay.dir = "rtl";
    overlay.className =
      "fixed inset-0 z-[160] flex items-center justify-center p-4 " +
      "bg-black/30 backdrop-blur-sm opacity-0 transition-opacity duration-200";

    // کارت وسط صفحه
    const card = document.createElement("div");
    card.className =
      `relative w-full max-w-sm sm:max-w-md rounded-2xl bg-white/95 backdrop-blur-md ` +
      `shadow-2xl ring-1 ${p.ring} transform scale-95 opacity-0 transition-all duration-200`;

    // محتوای کارت
    const inner = document.createElement("div");
    inner.className = "px-5 py-4 flex items-start gap-3 text-slate-900";

    const icon = document.createElement("i");
    icon.className = `${p.ico} ${p.icon} text-xl mt-0.5`;

    const msg = document.createElement("div");
    msg.className = "text-[14px] leading-7 font-bold";
    msg.textContent = translate(message);

    const closeBtn = document.createElement("button");
    closeBtn.type = "button";
    closeBtn.setAttribute("aria-label", "بستن");
    closeBtn.className =
      "absolute top-2 left-2 w-9 h-9 rounded-full text-slate-500 " +
      "hover:text-slate-700 hover:bg-slate-100 flex items-center justify-center";
    closeBtn.innerHTML = "&times;";

    inner.append(icon, msg);
    card.append(closeBtn, inner);
    overlay.append(card);
    document.body.appendChild(overlay);

    // انیمیشن نمایش
    requestAnimationFrame(() => {
      overlay.classList.remove("opacity-0");
      card.classList.remove("scale-95", "opacity-0");
    });

    // بستن با انیمیشن
    const remove = () => {
      overlay.classList.add("opacity-0");
      card.classList.add("scale-95", "opacity-0");
      setTimeout(() => overlay.remove(), 200);
      document.removeEventListener("keydown", onKey);
    };
    const onKey = (e) => { if (e.key === "Escape") remove(); };

    document.addEventListener("keydown", onKey);
    overlay.addEventListener("click", (e) => { if (e.target === overlay) remove(); });
    closeBtn.addEventListener("click", (e) => { e.stopPropagation(); remove(); });

    // زمان‌بندی خودکار + توقف با Hover
    let timer = setTimeout(remove, durationMs);
    overlay.addEventListener("mouseenter", () => clearTimeout(timer));
    overlay.addEventListener("mouseleave", () => {
      timer = setTimeout(remove, 1200);
    });
  };

  // فارسی‌سازی Tooltip دکمه‌ی ارسال نظر در حالت محدودیت روزانه
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("submit-review");
    if (!btn) return;
    const apply = () => {
      if (/You can submit one review per day/i.test(btn.title || "")) {
        btn.title = "روزانه فقط یک نظر می‌توانید ثبت کنید.";
      }
    };
    apply();
    new MutationObserver(apply).observe(btn, { attributes: true, attributeFilter: ["title"] });
  });
})();
</script>


</body>
</html>