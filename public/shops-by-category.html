<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.tailwindcss.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net data:; connect-src 'self'; img-src 'self' data: https://placehold.co; base-uri 'self'; form-action 'self'; upgrade-insecure-requests; block-all-mixed-content">
<meta http-equiv="Strict-Transport-Security" content="max-age=63072000; includeSubDomains; preload">
<meta http-equiv="Referrer-Policy" content="no-referrer">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-XSS-Protection" content="1; mode=block">
<meta name="referrer" content="no-referrer">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
<script src="/security.js" defer></script>
<script src="/js/runtime-config.js" defer></script>
<script src="/js/analytics.js" defer></script>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ØºØ§Ø²Ù‡â€ŒÙ‡Ø§ | ÙˆÛŒØªØ±ÛŒÙ†Øª</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="style-index.css" />
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700;900&family=Poppins:wght@700;900&display=swap" rel="stylesheet"/>
<script src="/nav-active.js" defer></script>
<style>
  main {
    min-height: 100vh;
  }
  .category-hero h1 {
    background: linear-gradient(120deg,#10b981,#0ea5e9);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .category-pill {
    background: rgba(16,185,129,0.08);
    border: 1px solid rgba(16,185,129,0.2);
    color: #047857;
  }
  .filter-card {
    background: rgba(255,255,255,0.85);
    border-radius: 1.75rem;
    border: 1px solid rgba(148, 163, 184, 0.2);
    box-shadow: 0 15px 40px rgba(14,165,233,0.08);
    backdrop-filter: blur(18px);
  }
  .category-chip {
    padding: 0.55rem 1.3rem;
    border-radius: 999px;
    border: 1px solid rgba(148,163,184,0.4);
    background: rgba(255,255,255,0.92);
    color: #475569;
    font-weight: 700;
    transition: all 0.2s ease;
  }
  .category-chip:hover,
  .category-chip.active {
    border-color: #10b981;
    color: #10b981;
    box-shadow: 0 6px 18px rgba(16,185,129,0.18);
  }
  .category-card {
    background: rgba(255,255,255,0.95);
    border-radius: 1.75rem;
    border: 1px solid rgba(226,232,240,0.7);
    box-shadow: 0 25px 40px -20px rgba(15,118,110,0.4);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
  }
  .category-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 30px 45px -25px rgba(14,165,233,0.4);
    border-color: rgba(16,185,129,0.4);
  }
  .category-card__image {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
  }
  .category-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.45s ease;
  }
  .category-card:hover .category-card__image img {
    transform: scale(1.08);
  }
  .category-card__badge {
    position: absolute;
    top: 14px;
    right: 14px;
    background: rgba(255,255,255,0.9);
    border-radius: 999px;
    padding: 0.3rem 0.85rem;
    font-size: 0.75rem;
    font-weight: 800;
    color: #0f172a;
    box-shadow: 0 8px 20px rgba(15,118,110,0.1);
  }
  .category-card__body {
    padding: 1.4rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    flex: 1;
  }
  .category-card__cta {
    margin-top: auto;
    background: rgba(16,185,129,0.08);
    color: #047857;
    border-radius: 1rem;
    padding: 0.8rem;
    font-weight: 800;
    text-align: center;
    transition: all 0.2s ease;
  }
  .category-card:hover .category-card__cta {
    background: linear-gradient(120deg,#10b981,#0ea5e9);
    color: #fff;
    box-shadow: 0 12px 25px rgba(16,185,129,0.35);
  }
  .portfolio-card {
    border-radius: 1.5rem;
    overflow: hidden;
    position: relative;
  }
  .portfolio-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg,rgba(15,23,42,0) 40%,rgba(15,23,42,0.65));
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .portfolio-card:hover::after { opacity: 1; }
  .portfolio-card__meta {
    position: absolute;
    inset-inline: 0;
    bottom: 0;
    padding: 1rem;
    color: #fff;
    z-index: 2;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
  }
  .portfolio-card:hover .portfolio-card__meta {
    opacity: 1;
    transform: translateY(0);
  }
  .loader {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #10b981;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
</head>
<body class="text-gray-800">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@900&display=swap" rel="stylesheet" />
<header id="mainHeader" class="w-full bg-white/95 shadow-md backdrop-blur-md sticky top-0 z-50">
  <div id="headerInner" class="max-w-7xl mx-auto flex flex-row items-center justify-between px-4 sm:px-6 py-3 md:py-3.5 gap-3">
    <div id="logoCityWrap" class="flex items-center gap-2 md:gap-3 flex-shrink-0">
      <a href="index.html" class="vitreenet-brand header-item" aria-label="ÙˆÛŒØªØ±ÛŒÙ†Øª">
        <span class="vitreenet-brand__mark" aria-hidden="true">
          <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" role="presentation">
            <defs>
              <linearGradient id="vtMarkGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#0ea5e9" />
                <stop offset="55%" stop-color="#10b981" />
                <stop offset="100%" stop-color="#0fb67f" />
              </linearGradient>
              <linearGradient id="vtMarkInner" x1="15%" y1="85%" x2="85%" y2="15%">
                <stop offset="0%" stop-color="#ffffff" stop-opacity="0.9" />
                <stop offset="100%" stop-color="#dcfce7" stop-opacity="0.25" />
              </linearGradient>
            </defs>
            <circle cx="24" cy="24" r="22" fill="url(#vtMarkGradient)" />
            <circle cx="24" cy="24" r="18" fill="url(#vtMarkInner)" />
            <path d="M15.5 16h4.7l4.3 10.6L28.8 16h4.7L26 33h-4.2L15.5 16Z" fill="#0f172a" fill-opacity="0.9" />
            <path d="M18.2 17.6 24 31.1l5.8-13.5" fill="none" stroke="#22c55e" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </span>
        <span class="vitreenet-brand__text">
          <span class="vitreenet-brand__title">Vitreenet</span>
          <span class="vitreenet-brand__subtitle">ÙˆÛŒØªØ±ÛŒÙ†Øª</span>
        </span>
      </a>
      <div class="hidden md:flex items-center gap-1 px-3 py-1.5 rounded-full shadow-lg header-item"
           style="background:linear-gradient(90deg,#10b981E6 70%,#0ea5e9E6); border: 1.5px solid #fff6; backdrop-filter: blur(5px);">
        <svg width="18" height="18" fill="none" viewBox="0 0 22 22" class="ml-1 drop-shadow" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="city-icon" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#ffffff" stop-opacity="1" />
              <stop offset="100%" stop-color="#e0f2fe" stop-opacity="0.9" />
            </linearGradient>
          </defs>
          <path d="M11 2.5C7.13 2.5 4 5.61 4 9.45c0 3.52 4.1 7.93 6.2 10.01.46.47 1.2.47 1.66 0 2.1-2.08 6.14-6.49 6.14-10.01C18 5.61 14.87 2.5 11 2.5Zm0 10.25a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5Z" fill="url(#city-icon)"/>
        </svg>
        <span id="headerCity" class="font-bold text-white text-[14px] drop-shadow-sm" style="letter-spacing:.3px;">Ø³Ù†Ù†Ø¯Ø¬</span>
      </div>
    </div>
    <nav id="desktopNav" class="hidden md:flex items-center gap-1 text-base flex-1 justify-end">
      <a href="index.html" class="main-nav-link text-gray-700 hover:text-[#10b981] font-bold px-4 py-2 rounded-lg transition-all hover:bg-emerald-50">Ø®Ø§Ù†Ù‡</a>
      <a href="categories.html" class="main-nav-link text-gray-700 hover:text-[#0ea5e9] font-bold px-4 py-2 rounded-lg transition-all hover:bg-sky-50">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</a>
      <a href="login.html" id="loginNavLink" class="main-nav-link text-gray-700 hover:text-[#0ea5e9] font-bold px-4 py-2 rounded-lg transition-all hover:bg-sky-50">
        <span class="login-link-label">ÙˆØ±ÙˆØ¯</span>
      </a>
    </nav>
    <div class="flex items-center gap-2 header-item">
      <button type="button" id="rewardClaimBtn"
        class="reward-header-btn inline-flex items-center gap-2 px-4 py-2 md:px-5 md:py-2.5 rounded-full font-extrabold shadow-lg hover:shadow-xl transition-all duration-200 whitespace-nowrap text-white text-sm md:text-base header-item"
        aria-haspopup="dialog" aria-controls="rewardModal" aria-expanded="false">
        <span class="reward-header-icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 8h14v12H5z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3 8h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M12 4c.8-1.3 2.5-2 3.8-1 .7.5 1.2 1.3 1.2 2.1 0 1.5-1.2 2.9-3 2.9h-2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 4c-.8-1.3-2.5-2-3.8-1-.7.5-1.2 1.3-1.2 2.1 0 1.5 1.2 2.9 3 2.9h2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡</span>
      </button>
      <a href="post.html" id="registerShopBtn" class="btn-grad px-4 py-2 md:px-5 md:py-2.5 rounded-full font-extrabold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 whitespace-nowrap text-white text-sm md:text-base header-item">
        Ø«Ø¨Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡
      </a>
    </div>
  </div>
</header>

<main class="px-4 sm:px-6 lg:px-8 pt-32 pb-16">
  <section class="max-w-7xl mx-auto flex flex-col gap-10">
    <div class="glass category-hero w-full mx-auto px-5 sm:px-10 py-8 sm:py-12 shadow-2xl">
      <div class="flex flex-col lg:flex-row items-center lg:items-start justify-between gap-6">
        <div class="text-center lg:text-right max-w-2xl">
          <span class="category-pill inline-flex items-center gap-2 px-4 py-1 rounded-full text-xs font-black uppercase tracking-wider">
            <span id="categoryPill">ÙˆÛŒØªØ±ÛŒÙ† Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ</span>
          </span>
          <h1 id="categoryTitle" class="text-3xl md:text-4xl font-black mt-4 mb-3 leading-tight">ÙØ±ÙˆØ´Ú¯Ø§Ù‡â€ŒÙ‡Ø§</h1>
          <p id="categorySubtitle" class="text-gray-600 text-base md:text-lg font-semibold">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª...</p>
        </div>
        <div class="flex flex-col items-center lg:items-end gap-3">
          <p class="text-sm text-gray-500 font-semibold">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ ÙØ¹Ø§Ù„ Ø¯Ø± Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡</p>
          <div class="cta-blur px-6 py-4 rounded-2xl flex items-center gap-3">
            <div class="text-4xl font-black text-emerald-500" id="resultsMeta">0</div>
            <div class="text-sm font-bold text-gray-600">Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø²Ø¯ÛŒØ¯</div>
          </div>
        </div>
      </div>
      <div class="mt-8 grid grid-cols-1 lg:grid-cols-12 gap-4">
        <label class="lg:col-span-8 relative w-full">
          <span class="sr-only">Ø¬Ø³ØªØ¬Ùˆ</span>
          <input type="text" id="searchInput" class="vitrine-input pl-12" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù†Ø§Ù… Ù…ØºØ§Ø²Ù‡ØŒ Ù…Ø­Ù„Ù‡ ÛŒØ§ Ø¢Ø¯Ø±Ø³..."/>
          <span class="absolute left-4 top-3 text-slate-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          </span>
        </label>
        <div class="lg:col-span-4">
          <select id="sortSelect" class="vitrine-input cursor-pointer">
            <option value="popular">ğŸ”¥ Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ†</option>
            <option value="newest">ğŸ“… Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†</option>
            <option value="rating_desc">â­ Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</option>
          </select>
        </div>
      </div>
      <div id="subcatContainer" class="mt-6 hidden flex-wrap gap-2 justify-center lg:justify-start">
        <button class="category-chip active" data-sub="all">Ù‡Ù…Ù‡</button>
      </div>
    </div>

    <div id="portfolioSection" class="hidden">
      <div class="flex items-center gap-3 mb-4">
        <div class="w-2 h-8 rounded-full" style="background:linear-gradient(180deg,#10b981,#0ea5e9);"></div>
        <h2 class="text-2xl font-black text-slate-800">Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø¨Ø±ØªØ±</h2>
      </div>
      <div id="portfolioGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
    </div>

    <div id="results-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <div class="col-span-full flex flex-col items-center justify-center py-16 text-slate-400">
        <div class="loader mb-4"></div>
        <p class="font-bold text-lg text-slate-500">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡â€ŒÙ‡Ø§...</p>
      </div>
    </div>
  </section>
</main>

<div id="rewardModalBackdrop" class="reward-modal-backdrop" role="presentation" aria-hidden="true">
  <div id="rewardModal" class="reward-modal" role="dialog" aria-modal="true" aria-labelledby="rewardModalTitle" aria-describedby="rewardModalSubtitle">
    <button type="button" id="rewardModalCloseBtn" class="reward-modal__close" aria-label="Ø¨Ø³ØªÙ† Ù¾Ù†Ø¬Ø±Ù‡">
      <span aria-hidden="true">Ã—</span>
    </button>
    <div class="reward-modal__header">
      <h2 id="rewardModalTitle">Ú©Ù…Ù¾ÛŒÙ† Ø¬ÙˆØ§ÛŒØ² ÙˆÛŒØªØ±ÛŒÙ†Øª</h2>
      <p id="rewardModalSubtitle">Ø¨Ù‡ Ù…Ø­Ø¶ ÙØ¹Ø§Ù„ Ø´Ø¯Ù† Ú©Ù…Ù¾ÛŒÙ†ØŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
    </div>
    <div class="reward-modal__body">
      <div class="reward-modal__stats" id="rewardModalStats">
        <div>
          <span class="reward-modal__stat-label">Ù…Ø¨Ù„Øº Ø¬Ø§ÛŒØ²Ù‡</span>
          <span class="reward-modal__stat-value" id="rewardPrizeValue">â€”</span>
        </div>
        <div>
          <span class="reward-modal__stat-label">Ø¸Ø±ÙÛŒØª</span>
          <span class="reward-modal__stat-value" id="rewardCapacityValue">â€”</span>
        </div>
        <div>
          <span class="reward-modal__stat-label">Ø¨Ø±Ù†Ø¯Ú¯Ø§Ù†</span>
          <span class="reward-modal__stat-value" id="rewardWinnersValue">â€”</span>
        </div>
      </div>
      <div class="reward-modal__progress">
        <div id="rewardProgressBar" class="reward-modal__progress-bar" style="width: 0%"></div>
      </div>
      <form id="rewardClaimForm" class="reward-modal__form">
        <label for="rewardCodeInput">Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ Ø¬Ø§ÛŒØ²Ù‡</label>
        <input type="text" id="rewardCodeInput" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="Ù…Ø«Ù„Ø§Ù‹ Û±Û²Û³Û´ÛµÛ¶" />
        <p id="rewardMessage" class="reward-modal__message" aria-live="polite"></p>
        <button type="submit" class="reward-modal__submit" id="rewardModalSubmitBtn">Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡</button>
      </form>
      <button type="button" id="rewardModalDismissBtn" class="reward-modal__secondary">Ø¨Ø¹Ø¯Ø§Ù‹ Ø§Ù…ØªØ­Ø§Ù† Ù…ÛŒâ€ŒÚ©Ù†Ù…</button>
      <button type="button" id="rewardHelpToggle" class="reward-modal__help" aria-expanded="false">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø´Ø±Ú©Øª Ø¯Ø± Ú©Ù…Ù¾ÛŒÙ†</button>
      <div id="rewardHelpContent" class="reward-modal__help-content" hidden>
        <p>Ù‡Ù†Ú¯Ø§Ù… ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ú©Ù…Ù¾ÛŒÙ†ØŒ Ú©Ø¯ Ø¬Ø§ÛŒØ²Ù‡ Ø±Ø§ Ø§Ø² ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø± Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ ÙˆØ§Ø±Ø¯ Ù†Ù…Ø§ÛŒÛŒØ¯.</p>
      </div>
      <section id="rewardPublicWinnersSection" class="reward-modal__winners" hidden>
        <h3>Ø¨Ø±Ù†Ø¯Ú¯Ø§Ù† Ø§Ø®ÛŒØ±</h3>
        <ul id="rewardPublicWinnersList"></ul>
        <p id="rewardPublicWinnersEmpty">Ù‡Ù†ÙˆØ² Ø¨Ø±Ù†Ø¯Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
      </section>
    </div>
  </div>
</div>

<div id="authPromptBackdrop" class="auth-prompt" role="dialog" aria-modal="true" aria-labelledby="authPromptTitle" aria-describedby="authPromptDescription">
  <div class="auth-prompt__dialog">
    <button type="button" id="authPromptCloseBtn" class="auth-prompt__close" aria-label="Ø¨Ø³ØªÙ†"></button>
    <div class="auth-prompt__content">
      <h2 id="authPromptTitle">Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù„Ø§Ø²Ù… Ø§Ø³Øª</h2>
      <p id="authPromptDescription">Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡ØŒ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯ ÛŒØ§ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯.</p>
      <div class="auth-prompt__actions">
        <a href="login.html" id="authPromptLoginBtn" class="auth-prompt__btn auth-prompt__btn--primary">ÙˆØ±ÙˆØ¯</a>
        <a href="register.html" id="authPromptRegisterBtn" class="auth-prompt__btn">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a>
      </div>
      <button type="button" id="authPromptDismissBtn" class="auth-prompt__dismiss">ÙØ¹Ù„Ø§Ù‹ Ù†Ù‡</button>
    </div>
  </div>
</div>

<script src="/js/main-index.js" defer></script>
<script src="/js/shops-by-category.js" defer></script>
</body>
</html>
